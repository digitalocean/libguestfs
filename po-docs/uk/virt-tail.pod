
=head1 НАЗВА

virt-tail — відтворення вмісту (наприкінці) файлів у віртуальній машині

=head1 КОРОТКИЙ ОПИС

 virt-tail [--параметри] -d назва_домену файл [файл ...]

 virt-tail [--параметри] -a диск.img [-a диск.img ...] файл [файл ...]

=head1 ОПИС

C<virt-tail> — інструмент командного рядка для стеження (за кінцем) вмісту
файла C<файл>, де C<файл> існує у іменованій віртуальній машині (або образі
диска). Дія інструмента подібна до звичайної команди S<C<tail -f>>.

Можна вказати декілька назв файлів. У такому випадку кожна з назв
оброблятиметься окремо. Усі назви файлів має бути вказано повністю зі
шляхом, який має починатися з кореневого каталогу (тобто з «/»).

Команда виконуватиметься, аж доки:

=over 4

=item *

Користувач натискає ^C або отримано сигнал переривання.

=item *

Жодного з наведених у списку файлів не знайдено у гостьовій системі або усі
ці файли вилучено.

=item *

Сталася критична помилка.

=back

=head1 ПРИКЛАД

Стежити за F</var/log/messages> у віртуальній машині із назвою C<mydomain>:

 virt-tail -d mydomain /var/log/messages

=head1 ПАРАМЕТРИ

=over 4

=item B<--help>

Показати коротку довідку.

=item B<-a> файл

=item B<--add> файл

Додати I<файл>, який має бути образом диска з віртуальної машини. Якщо у
віртуальній машині декілька блокових пристроїв, вам слід вказати їх усі за
допомогою окремих записів параметра I<-a>.

Формат образу диска визначається автоматично. Щоб перевизначити його і
примусово використати певний формат, скористайтеся параметром
I<--format=..>.

=item B<-a адреса>

=item B<--add адреса>

Додати віддалений диск. Див. L<guestfish(1)/ДОДАВАННЯ ВІДДАЛЕНОГО СХОВИЩА>.

=item B<-c> адреса

=item B<--connect> адреса

Якщо використовується libvirt, встановити з’єднання з вказаним I<URI>. Якщо
пропущено, з’єднання буде встановлено з типовим гіпервізором libvirt.

Якщо вказати блокові пристрої гостьових систем безпосередньо (I<-a>),
libvirt не буде використовуватися взагалі.

=item B<-d> гість

=item B<--domain> гість

Додати всі диски з вказаної гостьової системи libvirt. UUID доменів можна
використовувати замість назв.

=item B<--echo-keys>

Типово, якщо virt-tail попросить вас ввести ключ або пароль, програма не
відтворюватиме введені символи на екрані. Якщо ви не боїтеся
TEMPEST-нападів, або у вашій кімнаті нікого, окрім вас, немає, ви можете
скористатися цим прапорцем, щоб бачити, які саме символи ви вводите.

=item B<-f>

=item B<--follow>

Цей параметр буде проігноровано. virt-tail завжди поводиться як S<L<tail(1)>
I<-f>>. Потреби у явному додаванні параметра I<-f> немає.

=item B<--format=raw|qcow2|..>

=item B<--format>

Типовим значенням для параметра I<-a> є автоматичне визначення формату
образу диска. Використання цього параметра примусово визначає значення
параметрів I<-a> формату диска у наступному рядку команди. Використання
параметра I<--format> без аргументу перемикає програму у режим автоматичного
визначення у наступних параметрах I<-a>.

Приклад:

 virt-tail --format=raw -a диск.img файл

примусове встановлення формату без обробки (без автоматичного визначення)
для F<disk.img>.

 virt-tail --format=raw -a диск.img --format -a щедиск.img файл

примусове встановлення формату без обробки (без автоматичного визначення)
для F<diskimg> і повернення до автоматичного визначення для F<another.img>.

Якщо ви користуєтеся ненадійними образами гостьових систем у необробленому
форматі, вам слід скористатися цим параметром для визначення формату
диска. Таким чином можна уникнути можливих проблем з захистом для
сформованих зловмисниками гостьових систем (CVE-2010-3851).

=item B<--keys-from-stdin>

Прочитати параметри ключа або пароля із джерела стандартного
введення. Типово програма намагається читати паролі від користувача
відкриттям F</dev/tty>.

=item B<-m> пристрій[:точка_монтування[:параметри[:тип_файлової_системи]]]

=item B<--mount> пристрій[:точка_монтування[:параметри[:тип_файлової_системи]]]

Змонтувати названий розділ або логічний том до вказаної точки монтування.

Якщо точку монтування не вказано, типовим значенням є F</>.

Визначення точки монтування вимикає інспектування гостьової системи і
призводить до монтування її кореневої системи та усіх її точок
монтування. Тому вам слід забезпечити монтування усіх точок монтування,
потрібних для роботи із файлами, назви яких вказано як аргументи.

Якщо ви не знаєте, які саме файлові системи містяться у образі диска, ви
можете або запустити guestfish без цього параметра і ознайомитися зі списком
доступних розділів, файлових систем та логічних томів (див. команди
L</list-partitions>, L</list-filesystems> і L</lvs>), або скористатися
програмою L<virt-filesystems(1)>.

Третьою (і нечасто використовуваною) частиною параметра монтування є список
параметрів монтування, які використовуються для того, щоб змонтувати
підлеглу файлову систему. Якщо такий список не буде задано, параметрами
монтування вважатиметься або порожній рядок, або C<ro> (другий варіант
використовується, якщо використано прапорець I<--ro>). Заданням параметрів
монтування ви перевизначаєте типовий варіант. Ймовірно, єдиним випадком,
коли вам може знадобитися це, є випадок вмикання списків керування доступом
(ACL) і/або розширених атрибутів, якщо у файловій системі передбачено їхню
підтримку:

 -m /dev/sda1:/:acl,user_xattr

Використання цього прапорця є еквівалентним до використання команди
C<mount-options>.

Четвертою частиною параметра є назва драйвера файлової системи, якою слід
скористатися, зокрема C<ext3> або C<ntfs>. У визначенні цієї частини
параметра рідко виникає потреба, але вона може бути корисною, якщо для
файлової системи можна скористатися декількома драйверами (приклад: C<ext2>
і C<ext3>), або libguestfs визначає файлову систему помилково.

=item B<-v>

=item B<--verbose>

Увімкнути докладний показ повідомлень з метою діагностики.

=item B<-V>

=item B<--version>

Показати дані щодо версії і завершити роботу.

=item B<-x>

Увімкнути трасування викликів програмного інтерфейсу libguestfs.

=back

=head1 ФАЙЛИ ЖУРНАЛІВ

Щоб отримати список файлів журналів у гостьових системах, скористайтеся
відповідним інструментом — L<virt-log(1)>. Ця програма може обробляти
журнали у двійкових форматах, зокрема журнал systemd.

=head1 ШЛЯХИ У WINDOWS

У C<virt-tail> передбачено обмежені можливості щодо обробки літерних дисків
та шляхів у Windows (наприклад F<E:\foo\bar.txt>).

Тоді і лише тоді, коли у гостьовій системі працює Windows:

=over 4

=item *

Літери дисків, наприклад C<C:>, замінюються на адреси відповідних файлових
систем на основі даних з регістру Windows.

=item *

Усі символи зворотної похилої риски (C<\>) у шляху замінюються символами
звичайної похилої риски так, щоб libguestfs змогла обробити адресу.

=item *

Шлях до файла, вміст якого має бути показано, визначається без врахування
регістру символів у його записі.

=back

Відомі певні недоліки програми:

=over 4

=item *

Перехід за деякими символічними посиланнями NTFS може здійснюватися з
помилками.

=item *

Точки з'єднання NTFS, які виходять за межі однією файлової системи
використовувати не можна.

=back

=head1 СТАН ВИХОДУ

Ця програма повертає значення 0 у разі успішного завершення і ненульове
значення, якщо сталася помилка.

=head1 ТАКОЖ ПЕРЕГЛЯНЬТЕ

L<guestfs(3)>, L<guestfish(1)>, L<virt-copy-out(1)>, L<virt-cat(1)>,
L<virt-log(1)>, L<virt-tar-out(1)>, L<tail(1)>, L<http://libguestfs.org/>.

=head1 АВТОР

Richard W.M. Jones L<http://people.redhat.com/~rjones/>

=head1 АВТОРСЬКІ ПРАВА

© Red Hat Inc., 2016

