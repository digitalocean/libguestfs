.\" Automatically generated by Podwrapper::Man 1.40.2 (Pod::Simple 3.35)
.\"
.\" Standard preamble:
.\" ========================================================================
.de Sp \" Vertical space (when we can't use .PP)
.if t .sp .5v
.if n .sp
..
.de Vb \" Begin verbatim text
.ft CW
.nf
.ne \\$1
..
.de Ve \" End verbatim text
.ft R
.fi
..
.\" Set up some character translations and predefined strings.  \*(-- will
.\" give an unbreakable dash, \*(PI will give pi, \*(L" will give a left
.\" double quote, and \*(R" will give a right double quote.  \*(C+ will
.\" give a nicer C++.  Capital omega is used to do unbreakable dashes and
.\" therefore won't be available.  \*(C` and \*(C' expand to `' in nroff,
.\" nothing in troff, for use with C<>.
.tr \(*W-
.ds C+ C\v'-.1v'\h'-1p'\s-2+\h'-1p'+\s0\v'.1v'\h'-1p'
.ie n \{\
.    ds -- \(*W-
.    ds PI pi
.    if (\n(.H=4u)&(1m=24u) .ds -- \(*W\h'-12u'\(*W\h'-12u'-\" diablo 10 pitch
.    if (\n(.H=4u)&(1m=20u) .ds -- \(*W\h'-12u'\(*W\h'-8u'-\"  diablo 12 pitch
.    ds L" ""
.    ds R" ""
.    ds C` ""
.    ds C' ""
'br\}
.el\{\
.    ds -- \|\(em\|
.    ds PI \(*p
.    ds L" ``
.    ds R" ''
.    ds C`
.    ds C'
'br\}
.\"
.\" Escape single quotes in literal strings from groff's Unicode transform.
.ie \n(.g .ds Aq \(aq
.el       .ds Aq '
.\"
.\" If the F register is >0, we'll generate index entries on stderr for
.\" titles (.TH), headers (.SH), subsections (.SS), items (.Ip), and index
.\" entries marked with X<> in POD.  Of course, you'll have to process the
.\" output yourself in some meaningful fashion.
.\"
.\" Avoid warning from groff about undefined register 'F'.
.de IX
..
.nr rF 0
.if \n(.g .if rF .nr rF 1
.if (\n(rF:(\n(.g==0)) \{\
.    if \nF \{\
.        de IX
.        tm Index:\\$1\t\\n%\t"\\$2"
..
.        if !\nF==2 \{\
.            nr % 0
.            nr F 2
.        \}
.    \}
.\}
.rr rF
.\" ========================================================================
.\"
.IX Title "virt-v2v-output-rhv 1"
.TH virt-v2v-output-rhv 1 "2019-02-07" "libguestfs-1.40.2" "Virtualization Support"
.\" For nroff, turn off justification.  Always turn off hyphenation; it makes
.\" way too many mistakes in technical documents.
.if n .ad l
.nh
.SH "НАЗВА"
.IX Header "НАЗВА"
virt\-v2v\-output\-rhv \- Using virt\-v2v to convert guests to oVirt or \s-1RHV\s0
.SH "КОРОТКИЙ ОПИС"
.IX Header "КОРОТКИЙ ОПИС"
.Vb 6
\& virt\-v2v [\-i* options] \-o rhv\-upload [\-oc ENGINE_URL] \-os STORAGE
\&                        [\-op PASSWORD] [\-of raw]
\&                        [\-oo rhv\-cafile=FILE]
\&                        [\-oo rhv\-cluster=CLUSTER]
\&                        [\-oo rhv\-direct]
\&                        [\-oo rhv\-verifypeer]
\&
\& virt\-v2v [\-i* options] \-o rhv \-os [esd:/path|/path]
\&
\& virt\-v2v [\-i* options] \-o vdsm
\&                        [\-oo vdsm\-image\-uuid=UUID]
\&                        [\-oo vdsm\-vol\-uuid=UUID]
\&                        [\-oo vdsm\-vm\-uuid=UUID]
\&                        [\-oo vdsm\-ovf\-output=DIR]
.Ve
.SH "ОПИС"
.IX Header "ОПИС"
This page documents how to use \fBvirt\-v2v\fR\|(1) to convert guests to an oVirt
or \s-1RHV\s0 management instance.  There are three output modes that you can
select, but only \fI\-o rhv-upload\fR should be used normally, the other two are
deprecated:
.IP "\fB\-o rhv-upload\fR \fB\-os\fR \s-1STORAGE\s0" 4
.IX Item "-o rhv-upload -os STORAGE"
Full description: \*(L"\s-1OUTPUT TO RHV\*(R"\s0
.Sp
This is the modern method for uploading to oVirt/RHV via the \s-1REST API.\s0  It
requires oVirt/RHV ≥ 4.2.
.IP "\fB\-o rhv\fR \fB\-os\fR esd:/path" 4
.IX Item "-o rhv -os esd:/path"
.PD 0
.IP "\fB\-o rhv\fR \fB\-os\fR /path" 4
.IX Item "-o rhv -os /path"
.PD
Full description: \*(L"\s-1OUTPUT TO EXPORT STORAGE DOMAIN\*(R"\s0
.Sp
This is the old method for uploading to oVirt/RHV via the Export Storage
Domain (\s-1ESD\s0).  The \s-1ESD\s0 can either be accessed over \s-1NFS\s0 (using the \fI\-os
esd:/path\fR form) or if you have already NFS-mounted it somewhere specify the
path to the mountpoint as \fI\-os /path\fR.
.Sp
The Export Storage Domain was deprecated in oVirt 4, and so we expect that
this method will stop working at some point in the future.
.IP "\fB\-o vdsm\fR" 4
.IX Item "-o vdsm"
This is the old method used internally by the RHV-M user interface.  It is
never intended to be used directly by end users.
.SH "ВИВЕДЕННЯ ДО RHV"
.IX Header "ВИВЕДЕННЯ ДО RHV"
This new method to upload guests to oVirt or \s-1RHV\s0 directly via the \s-1REST API\s0
requires oVirt/RHV ≥ 4.2.
.PP
You need to specify \fI\-o rhv-upload\fR as well as the following extra
parameters:
.ie n .IP "\fI\-oc\fR ""https://ovirt\-engine.example.com/ovirt\-engine/api""" 4
.el .IP "\fI\-oc\fR \f(CWhttps://ovirt\-engine.example.com/ovirt\-engine/api\fR" 4
.IX Item "-oc https://ovirt-engine.example.com/ovirt-engine/api"
The \s-1URL\s0 of the \s-1REST API\s0 which is usually the server name with
\&\f(CW\*(C`/ovirt\-engine/api\*(C'\fR appended, but might be different if you installed oVirt
Engine on a different path.
.Sp
You can optionally add a username and port number to the \s-1URL.\s0  If the
username is not specified then virt\-v2v defaults to using \f(CW\*(C`admin@internal\*(C'\fR
which is the typical superuser account for oVirt instances.
.IP "\fI\-of raw\fR" 4
.IX Item "-of raw"
Currently you must use \fI\-of raw\fR and you cannot use \fI\-oa preallocated\fR.
.Sp
These restrictions will be loosened in a future version.
.IP "\fI\-op\fR \fIpassword-file\fR" 4
.IX Item "-op password-file"
A file containing a password to be used when connecting to the oVirt
engine.  Note the file should contain the whole password, \fBwithout any
trailing newline\fR, and for security the file should have mode \f(CW0600\fR so
that others cannot read it.
.ie n .IP "\fI\-os\fR ""ovirt\-data""" 4
.el .IP "\fI\-os\fR \f(CWovirt\-data\fR" 4
.IX Item "-os ovirt-data"
The storage domain.
.IP "\fI\-oo rhv\-cafile=\fR\fIca.pem\fR" 4
.IX Item "-oo rhv-cafile=ca.pem"
The \fIca.pem\fR file (Certificate Authority), copied from
\&\fI/etc/pki/ovirt\-engine/ca.pem\fR on the oVirt engine.
.ie n .IP "\fI\-oo rhv\-cluster=\fR""CLUSTERNAME""" 4
.el .IP "\fI\-oo rhv\-cluster=\fR\f(CWCLUSTERNAME\fR" 4
.IX Item "-oo rhv-cluster=CLUSTERNAME"
Set the \s-1RHV\s0 Cluster Name.  If not given it uses \f(CW\*(C`Default\*(C'\fR.
.IP "\fI\-oo rhv-direct\fR" 4
.IX Item "-oo rhv-direct"
If this option is given then virt\-v2v will attempt to directly upload the
disk to the oVirt node, otherwise it will proxy the upload through the oVirt
engine.  Direct upload requires that you have network access to the oVirt
nodes.  Non-direct upload is slightly slower but should work in all
situations.
.IP "\fI\-oo rhv-verifypeer\fR" 4
.IX Item "-oo rhv-verifypeer"
Verify the oVirt/RHV server’s identity by checking the server‘s certificate
against the Certificate Authority.
.SH "OUTPUT TO EXPORT STORAGE DOMAIN"
.IX Header "OUTPUT TO EXPORT STORAGE DOMAIN"
Вміст цього розділу стосується лише режиму виведення \fI\-o rhv\fR. Якщо ви
використовуєте virt\-v2v з інтерфейсу користувача RHV-M, за сценою
імпортування керується \s-1VDSM\s0 з використанням режиму виведення \fI\-o vdsm\fR
(режиму, яким кінцеві користувачі не повинні користуватися безпосередньо).
.PP
Вам слід вказати \fI\-o rhv\fR і параметр \fI\-os\fR, який вказує на домен сховища
експортування RHV-M. Ви можете або вказати сервер \s-1NFS\s0 і точку монтування,
наприклад \f(CW\*(C`\-os rhv\-storage:/rhv/export\*(C'\fR, або можете спочатку змонтувати
домен і вказати каталог, до якого його змонтовано, наприклад \f(CW\*(C`\-os /tmp/mnt\*(C'\fR. Будьте обережні: не слід вказувати домен сховища даних (Data
Storage Domain), оскільки це не спрацює.
.PP
Якщо усі дії вдасться виконати успішно, virt\-v2v запише нову гостьову
систему до домену сховища експортування, але ця система ще не буде готова до
запуску. Перш ніж нею можна буде скористатися, її слід імпортувати до \s-1RHV\s0 за
допомогою інтерфейсу користувача.
.PP
У \s-1RHV\s0 ≥ 2.2 зробити це можна за допомогою вкладки «Storage»
(«Сховище»). Виберіть домен експортування, до якого було записано гостьову
систему. У відповідь під списком доменів збереження буде показано панель із
декількома вкладками, одна з яких називатиметься «VM Import». У списку буде
пункт перетвореної гостьової системи. Позначте його і натисніть кнопку
«Import». Докладніший опис можна знайти у документації з \s-1RHV.\s0
.PP
Якщо ви експортуєте декілька гостьових систем, потім ви зможете усі їх
імпортувати одночасно за допомогою інтерфейсу користувача.
.SS "Testing \s-1RHV\s0 conversions"
.IX Subsection "Testing RHV conversions"
Якщо у вас немає екземпляра oVirt або \s-1RHV\s0 для тестування, ви можете виконати
тестування перетворення, створивши структуру каталогів, яка подібна до
структури каталогів домену сховища експортування RHV-M, щоб «надурити»
virt\-v2v:
.PP
.Vb 8
\& uuid=\`uuidgen\`
\& mkdir /tmp/rhv
\& mkdir /tmp/rhv/$uuid
\& mkdir /tmp/rhv/$uuid/images
\& mkdir /tmp/rhv/$uuid/master
\& mkdir /tmp/rhv/$uuid/master/vms
\& touch /tmp/rhv/$uuid/dom_md
\& virt\-v2v [...] \-o rhv \-os /tmp/rhv
.Ve
.SS "Debugging RHV-M import failures"
.IX Subsection "Debugging RHV-M import failures"
Коли ви експортуєте дані до домену сховища експортування RHV-M, а потім
імпортуєте гостьову систему за допомогою інтерфейсу користувача RHV-M, ви
можете зіткнутися із помилками при імпортуванні. Діагностування причини цих
помилок — справа дуже складна, оскільки, зазвичай, інтерфейс користувача
приховує справжню причину помилки.
.PP
Цікавими з цієї точки зору є такі файли журналів:
.IP "\fI/var/log/vdsm/import/\fR" 4
.IX Item "/var/log/vdsm/import/"
У oVirt ≥ 4.1.0 \s-1VDSM\s0 зберігає файл журналу virt\-v2v у цьому каталозі
протягом 30 днів.
.Sp
Цей каталог розташовано на вузлі, де виконується перетворення. Цей вузол
можна вибрати за допомогою діалогового вікна імпортування або може бути
знайдено за допомогою вкладки \f(CW\*(C`Events\*(C'\fR в адміністративному інтерфейсі
oVirt.
.IP "\fI/var/log/vdsm/vdsm.log\fR" 4
.IX Item "/var/log/vdsm/vdsm.log"
Як і вище, цей файл зберігається на вузлі, де виконується перетворення. У
ньому містяться докладні повідомлення про помилки, пов'язані із
низькорівневими операціями, які виконує \s-1VDSM.\s0 Він корисний, якщо помилку
було пов'язано не з virt\-v2v, а з \s-1VDSM.\s0
.IP "\fI/var/log/ovirt\-engine/engine.log\fR" 4
.IX Item "/var/log/ovirt-engine/engine.log"
Цей файл журналу зберігається на сервері RHV-M. У цьому містяться докладніші
дані щодо усіх помилок, які було пов'язано із графічним інтерфейсом
користувача oVirt.
.SH "ТАКОЖ ПЕРЕГЛЯНЬТЕ"
.IX Header "ТАКОЖ ПЕРЕГЛЯНЬТЕ"
\&\fBvirt\-v2v\fR\|(1).
.SH "АВТОР"
.IX Header "АВТОР"
Richard W.M. Jones
.SH "АВТОРСЬКІ ПРАВА"
.IX Header "АВТОРСЬКІ ПРАВА"
Copyright (C) 2009\-2019 Red Hat Inc.
.SH "LICENSE"
.IX Header "LICENSE"
.SH "BUGS"
.IX Header "BUGS"
To get a list of bugs against libguestfs, use this link:
https://bugzilla.redhat.com/buglist.cgi?component=libguestfs&product=Virtualization+Tools
.PP
To report a new bug against libguestfs, use this link:
https://bugzilla.redhat.com/enter_bug.cgi?component=libguestfs&product=Virtualization+Tools
.PP
When reporting a bug, please supply:
.IP "\(bu" 4
The version of libguestfs.
.IP "\(bu" 4
Where you got libguestfs (eg. which Linux distro, compiled from source, etc)
.IP "\(bu" 4
Describe the bug accurately and give a way to reproduce it.
.IP "\(bu" 4
Run \fBlibguestfs\-test\-tool\fR\|(1) and paste the \fBcomplete, unedited\fR
output into the bug report.
