.\" Automatically generated by Podwrapper::Man 1.23.30 (Pod::Simple 3.28)
.\"
.\" Standard preamble:
.\" ========================================================================
.de Sp \" Vertical space (when we can't use .PP)
.if t .sp .5v
.if n .sp
..
.de Vb \" Begin verbatim text
.ft CW
.nf
.ne \\$1
..
.de Ve \" End verbatim text
.ft R
.fi
..
.\" Set up some character translations and predefined strings.  \*(-- will
.\" give an unbreakable dash, \*(PI will give pi, \*(L" will give a left
.\" double quote, and \*(R" will give a right double quote.  \*(C+ will
.\" give a nicer C++.  Capital omega is used to do unbreakable dashes and
.\" therefore won't be available.  \*(C` and \*(C' expand to `' in nroff,
.\" nothing in troff, for use with C<>.
.tr \(*W-
.ds C+ C\v'-.1v'\h'-1p'\s-2+\h'-1p'+\s0\v'.1v'\h'-1p'
.ie n \{\
.    ds -- \(*W-
.    ds PI pi
.    if (\n(.H=4u)&(1m=24u) .ds -- \(*W\h'-12u'\(*W\h'-12u'-\" diablo 10 pitch
.    if (\n(.H=4u)&(1m=20u) .ds -- \(*W\h'-12u'\(*W\h'-8u'-\"  diablo 12 pitch
.    ds L" ""
.    ds R" ""
.    ds C` ""
.    ds C' ""
'br\}
.el\{\
.    ds -- \|\(em\|
.    ds PI \(*p
.    ds L" ``
.    ds R" ''
.    ds C`
.    ds C'
'br\}
.\"
.\" Escape single quotes in literal strings from groff's Unicode transform.
.ie \n(.g .ds Aq \(aq
.el       .ds Aq '
.\"
.\" If the F register is turned on, we'll generate index entries on stderr for
.\" titles (.TH), headers (.SH), subsections (.SS), items (.Ip), and index
.\" entries marked with X<> in POD.  Of course, you'll have to process the
.\" output yourself in some meaningful fashion.
.\"
.\" Avoid warning from groff about undefined register 'F'.
.de IX
..
.nr rF 0
.if \n(.g .if rF .nr rF 1
.if (\n(rF:(\n(.g==0)) \{
.    if \nF \{
.        de IX
.        tm Index:\\$1\t\\n%\t"\\$2"
..
.        if !\nF==2 \{
.            nr % 0
.            nr F 2
.        \}
.    \}
.\}
.rr rF
.\" ========================================================================
.\"
.IX Title "virt-builder 1"
.TH virt-builder 1 "2013-10-11" "libguestfs-1.23.30" "Virtualization Support"
.\" For nroff, turn off justification.  Always turn off hyphenation; it makes
.\" way too many mistakes in technical documents.
.if n .ad l
.nh
.SH "НАЗВА"
.IX Header "НАЗВА"
virt-builder \- Build virtual machine images quickly
.SH "КОРОТКИЙ ОПИС"
.IX Header "КОРОТКИЙ ОПИС"
.Vb 10
\& virt\-builder [\-o|\-\-output DISKIMAGE] [\-\-size SIZE] [\-\-format raw|qcow2]
\&    [\-\-attach ISOFILE]
\&    [\-\-root\-password ...]
\&    [\-\-hostname HOSTNAME]
\&    [\-\-install PKG,[PKG...]]
\&    [\-\-upload FILE:DEST]
\&    [\-\-run SCRIPT] [\-\-run\-command \*(AqCMD ARGS ...\*(Aq]
\&    [\-\-firstboot SCRIPT] [\-\-firstboot\-command \*(AqCMD ARGS ...\*(Aq]
\&    [\-\-firstboot\-install PKG,[PKG...]]
\&    os\-version
\&
\& virt\-builder \-l|\-\-list [\-\-long]
\&
\& virt\-builder \-\-delete\-cache
\&
\& virt\-builder \-\-get\-kernel DISKIMAGE
\&    [\-\-format raw|qcow2] [\-\-output OUTPUTDIR]
.Ve
.SH "ОПИС"
.IX Header "ОПИС"
Virt-builder is a tool for quickly building new virtual machines.  You can
build a variety of VMs for local or cloud use, usually within a few minutes
or less.  Virt-builder also has many ways to customize these VMs.
Everything is run from the command line and nothing requires root
privileges, so automation and scripting is simple.
.PP
Note that virt-builder does not install guests from scratch.  It takes
cleanly prepared, digitally signed OSes and customizes them.  This approach
is used because it is much faster, but if you need to do fresh installs you
may want to look at \fIvirt\-install\fR\|(1) and \fIoz\-install\fR\|(1).
.PP
The easiest way to get started is by looking at the examples in the next
section.
.SH "ПРИКЛАДИ"
.IX Header "ПРИКЛАДИ"
.SS "List the virtual machines available"
.IX Subsection "List the virtual machines available"
.Vb 1
\& virt\-builder \-\-list
.Ve
.PP
will list out the operating systems available to install.  A selection of
freely redistributable OSes is available as standard.  You can add your own
too (see below).
.SS "Build a virtual machine"
.IX Subsection "Build a virtual machine"
.Vb 1
\& virt\-builder fedora\-20
.Ve
.PP
will build a Fedora 20 image.  This will have all default configuration
(minimal size, no user accounts, random root password, only the bare minimum
installed software, etc.).
.PP
Note you \fIdo not need to run this command as root\fR.
.PP
The first time this runs it has to download the template over the network,
but this gets cached (see \*(L"\s-1CACHING\*(R"\s0).
.PP
The name of the output file is derived from the template name, so above it
will be \f(CW\*(C`fedora\-20.img\*(C'\fR.  You can change the output filename using the
\&\fI\-o\fR option:
.PP
.Vb 1
\& virt\-builder fedora\-20 \-o mydisk.img
.Ve
.PP
You can also use the \fI\-o\fR option to write to existing devices or logical
volumes.
.PP
.Vb 1
\& virt\-builder fedora\-20 \-\-format qcow2
.Ve
.PP
As above, but write the output in qcow2 format to \f(CW\*(C`fedora\-20.qcow2\*(C'\fR.
.PP
.Vb 1
\& virt\-builder fedora\-20 \-\-size 20G
.Ve
.PP
As above, but the output size will be 20 \s-1GB. \s0 The guest \s-1OS\s0 is resized as it
is copied to the output (automatically, using \fIvirt\-resize\fR\|(1)).
.SS "Setting the root password"
.IX Subsection "Setting the root password"
.Vb 1
\& virt\-builder fedora\-20 \-\-root\-password file:/tmp/rootpw
.Ve
.PP
Create a Fedora 20 image.  The root password is taken from the file
\&\f(CW\*(C`/tmp/rootpw\*(C'\fR.
.PP
Note if you \fIdon't\fR set \fI\-\-root\-password\fR then the guest is given a
\&\fIrandom\fR root password.
.PP
You can also create user accounts.  See \*(L"\s-1USERS AND PASSWORDS\*(R"\s0 below.
.SS "Set the hostname"
.IX Subsection "Set the hostname"
.Vb 1
\& virt\-builder fedora\-20 \-\-hostname virt.example.com
.Ve
.PP
Set the hostname to \f(CW\*(C`virt.example.com\*(C'\fR.
.SS "Installing software"
.IX Subsection "Installing software"
To install packages from the ordinary (guest) software repository (eg. yum
or apt):
.PP
.Vb 1
\& virt\-builder fedora\-20 \-\-install "inkscape,+Xfce Desktop"
.Ve
.PP
\&\f(CW\*(C`+\*(C'\fR is used to install groups of packages (see \fIyum\fR\|(8)).
.SS "Customizing the installation"
.IX Subsection "Customizing the installation"
There are four options that let you run shell scripts to customize the
installation.  They are: \fI\-\-run\fR/\fI\-\-run\-command\fR, which run a shell script
or command while the disk image is being generated and lets you add or edit
files that go into the disk image.  And
\&\fI\-\-firstboot\fR/\fI\-\-firstboot\-command\fR, which let you add scripts/commands
that are run the first time the guest boots.
.PP
Приклад:
.PP
.Vb 3
\& cat <<\*(AqEOF\*(Aq > /tmp/yum\-update.sh
\& yum \-y update
\& EOF
\& 
\& virt\-builder fedora\-20 \-\-firstboot /tmp/yum\-update.sh
.Ve
.PP
or simply:
.PP
.Vb 1
\& virt\-builder fedora\-20 \-\-firstboot\-command \*(Aqyum \-y update\*(Aq
.Ve
.PP
which makes the \f(CW\*(C`yum update\*(C'\fR command run once the first time the guest
boots.
.PP
Or:
.PP
.Vb 3
\& cat <<\*(AqEOF\*(Aq > /tmp/no\-gpg\-sigs.sh
\& sed \-i \*(Aqs/gpgcheck=1/gpgcheck=0/\*(Aq /etc/yum.conf
\& EOF
\& 
\& virt\-builder fedora\-20 \-\-run /tmp/no\-gpg\-sigs.sh
.Ve
.PP
which edits \f(CW\*(C`/etc/yum.conf\*(C'\fR inside the disk image (during disk image
creation, long before boot).
.PP
You can combine these options, and have multiple of either or both sets of
scripts.
.SH "ПАРАМЕТРИ"
.IX Header "ПАРАМЕТРИ"
.IP "\fB\-\-help\fR" 4
.IX Item "--help"
Показати довідкове повідомлення.
.IP "\fB\-\-attach\fR \s-1ISOFILE\s0" 4
.IX Item "--attach ISOFILE"
During the customization phase, the given disk is attached to the libguestfs
appliance.  This is used to provide extra software repositories or other
data for customization.
.Sp
You probably want to ensure the volume(s) or filesystems in the attached
disks are labelled (or an \s-1ISO\s0 volume name) so that you can mount them by
label in your run-scripts:
.Sp
.Vb 2
\& mkdir /tmp/mount
\& mount LABEL=EXTRA /tmp/mount
.Ve
.Sp
You can have multiple \fI\-\-attach\fR options, and the format can be any disk
format (not just an \s-1ISO\s0).
.Sp
See also: \fI\-\-run\fR, \*(L"Installing packages at build time from a side
repository\*(R", \fIvirt\-make\-fs\fR\|(1).
.IP "\fB\-\-attach\-format\fR \s-1FORMAT\s0" 4
.IX Item "--attach-format FORMAT"
Specify the disk format for the next \fI\-\-attach\fR option.  The \f(CW\*(C`FORMAT\*(C'\fR is
usually \f(CW\*(C`raw\*(C'\fR or \f(CW\*(C`qcow2\*(C'\fR.  Use \f(CW\*(C`raw\*(C'\fR for ISOs.
.IP "\fB\-\-cache\fR \s-1DIR\s0" 4
.IX Item "--cache DIR"
.PD 0
.IP "\fB\-\-no\-cache\fR" 4
.IX Item "--no-cache"
.PD
\&\fI\-\-cache\fR \s-1DIR\s0 sets the directory to use/check for cached template files.
If not set, defaults to either \f(CW\*(C`$XDG_CACHE_HOME/virt\-builder/\*(C'\fR or
\&\f(CW\*(C`$HOME/.cache/virt\-builder/\*(C'\fR.
.Sp
\&\fI\-\-no\-cache\fR disables template caching.
.IP "\fB\-\-check\-signature\fR" 4
.IX Item "--check-signature"
.PD 0
.IP "\fB\-\-no\-check\-signature\fR" 4
.IX Item "--no-check-signature"
.PD
Check/don't check the digital signature of the \s-1OS\s0 template.  The default is
to check the signature and exit if it is not correct.  Using
\&\fI\-\-no\-check\-signature\fR bypasses this check.
.Sp
See also \fI\-\-fingerprint\fR.
.IP "\fB\-\-curl\fR \s-1CURL\s0" 4
.IX Item "--curl CURL"
Specify an alternate \fIcurl\fR\|(1) binary.  You can also use this to add curl
parameters, for example to disable https certificate checks:
.Sp
.Vb 1
\& virt\-builder \-\-curl "curl \-\-insecure" [...]
.Ve
.IP "\fB\-\-delete\-cache\fR" 4
.IX Item "--delete-cache"
Delete the template cache.  See \*(L"\s-1CACHING\*(R"\s0.
.IP "\fB\-\-fingerprint\fR '\s-1AAAA BBBB ...\s0'" 4
.IX Item "--fingerprint 'AAAA BBBB ...'"
Check that the digital signature is signed by the key with the given
fingerprint.  (The fingerprint is a long string, usually written as 10
groups of 4 hexadecimal digits).
.Sp
If signature checking is enabled and the \fI\-\-fingerprint\fR option is not
given, then this checks the download was signed by F777 4FB1 \s-1AD07 4A7E 8C87 67EA 9173 8F73 E1B7 68A0 \s0(which is Richard W.M. Jones's key).
.Sp
You can also set the \f(CW\*(C`VIRT_BUILDER_FINGERPRINT\*(C'\fR environment variable.
.IP "\fB\-\-firstboot\fR \s-1SCRIPT\s0" 4
.IX Item "--firstboot SCRIPT"
.PD 0
.IP "\fB\-\-firstboot\-command\fR '\s-1CMD ARGS ...\s0'" 4
.IX Item "--firstboot-command 'CMD ARGS ...'"
.PD
Install \f(CW\*(C`SCRIPT\*(C'\fR inside the guest, so that when the guest first boots up,
the script runs (as root, late in the boot process).
.Sp
The script is automatically chmod +x after installation in the guest.
.Sp
The alternative version \fI\-\-firstboot\-command\fR is the same, but it
conveniently wraps the command up in a single line script for you.
.Sp
You can have multiple \fI\-\-firstboot\fR and \fI\-\-firstboot\-command\fR options.
They run in the same order that they appear on the command line.
.Sp
See also \fI\-\-run\fR.
.IP "\fB\-\-firstboot\-install\fR PKG[,PKG,...]" 4
.IX Item "--firstboot-install PKG[,PKG,...]"
Install the named packages (a comma-separated list).  These are installed
when the guest first boots using the guest's package manager (eg. apt, yum,
etc.) and the guest's network connection.
.Sp
For an overview on the different ways to install packages, see \*(L"\s-1INSTALLING
PACKAGES\*(R"\s0.
.IP "\fB\-\-format\fR qcow2" 4
.IX Item "--format qcow2"
.PD 0
.IP "\fB\-\-format\fR raw" 4
.IX Item "--format raw"
.PD
Select the output format.  The default is \fIraw\fR.
.IP "\fB\-\-get\-kernel\fR \s-1IMAGE\s0" 4
.IX Item "--get-kernel IMAGE"
This option extracts the kernel and initramfs from a previously built disk
image called \f(CW\*(C`IMAGE\*(C'\fR (in fact it works for any \s-1VM\s0 disk image, not just ones
built using virt-builder).
.Sp
The kernel and initramfs are written to the current directory, unless you
also specify the \fI\-\-output\fR \f(CW\*(C`outputdir\*(C'\fR \fBdirectory\fR name.
.Sp
The format of the disk image is automatically detected unless you specify it
by using the \fI\-\-format\fR option.
.Sp
In the case where the guest contains multiple kernels, the one with the
highest version number is chosen.  To extract arbitrary kernels from the
disk image, see \fIguestfish\fR\|(1).  To extract the entire \f(CW\*(C`/boot\*(C'\fR directory
of a guest, see \fIvirt\-copy\-out\fR\|(1).
.IP "\fB\-\-gpg\fR \s-1GPG\s0" 4
.IX Item "--gpg GPG"
Specify an alternate \fIgpg\fR\|(1) (\s-1GNU\s0 Privacy Guard) binary.  You can also use
this to add gpg parameters, for example to specify an alternate home
directory:
.Sp
.Vb 1
\& virt\-builder \-\-gpg "gpg \-\-homedir /tmp" [...]
.Ve
.IP "\fB\-\-hostname\fR \s-1HOSTNAME\s0" 4
.IX Item "--hostname HOSTNAME"
Set the hostname of the guest to \f(CW\*(C`HOSTNAME\*(C'\fR.  You can use a dotted
hostname.domainname (\s-1FQDN\s0) if you want.
.IP "\fB\-\-install\fR PKG[,PKG,...]" 4
.IX Item "--install PKG[,PKG,...]"
Install the named packages (a comma-separated list).  These are installed
during the image build using the guest's package manager (eg. apt, yum,
etc.) and the host's network connection.
.Sp
For an overview on the different ways to install packages, see \*(L"\s-1INSTALLING
PACKAGES\*(R"\s0.
.IP "\fB\-l\fR" 4
.IX Item "-l"
.PD 0
.IP "\fB\-\-list\fR" 4
.IX Item "--list"
.IP "\fB\-\-list \-\-long\fR" 4
.IX Item "--list --long"
.PD
List available templates.
.Sp
The alternative \fI\-\-list \-\-long\fR form shows lots more details about each
operating system option.
.Sp
See also: \fI\-\-source\fR, \*(L"\s-1CREATING YOUR OWN TEMPLATES\*(R"\s0.
.IP "\fB\-\-no\-logfile\fR" 4
.IX Item "--no-logfile"
Wipe \f(CW\*(C`builder.log\*(C'\fR (log file from build commands) from the image after
building is complete.  If you don't want to reveal precisely how the image
was built, use this option.
.Sp
See also: \*(L"\s-1LOG FILE\*(R"\s0.
.IP "\fB\-\-network\fR" 4
.IX Item "--network"
.PD 0
.IP "\fB\-\-no\-network\fR" 4
.IX Item "--no-network"
.PD
Enable or disable network access from the guest during the installation.
.Sp
Enabled is the default.  Use \fI\-\-no\-network\fR to disable access.
.Sp
The network only allows outgoing connections and has other minor
limitations.  See \*(L"\s-1NETWORK\*(R"\s0 in \fIvirt\-rescue\fR\|(1).
.Sp
If you use \fI\-\-no\-network\fR then certain other options such as \fI\-\-install\fR
will not work.
.Sp
This does not affect whether the guest can access the network once it has
been booted, because that is controlled by your hypervisor or cloud
environment and has nothing to do with virt-builder.
.Sp
Generally speaking you should \fInot\fR use \fI\-\-no\-network\fR.  But here are some
reasons why you might want to:
.RS 4
.IP "1." 4
Because the libguestfs backend that you are using doesn't support the
network.  (See: \*(L"\s-1BACKEND\*(R"\s0 in \fIguestfs\fR\|(3)).
.IP "2." 4
Any software you need to install comes from an attached \s-1ISO,\s0 so you don't
need the network.
.IP "3." 4
You don't want untrusted guest code trying to access your host network when
running virt-builder.  This is particularly an issue when you don't trust
the source of the operating system templates.  (See \*(L"\s-1SECURITY\*(R"\s0 below).
.IP "4." 4
You don't have a host network (eg. in secure/restricted environments).
.RE
.RS 4
.RE
.IP "\fB\-o\fR filename" 4
.IX Item "-o filename"
.PD 0
.IP "\fB\-\-output\fR filename" 4
.IX Item "--output filename"
.PD
Write the output to \f(CW\*(C`filename\*(C'\fR.  If you don't specify this option, then the
output filename is generated by taking the \f(CW\*(C`os\-version\*(C'\fR or basename of the
template, removing any extensions, and adding \f(CW\*(C`.img\*(C'\fR (for raw format) or
\&\f(CW\*(C`.qcow2\*(C'\fR (for qcow2 format).
.Sp
Note that the output filename could be a device, partition or logical
volume.
.IP "\fB\-\-password\-crypto\fR password-crypto" 4
.IX Item "--password-crypto password-crypto"
Set the password encryption to \f(CW\*(C`md5\*(C'\fR, \f(CW\*(C`sha256\*(C'\fR or \f(CW\*(C`sha512\*(C'\fR.
.Sp
\&\f(CW\*(C`sha256\*(C'\fR and \f(CW\*(C`sha512\*(C'\fR require glibc ≥ 2.7 (check \fIcrypt\fR\|(3) inside the
guest).
.Sp
\&\f(CW\*(C`md5\*(C'\fR will work with relatively old Linux guests (eg. \s-1RHEL 3\s0), but is not
secure against modern attacks.
.Sp
The default is \f(CW\*(C`sha512\*(C'\fR unless libguestfs detects an old guest that didn't
have support for \s-1SHA\-512,\s0 in which case it will use \f(CW\*(C`md5\*(C'\fR.  You can
override libguestfs by specifying this option.
.IP "\fB\-\-quiet\fR" 4
.IX Item "--quiet"
Don't print ordinary progress messages.
.IP "\fB\-\-root\-password\fR \s-1PASSWORD\s0" 4
.IX Item "--root-password PASSWORD"
Set the root password.
.Sp
See \*(L"\s-1USERS AND PASSWORDS\*(R"\s0 below for the format of the \f(CW\*(C`PASSWORD\*(C'\fR field,
and also how to set up user accounts.
.Sp
Note if you \fIdon't\fR set \fI\-\-root\-password\fR then the guest is given a
\&\fIrandom\fR root password.
.IP "\fB\-\-run\fR \s-1SCRIPT\s0" 4
.IX Item "--run SCRIPT"
.PD 0
.IP "\fB\-\-run\-command\fR '\s-1CMD ARGS ...\s0'" 4
.IX Item "--run-command 'CMD ARGS ...'"
.PD
Run the shell script (or any program) called \f(CW\*(C`SCRIPT\*(C'\fR on the disk image.
The script runs virtualized inside a small appliance, chrooted into the
guest filesystem.
.Sp
The script is automatically chmod +x.
.Sp
If libguestfs supports it then a limited network connection is available but
it only allows outgoing network connections.  You can also attach data disks
(eg. \s-1ISO\s0 files) as another way to provide data (eg. software packages) to
the script without needing a network connection.
.Sp
The alternative version \fI\-\-run\-command\fR is the same, but it conveniently
wraps the command up in a single line script for you.
.Sp
You can have multiple \fI\-\-run\fR and \fI\-\-run\-command\fR options.  They run in
the same order that they appear on the command line.
.Sp
See also \fI\-\-firstboot\fR, \fI\-\-attach\fR.
.IP "\fB\-\-size\fR \s-1SIZE\s0" 4
.IX Item "--size SIZE"
Select the size, where the size can be specified using common names such as
\&\f(CW\*(C`32G\*(C'\fR (32 gigabytes) etc.
.Sp
If the size is not specified, then one of two things happens.  If the output
is a file, then the size is the same as the template (this is most likely
\&\fInot\fR what you want).  If the output is a device, partition, etc then the
size of that device is used.
.IP "\fB\-\-source\fR \s-1URL\s0" 4
.IX Item "--source URL"
Set the source \s-1URL\s0 to look for templates.  If not specified it defaults to
http://libguestfs.org/download/builder/index.asc
.Sp
See also \*(L"\s-1CREATING YOUR OWN TEMPLATES\*(R"\s0 below.
.Sp
You can also set the \f(CW\*(C`VIRT_BUILDER_SOURCE\*(C'\fR environment variable.
.Sp
Note that you should not point \fI\-\-source\fR to sources that you don't trust
(unless the source is signed by someone you do trust).  See also the
\&\fI\-\-no\-network\fR option.
.IP "\fB\-\-upload\fR \s-1FILE:DEST\s0" 4
.IX Item "--upload FILE:DEST"
Upload local file \f(CW\*(C`FILE\*(C'\fR to destination \f(CW\*(C`DEST\*(C'\fR in the disk image.  File
owner and permissions from the original are preserved, so you should set
them to what you want them to be in the disk image.
.IP "\fB\-v\fR" 4
.IX Item "-v"
.PD 0
.IP "\fB\-\-verbose\fR" 4
.IX Item "--verbose"
.PD
Enable debug messages and/or produce verbose output.
.Sp
When reporting bugs, use this option and attach the complete output to your
bug report.
.IP "\fB\-V\fR" 4
.IX Item "-V"
.PD 0
.IP "\fB\-\-version\fR" 4
.IX Item "--version"
.PD
Показати дані щодо версії і завершити роботу.
.SH "REFERENCE"
.IX Header "REFERENCE"
.SS "\s-1INSTALLING PACKAGES\s0"
.IX Subsection "INSTALLING PACKAGES"
There are several approaches to installing packages or applications in the
guest which have different trade-offs.
.PP
\fIInstalling packages at build time\fR
.IX Subsection "Installing packages at build time"
.PP
If the guest \s-1OS\s0 you are installing is similar to the host \s-1OS \s0(eg.  both are
Linux), and if libguestfs supports network connections, then you can use
\&\fI\-\-install\fR to install packages like this:
.PP
.Vb 1
\& virt\-builder fedora\-20 \-\-install inkscape
.Ve
.PP
This uses the guest's package manager but the host's network connection.
.PP
\fIInstalling packages at first boot\fR
.IX Subsection "Installing packages at first boot"
.PP
Another option is to install the packages when the guest first boots:
.PP
.Vb 1
\& virt\-builder fedora\-20 \-\-firstboot\-install inkscape
.Ve
.PP
This uses the guest's package manager and the guest's network connection.
.PP
The downsides are that it will take the guest a lot longer to boot first
time, and there's nothing much you can do if package installation fails
(eg. because a network problem means the guest can't reach the package
repositories).
.PP
\fIInstalling packages at build time from a side repository\fR
.IX Subsection "Installing packages at build time from a side repository"
.PP
If the software you want to install is not available in the main package
repository of the guest, then you can add a side repository.  Usually this
is presented as an \s-1ISO \s0(\s-1CD\s0 disk image) file containing extra packages.
.PP
Create a script that mounts the \s-1ISO\s0 and sets up the repository.  For yum,
create /tmp/install.sh containing:
.PP
.Vb 1
\& mkdir /tmp/mount
\& 
\& # Assume the volume label of the CD is \*(AqEXTRA\*(Aq:
\& mount LABEL=EXTRA /tmp/mount
\& 
\& cat <<\*(AqEOF\*(Aq > /etc/yum.repos.d/extra.repo
\& [extra]
\& name=extra
\& baseurl=file:///tmp/mount
\& enabled=1
\& EOF
\& 
\& yum \-y install famousdatabase
.Ve
.PP
For apt, create /tmp/install.sh containing:
.PP
.Vb 1
\& mkdir /tmp/mount
\& 
\& # Assume the volume label of the CD is \*(AqEXTRA\*(Aq:
\& mount LABEL=EXTRA /tmp/mount
\& 
\& apt\-cdrom \-d=/tmp/mount add
\& apt\-get \-y install famousdatabase
.Ve
.PP
Use the \fI\-\-attach\fR option to attach the \s-1CD:\s0
.PP
.Vb 1
\& virt\-builder fedora 20 \-\-attach extra.iso \-\-run /tmp/install.sh
.Ve
.SS "\s-1USERS AND PASSWORDS\s0"
.IX Subsection "USERS AND PASSWORDS"
The \fI\-\-root\-password\fR option is used to change the root password (otherwise
a random password is used).  This option has the following formats:
.IP "\fB\-\-root\-password\fR file:FILENAME" 4
.IX Item "--root-password file:FILENAME"
Read the root password from \f(CW\*(C`FILENAME\*(C'\fR.  The whole first line of this file
is the replacement password.  Any other lines are ignored.  You should
create the file with mode 0600 to ensure no one else can read it.
.IP "\fB\-\-root\-password\fR password:PASSWORD" 4
.IX Item "--root-password password:PASSWORD"
Set the root password to the literal string \f(CW\*(C`PASSWORD\*(C'\fR.
.Sp
\&\fBNote: this is not secure\fR since any user on the same machine can see the
cleartext password using \fIps\fR\|(1).
.PP
\fICreating user accounts\fR
.IX Subsection "Creating user accounts"
.PP
To create user accounts, use the \fIuseradd\fR\|(8) command with
\&\-\-firstboot\-command like this:
.PP
.Vb 2
\& virt\-sysprep \-\-firstboot\-command \e
\&    \*(Aquseradd \-m \-p "" rjones ; chage \-d 0 rjones\*(Aq
.Ve
.PP
The above command will create an \f(CW\*(C`rjones\*(C'\fR account with no password, and
force the user to set a password when they first log in.  There are other
ways to manage passwords, see \fIuseradd\fR\|(8) for details.
.SS "\s-1LOG FILE\s0"
.IX Subsection "LOG FILE"
Scripts and package installation that runs at build time (\fI\-\-run\fR,
\&\fI\-\-run\-command\fR, \fI\-\-install\fR, but \fInot\fR firstboot) is logged in one of
the following locations:
.ie n .IP """/tmp/builder.log""" 4
.el .IP "\f(CW/tmp/builder.log\fR" 4
.IX Item "/tmp/builder.log"
On Linux, \s-1BSD\s0 and other guests.
.ie n .IP """C:\eTemp\ebuilder.log""" 4
.el .IP "\f(CWC:\eTemp\ebuilder.log\fR" 4
.IX Item "C:Tempbuilder.log"
On Windows, \s-1DOS\s0 guests.
.ie n .IP """/builder.log""" 4
.el .IP "\f(CW/builder.log\fR" 4
.IX Item "/builder.log"
If \f(CW\*(C`/tmp\*(C'\fR or \f(CW\*(C`C:\eTemp\*(C'\fR is missing.
.PP
If you don't want the log file to appear in the final image, then use the
\&\fI\-\-no\-logfile\fR command line option.
.SS "\s-1INSTALLATION PROCESS\s0"
.IX Subsection "INSTALLATION PROCESS"
When you invoke virt-builder, installation proceeds as follows:
.IP "\(bu" 4
The template image is downloaded.
.Sp
If the template image is present in the cache, the cached version is used
instead.  (See \*(L"\s-1CACHING\*(R"\s0).
.IP "\(bu" 4
The template signature is checked.
.IP "\(bu" 4
If the template image is xz-compressed: If \fInbdkit\fR\|(1) and
\&\fInbdkit\-xz\-plugin\fR\|(1) are both installed, nbdkit is used to transparently
uncompress the image on the fly.  Else it is uncompressed to a temporary
disk which takes more disk space.
.Sp
[\fBNote:\fR Use of nbdkit is disabled because of a libvirt bug:
https://bugzilla.redhat.com/show_bug.cgi?id=1011063 It will be enabled in
a future release.]
.IP "\(bu" 4
The template image is resized into the destination, using \fIvirt\-resize\fR\|(1).
.IP "\(bu" 4
Extra disks are attached (\fI\-\-attach\fR).
.IP "\(bu" 4
A new random seed is generated for the guest.
.IP "\(bu" 4
The hostname is set (\fI\-\-hostname\fR).
.IP "\(bu" 4
The root password is changed (\fI\-\-root\-password\fR).
.IP "\(bu" 4
Packages are installed (\fI\-\-install\fR).
.IP "\(bu" 4
Files are uploaded (\fI\-\-upload\fR).
.IP "\(bu" 4
Firstboot scripts are installed (\fI\-\-firstboot\fR, \fI\-\-firstboot\-command\fR,
\&\fI\-\-firstboot\-install\fR).
.Sp
Note that although firstboot scripts are installed at this step, they do not
run until the guest is booted first time.  Firstboot scripts will run in the
order they appear on the command line.
.IP "\(bu" 4
Scripts are run (\fI\-\-run\fR, \fI\-\-run\-command\fR).
.Sp
Scripts run in the order they appear on the command line.
.SS "\s-1IMPORTING THE DISK IMAGE\s0"
.IX Subsection "IMPORTING THE DISK IMAGE"
\fIImporting into libvirt\fR
.IX Subsection "Importing into libvirt"
.PP
Import the disk image into libvirt using \fIvirt\-install\fR\|(1) \fI\-\-import\fR
option.
.PP
.Vb 2
\& virt\-install \-\-import \e
\&   \-\-name guest \-\-ram 2048 \-\-disk path=disk.img,format=raw
.Ve
.PP
Нотатки:
.IP "1." 4
You \fImust\fR specify the correct format.  The format is \f(CW\*(C`raw\*(C'\fR unless you
used virt-builder's \fI\-\-format\fR option.
.IP "2." 4
You can run virt-install as root or non-root.  Each works slightly
differently because libvirt manages a different set of virtual machines for
each user.  In particular virt-manager normally shows the root-owned VMs,
whereas Boxes shows the user-owned VMs, and other tools probably work
differently as well.
.SS "\s-1DEBUGGING BUILDS\s0"
.IX Subsection "DEBUGGING BUILDS"
If virt-builder fails with an error, then enable debugging (\fI\-v\fR) and
report a bug (see \*(L"\s-1BUGS\*(R"\s0 below).
.PP
If virt-builder is successful but the image doesn't work, here are some
things to try:
.IP "Use virt-rescue" 4
.IX Item "Use virt-rescue"
Run \fIvirt\-rescue\fR\|(1) on the disk image:
.Sp
.Vb 1
\& virt\-rescue \-a disk.img
.Ve
.Sp
This gives you a rescue shell.  You can mount the filesystems from the disk
image on \f(CW\*(C`/sysroot\*(C'\fR and examine them using ordinary Linux commands.  You
can also chroot into the guest to reinstall the bootloader.  The virt-rescue
man page has a lot more information and examples.
.IP "Use guestfish" 4
.IX Item "Use guestfish"
Run \fIguestfish\fR\|(1) on the disk image:
.Sp
.Vb 1
\& guestfish \-a disk.img \-i
.Ve
.Sp
Use guestfish commands like \f(CW\*(C`ll /directory\*(C'\fR and \f(CW\*(C`cat /file\*(C'\fR to examine
directories and files.
.IP "Use guestmount" 4
.IX Item "Use guestmount"
Mount the disk image safely on the host using \s-1FUSE\s0 and \fIguestmount\fR\|(1):
.Sp
.Vb 3
\& mkdir /tmp/mp
\& guestmount \-a disk.img \-i /tmp/mp
\& cd /tmp/mp
.Ve
.Sp
To unmount the disk image do:
.Sp
.Vb 1
\& fusermount \-u /tmp/mp
.Ve
.IP "Add a serial console" 4
.IX Item "Add a serial console"
If the guest hangs during boot, it can be helpful to add a serial console to
the guest, and direct kernel messages to the serial console.  Adding the
serial console will involve looking at the documentation for your
hypervisor.  To direct kernel messages to the serial console, add the
following on the kernel command line:
.Sp
.Vb 1
\& console=tty0 console=ttyS0,115200
.Ve
.SS "\s-1CREATING YOUR OWN TEMPLATES\s0"
.IX Subsection "CREATING YOUR OWN TEMPLATES"
For serious virt-builder use, you may want to create your own repository of
templates.
.PP
Out of the box, virt-builder downloads the file
http://libguestfs.org/download/builder/index.asc which is an index of
available templates plus some information about each one, wrapped up in a
digital signature.  The command \f(CW\*(C`virt\-builder \-\-list\*(C'\fR lists out the
information in this index file.
.PP
You can set up your own site containing an index file and some templates,
and then point virt-builder at the site by using the \fI\-\-source\fR option:
.PP
.Vb 3
\& virt\-builder \-\-source https://example.com/builder/index.asc \e
\&    \-\-fingerprint \*(AqAAAA BBBB ...\*(Aq \e
\&    \-\-list
.Ve
.PP
(Note setting the environment variables \f(CW\*(C`VIRT_BUILDER_SOURCE\*(C'\fR and
\&\f(CW\*(C`VIRT_BUILDER_FINGERPRINT\*(C'\fR may be easier to type!)
.PP
\fISetting up a \s-1GPG\s0 key\fR
.IX Subsection "Setting up a GPG key"
.PP
If you don't have a GnuPG key, you will need to set one up.  (Strictly
speaking this is optional, but if your index and template files are not
signed then virt-builder users will have to use the \fI\-\-no\-check\-signature\fR
flag every time they use virt-builder.)
.PP
To create a key, see the \s-1GPG\s0 manual
http://www.gnupg.org/gph/en/manual.html.
.PP
Export your \s-1GPG\s0 public key and add it to the keyring of all virt-builder
users:
.PP
.Vb 1
\& gpg \-\-export \-a "you@example.com" > pubkey
\& 
\& # For each virt\-builder user:
\& gpg \-\-import pubkey
.Ve
.PP
Also find the fingerprint of your key:
.PP
.Vb 1
\& gpg \-\-list\-keys \-\-fingerprint
.Ve
.PP
\fICreate the templates\fR
.IX Subsection "Create the templates"
.PP
There are many ways to create the templates.  For example you could clone
existing guests (see \fIvirt\-sysprep\fR\|(1)), or you could install a guest by
hand (\fIvirt\-install\fR\|(1)).  To see how the templates were created for
virt-builder, look at the scripts in \f(CW\*(C`libguestfs.git/builder/website\*(C'\fR
.PP
For best results when compressing the templates, use the following xz
options (see \fInbdkit\-xz\-plugin\fR\|(1) for further explanation):
.PP
.Vb 1
\& xz \-\-best \-\-block\-size=16777216 disk
.Ve
.PP
\fICreating and signing the index file\fR
.IX Subsection "Creating and signing the index file"
.PP
The index file has a simple text format (shown here without the digital
signature):
.PP
.Vb 9
\& [fedora\-18]
\& name=Fedora® 18
\& osinfo=fedora18
\& file=fedora\-18.xz
\& sig=fedora\-18.xz.sig
\& format=raw
\& size=6442450944
\& compressed_size=148947524
\& expand=/dev/sda3
\& 
\& [fedora\-19]
\& name=Fedora® 19
\& osinfo=fedora19
\& file=fedora\-19.xz
\& sig=fedora\-19.xz.sig
\& revision=3
\& format=raw
\& size=4294967296
\& compressed_size=172190964
\& expand=/dev/sda3
.Ve
.PP
The part in square brackets is the \f(CW\*(C`os\-version\*(C'\fR, which is the same string
that is used on the virt-builder command line to build that \s-1OS.\s0
.PP
After preparing the \f(CW\*(C`index\*(C'\fR file in the correct format, clearsign it using
the following command:
.PP
.Vb 1
\& gpg \-\-clearsign \-\-armor index
.Ve
.PP
This will create the final file called \f(CW\*(C`index.asc\*(C'\fR which can be uploaded to
the server (and is the \fI\-\-source\fR \s-1URL\s0).  As noted above, signing the index
file is optional, but recommended.
.PP
The following fields can appear:
.ie n .IP """name=NAME""" 4
.el .IP "\f(CWname=NAME\fR" 4
.IX Item "name=NAME"
The user-friendly name of this template.  This is displayed in the \fI\-\-list\fR
output but is otherwise not significant.
.ie n .IP """osinfo=ID""" 4
.el .IP "\f(CWosinfo=ID\fR" 4
.IX Item "osinfo=ID"
This optional field maps the operating system to the associated libosinfo
\&\s-1ID. \s0 Virt-builder does not use it (yet).
.ie n .IP """file=PATH""" 4
.el .IP "\f(CWfile=PATH\fR" 4
.IX Item "file=PATH"
The path (relative to the index) of the xz-compressed template.
.Sp
Note that absolute paths or URIs are \fBnot\fR permitted here.  This is because
virt-builder has a \*(L"same origin\*(R" policy for templates so they cannot come
from other servers.
.ie n .IP """sig=PATH""" 4
.el .IP "\f(CWsig=PATH\fR" 4
.IX Item "sig=PATH"
The path (relative to the index) of the \s-1GPG\s0 detached signature of the xz
file.
.Sp
Note that absolute paths or URIs are \fBnot\fR permitted here.  This is because
virt-builder has a \*(L"same origin\*(R" policy for templates so they cannot come
from other servers.
.Sp
The file can be created as follows:
.Sp
.Vb 1
\& gpg \-\-detach\-sign \-\-armor \-o disk.xz.sig disk.xz
.Ve
.Sp
The signature is optional, but if you don't have it then virt-builder users
will need to use the \fI\-\-no\-check\-signature\fR option in order to install from
this template.
.ie n .IP """revision=N""" 4
.el .IP "\f(CWrevision=N\fR" 4
.IX Item "revision=N"
The revision is an integer which is used to control the template cache.
Increasing the revision number causes clients to download the template again
even if they have a copy in the cache.
.Sp
The revision number is optional.  If omitted it defaults to \f(CW1\fR.
.ie n .IP """format=raw""" 4
.el .IP "\f(CWformat=raw\fR" 4
.IX Item "format=raw"
.PD 0
.ie n .IP """format=qcow2""" 4
.el .IP "\f(CWformat=qcow2\fR" 4
.IX Item "format=qcow2"
.PD
Specify the format of the disk image (before it was compressed).  If not
given, the format is autodetected, but generally it is better to be explicit
about the intended format.
.Sp
Note this is the source format, which is different from the \fI\-\-format\fR
option (requested output format).  Virt-builder does on-the-fly conversion
from the source format to the requested output format.
.ie n .IP """size=NNN""" 4
.el .IP "\f(CWsize=NNN\fR" 4
.IX Item "size=NNN"
The virtual size of the image in bytes.  This is the size of the image when
uncompressed.  If using a non-raw format such as qcow2 then it means the
virtual disk size, not the size of the qcow2 file.
.Sp
This field is required.
.Sp
Virt-builder also uses this as the minimum size that users can request via
the \fI\-\-size\fR option, or as the default size if there is no \fI\-\-size\fR
option.
.ie n .IP """compressed_size=NNN""" 4
.el .IP "\f(CWcompressed_size=NNN\fR" 4
.IX Item "compressed_size=NNN"
The compressed size of the disk image in bytes.  This is just used for
information (when using \fI\-\-list \-\-long\fR).
.ie n .IP """expand=/dev/sdaX""" 4
.el .IP "\f(CWexpand=/dev/sdaX\fR" 4
.IX Item "expand=/dev/sdaX"
When expanding the image to its final size, instruct \fIvirt\-resize\fR\|(1) to
expand the named partition in the guest image to fill up all available
space.  This works like the virt-resize \fI\-\-expand\fR option.
.Sp
You should usually put the device name of the guest's root filesystem here.
.Sp
It's a good idea to use this, but not required.  If the field is omitted
then virt-resize will create an extra partition at the end of the disk to
cover the free space, which is much less user-friendly.
.ie n .IP """lvexpand=/dev/VolGroup/LogVol""" 4
.el .IP "\f(CWlvexpand=/dev/VolGroup/LogVol\fR" 4
.IX Item "lvexpand=/dev/VolGroup/LogVol"
When expanding the image to its final size, instruct \fIvirt\-resize\fR\|(1) to
expand the named logical volume in the guest image to fill up all available
space.  This works like the virt-resize \fI\-\-lv\-expand\fR option.
.Sp
If the guest uses \s-1LVM2\s0 you should usually put the \s-1LV\s0 of the guest's root
filesystem here.  If the guest does not use \s-1LVM2\s0 or its root filesystem is
not on an \s-1LV,\s0 don't use this option.
.ie n .IP """notes=NOTES""" 4
.el .IP "\f(CWnotes=NOTES\fR" 4
.IX Item "notes=NOTES"
Any notes that go with this image, especially notes describing what packages
are in the image, how the image was prepared, and licensing information.
.Sp
You can use multi-line notes here by indenting each new line with at least
one character of whitespace (even on blank lines):
.Sp
.Vb 5
\& notes=This image was prepared using
\&  the following kickstart script:
\&                                <\-\- one space at beginning of line
\&  timezone Europe/London
\&  part /boot \-\-fstype ext3
.Ve
.ie n .IP """hidden=true""" 4
.el .IP "\f(CWhidden=true\fR" 4
.IX Item "hidden=true"
Using the hidden flag prevents the template from being listed by the
\&\fI\-\-list\fR option (but it is still installable).  This is used for test
images.
.PP
\fIRunning virt-builder against the alternate repository\fR
.IX Subsection "Running virt-builder against the alternate repository"
.PP
Ensure each virt-builder user has imported your public key into their gpg
keyring (see above).
.PP
Each virt-builder user should export these environment variables:
.IP "\(bu" 4
\&\f(CW\*(C`VIRT_BUILDER_SOURCE\*(C'\fR to point to the \s-1URL\s0 of the \f(CW\*(C`index.asc\*(C'\fR file.
.IP "\(bu" 4
\&\f(CW\*(C`VIRT_BUILDER_FINGERPRINT\*(C'\fR to contain the fingerprint (long hex string) of
the user who signed the index file and the templates.
.PP
Now run virt-builder commands as normal, eg:
.PP
.Vb 1
\& virt\-builder \-\-list \-\-long
\&
\& virt\-builder os\-version
.Ve
.PP
To debug problems, add the \f(CW\*(C`\-v\*(C'\fR option to these commands.
.PP
\fILicensing of templates\fR
.IX Subsection "Licensing of templates"
.PP
You should be aware of the licensing of images that you distribute.  For
open source guests, provide a link to the source code in the \f(CW\*(C`notes\*(C'\fR field
and comply with other requirements (eg. around trademarks).
.SS "\s-1CACHING\s0"
.IX Subsection "CACHING"
Since the templates are usually very large, downloaded templates are cached
in the user's home directory.
.PP
The location of the cache is \f(CW\*(C`$XDG_CACHE_HOME/virt\-builder/\*(C'\fR or
\&\f(CW\*(C`$HOME/.cache/virt\-builder\*(C'\fR.  This directory can be deleted after use if
you want to save space by doing:
.PP
.Vb 1
\& virt\-builder \-\-delete\-cache
.Ve
.PP
To disable the template cache, use \fI\-\-no\-cache\fR.
.PP
Only templates are cached.  The index and detached digital signatures are
not cached.
.PP
Virt-builder uses \fIcurl\fR\|(1) to download files.  Since curl obeys
\&\f(CW\*(C`http_proxy\*(C'\fR (etc) environment variables, files might also be cached by
your proxy if you have one.
.SS "\s-1DIGITAL SIGNATURES\s0"
.IX Subsection "DIGITAL SIGNATURES"
Virt-builder uses \s-1GNU\s0 Privacy Guard (GnuPG or gpg) to verify that the index
and templates have not been tampered with.
.PP
The source points to an index file, which is optionally signed.
.PP
Virt-builder downloads the index and checks that the signature is valid and
the signer's fingerprint matches the specified fingerprint
(ie. \fI\-\-fingerprint\fR, \f(CW\*(C`VIRT_BUILDER_FINGERPRINT\*(C'\fR, or a built-in
fingerprint, in that order).
.PP
For checking against the built-in public key/fingerprint, this requires
importing the public key into the user's local gpg keyring (that's just the
way that gpg works).
.PP
When a template is downloaded, its signature is checked in the same way.
.PP
Although the signatures are optional, if you don't have them then
virt-builder users will have to use \fI\-\-no\-check\-signature\fR on the command
line.  This prevents an attacker from replacing the signed index file with
an unsigned index file and having virt-builder silently work without
checking the signature.  In any case it is highly recommended that you
always create signed index and templates.
.SS "АРХІТЕКТУРА"
.IX Subsection "АРХІТЕКТУРА"
Virt-builder can, in theory, build a guest for any architecture no matter
what the host architecture is.  For example a ppc64 guest on an x86\-64 host.
.PP
However certain options may not work correctly, specifically options that
require running commands in the guest during the build process:
\&\fI\-\-install\fR, \fI\-\-run\fR, \fI\-\-run\-command\fR.  You may need to replace these
with their firstboot-equivalents.
.PP
An x86\-64 host building 32 bit x86 guests should work without any special
steps.
.SS "БЕЗПЕКА"
.IX Subsection "БЕЗПЕКА"
Virt-builder does not need to run as root (in fact, should not be run as
root), and doesn't use setuid, \f(CW\*(C`sudo\*(C'\fR or any similar mechanism.
.PP
\&\fI\-\-install\fR, \fI\-\-run\fR and \fI\-\-run\-command\fR are implemented using an
appliance (a small virtual machine) so these commands do not run on the
host.  If you are using the libguestfs libvirt backend and have SELinux
enabled then the virtual machine is additionally encapsulated in an SELinux
container (sVirt).
.PP
However these options will have access to the host's network and since the
template may contain untrusted code, the code might try to access host
network resources which it should not.  You can use \fI\-\-no\-network\fR to
prevent this.
.PP
Firstboot commands run in the context of the guest when it is booted, and so
the security of your hypervisor / cloud should be considered.
.PP
Virt-builder injects a random seed into every guest which it builds.  This
helps to ensure that \s-1TCP\s0 sequence numbers, UUIDs, ssh host keys etc are
truly random when the guest boots.
.PP
You should check digital signatures and not ignore any signing errors.
.SS "\s-1USER MODE LINUX\s0"
.IX Subsection "USER MODE LINUX"
You can use virt-builder with the User-Mode Linux (\s-1UML\s0) backend.  This may
be faster when running virt-builder inside a virtual machine (eg. in the
cloud).
.PP
To enable the \s-1UML\s0 backend, read the instructions in \*(L"USER-MODE
\&\s-1LINUX BACKEND\*(R"\s0 in \fIguestfs\fR\|(3).
.PP
Currently you have to use the \fI\-\-no\-network\fR option.  This should be fixed
in a future version.
.PP
The qcow2 output format is not supported by \s-1UML. \s0 You can only create
raw-format guests.
.SH "ЗМІННІ СЕРЕДОВИЩА"
.IX Header "ЗМІННІ СЕРЕДОВИЩА"
For other environment variables which affect all libguestfs programs, see
\&\*(L"\s-1ENVIRONMENT VARIABLES\*(R"\s0 in \fIguestfs\fR\|(3).
.ie n .IP """http_proxy""" 4
.el .IP "\f(CWhttp_proxy\fR" 4
.IX Item "http_proxy"
.PD 0
.ie n .IP """https_proxy""" 4
.el .IP "\f(CWhttps_proxy\fR" 4
.IX Item "https_proxy"
.ie n .IP """no_proxy""" 4
.el .IP "\f(CWno_proxy\fR" 4
.IX Item "no_proxy"
.PD
Set the proxy for downloads.  These environment variables (and more)  are
actually interpreted by \fIcurl\fR\|(1), not virt-builder.
.ie n .IP """HOME""" 4
.el .IP "\f(CWHOME\fR" 4
.IX Item "HOME"
Used to determine the location of the template cache.  See \*(L"\s-1CACHING\*(R"\s0.
.ie n .IP """VIRT_BUILDER_FINGERPRINT""" 4
.el .IP "\f(CWVIRT_BUILDER_FINGERPRINT\fR" 4
.IX Item "VIRT_BUILDER_FINGERPRINT"
Set the default value for the \s-1GPG\s0 signature fingerprint (see
\&\fI\-\-fingerprint\fR option).
.ie n .IP """VIRT_BUILDER_SOURCE""" 4
.el .IP "\f(CWVIRT_BUILDER_SOURCE\fR" 4
.IX Item "VIRT_BUILDER_SOURCE"
Set the default value for the source \s-1URL\s0 for the template repository (see
\&\fI\-\-source\fR option).
.ie n .IP """XDG_CACHE_HOME""" 4
.el .IP "\f(CWXDG_CACHE_HOME\fR" 4
.IX Item "XDG_CACHE_HOME"
Used to determine the location of the template cache.  See \*(L"\s-1CACHING\*(R"\s0.
.SH "СТАН ВИХОДУ"
.IX Header "СТАН ВИХОДУ"
Ця програма повертає значення 0 у разі успішного завершення і ненульове
значення, якщо сталася помилка.
.SH "ТАКОЖ ПЕРЕГЛЯНЬТЕ"
.IX Header "ТАКОЖ ПЕРЕГЛЯНЬТЕ"
\&\fIguestfs\fR\|(3), \fIguestfish\fR\|(1), \fIguestmount\fR\|(1), \fIvirt\-copy\-out\fR\|(1),
\&\fIvirt\-install\fR\|(1), \fIvirt\-rescue\fR\|(1), \fIvirt\-resize\fR\|(1),
\&\fIvirt\-sysprep\fR\|(1), \fIoz\-install\fR\|(1), \fInbdkit\fR\|(1), \fInbdkit\-xz\-plugin\fR\|(1),
\&\fIgpg\fR\|(1), \fIcurl\fR\|(1), http://libguestfs.org/.
.SH "АВТОР"
.IX Header "АВТОР"
Richard W.M. Jones http://people.redhat.com/~rjones/
.SH "АВТОРСЬКІ ПРАВА"
.IX Header "АВТОРСЬКІ ПРАВА"
© Red Hat Inc., 2013
.SH "LICENSE"
.IX Header "LICENSE"
.SH "BUGS"
.IX Header "BUGS"
To get a list of bugs against libguestfs, use this link:
https://bugzilla.redhat.com/buglist.cgi?component=libguestfs&product=Virtualization+Tools
.PP
To report a new bug against libguestfs, use this link:
https://bugzilla.redhat.com/enter_bug.cgi?component=libguestfs&product=Virtualization+Tools
.PP
When reporting a bug, please supply:
.IP "\(bu" 4
The version of libguestfs.
.IP "\(bu" 4
Where you got libguestfs (eg. which Linux distro, compiled from source, etc)
.IP "\(bu" 4
Describe the bug accurately and give a way to reproduce it.
.IP "\(bu" 4
Run \fIlibguestfs\-test\-tool\fR\|(1) and paste the \fBcomplete, unedited\fR
output into the bug report.
