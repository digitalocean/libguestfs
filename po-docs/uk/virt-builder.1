.\" Automatically generated by Podwrapper::Man 1.38.4 (Pod::Simple 3.35)
.\"
.\" Standard preamble:
.\" ========================================================================
.de Sp \" Vertical space (when we can't use .PP)
.if t .sp .5v
.if n .sp
..
.de Vb \" Begin verbatim text
.ft CW
.nf
.ne \\$1
..
.de Ve \" End verbatim text
.ft R
.fi
..
.\" Set up some character translations and predefined strings.  \*(-- will
.\" give an unbreakable dash, \*(PI will give pi, \*(L" will give a left
.\" double quote, and \*(R" will give a right double quote.  \*(C+ will
.\" give a nicer C++.  Capital omega is used to do unbreakable dashes and
.\" therefore won't be available.  \*(C` and \*(C' expand to `' in nroff,
.\" nothing in troff, for use with C<>.
.tr \(*W-
.ds C+ C\v'-.1v'\h'-1p'\s-2+\h'-1p'+\s0\v'.1v'\h'-1p'
.ie n \{\
.    ds -- \(*W-
.    ds PI pi
.    if (\n(.H=4u)&(1m=24u) .ds -- \(*W\h'-12u'\(*W\h'-12u'-\" diablo 10 pitch
.    if (\n(.H=4u)&(1m=20u) .ds -- \(*W\h'-12u'\(*W\h'-8u'-\"  diablo 12 pitch
.    ds L" ""
.    ds R" ""
.    ds C` ""
.    ds C' ""
'br\}
.el\{\
.    ds -- \|\(em\|
.    ds PI \(*p
.    ds L" ``
.    ds R" ''
.    ds C`
.    ds C'
'br\}
.\"
.\" Escape single quotes in literal strings from groff's Unicode transform.
.ie \n(.g .ds Aq \(aq
.el       .ds Aq '
.\"
.\" If the F register is >0, we'll generate index entries on stderr for
.\" titles (.TH), headers (.SH), subsections (.SS), items (.Ip), and index
.\" entries marked with X<> in POD.  Of course, you'll have to process the
.\" output yourself in some meaningful fashion.
.\"
.\" Avoid warning from groff about undefined register 'F'.
.de IX
..
.nr rF 0
.if \n(.g .if rF .nr rF 1
.if (\n(rF:(\n(.g==0)) \{\
.    if \nF \{\
.        de IX
.        tm Index:\\$1\t\\n%\t"\\$2"
..
.        if !\nF==2 \{\
.            nr % 0
.            nr F 2
.        \}
.    \}
.\}
.rr rF
.\" ========================================================================
.\"
.IX Title "virt-builder 1"
.TH virt-builder 1 "2018-08-09" "libguestfs-1.38.4" "Virtualization Support"
.\" For nroff, turn off justification.  Always turn off hyphenation; it makes
.\" way too many mistakes in technical documents.
.if n .ad l
.nh
.SH "НАЗВА"
.IX Header "НАЗВА"
virt-builder — засіб швидкої побудови образів для віртуальної машини
.SH "КОРОТКИЙ ОПИС"
.IX Header "КОРОТКИЙ ОПИС"
.Vb 3
\& virt\-builder версія\-ОС
\&    [\-o|\-\-output ОБРАЗ ДИСКА] [\-\-size РОЗМІР] [\-\-format raw|qcow2]
\&    [\-\-arch АРХІТЕКТУРА] [\-\-attach ФАЙЛ ISO]
\&
\&
\&
\& virt\-builder \-l|\-\-list [\-\-long] [\-\-list\-format short|long|json]
\&
\& virt\-builder \-\-notes версія\-ОС
\&
\& virt\-builder \-\-print\-cache
\&
\& virt\-builder \-\-cache\-all\-templates
\&
\& virt\-builder \-\-delete\-cache
\&
\& virt\-builder \-\-get\-kernel ОБРАЗДИСКА
\&    [\-\-format raw|qcow2] [\-\-output КАТАЛОГВИВЕДЕННЯ]
.Ve
.SH "ОПИС"
.IX Header "ОПИС"
Virt-builder — інструмент для швидкого збирання нових віртуальних машин. За
його допомогою ви зможете зібрати цілий спектр віртуальних машин для
локального використання або використання у «хмарі». Зазвичай, для цього
достатньо декількох хвилин.  Крім того, у virt-builder передбачено багато
способів налаштовування зібраних віртуальних машин. Усі команди віддаються
за допомогою командного рядка. Для роботи програми не потрібні права доступу
адміністратора системи, тому збирання нових віртуальних машин просто
автоматизувати або керувати ним за допомогою скриптів.
.PP
Зауважте, що virt-builder не встановлює гостьові системи «з нуля». Програма
використовує ретельного приготовані, підписані цифровими підписами шаблони
операційних систем і налаштовує їх. Такий підхід використано, оскільки він є
набагато швидшим за інші. Втім, якщо потрібно встановити систему «з нуля»,
ви можете скористатися \fBvirt\-install\fR\|(1) та \fBoz\-install\fR\|(1).
.PP
Найпростіше буде розпочати з прикладів з наступного розділу.
.SH "ПРИКЛАДИ"
.IX Header "ПРИКЛАДИ"
.SS "Показ списку доступних віртуальних машин"
.IX Subsection "Показ списку доступних віртуальних машин"
.Vb 1
\& virt\-builder \-\-list
.Ve
.PP
покаже список доступних до встановлення операційних систем. Типово,
доступний набір операційних систем із вільним поширенням. Ви також можете
додати свою операційну систему (див. нижче).
.PP
Після вибору гостьової системи зі списку може виникнути потреба у
ознайомленні із нотатками щодо встановлення:
.PP
.Vb 1
\& virt\-builder \-\-notes fedora\-25
.Ve
.SS "Побудова віртуальної машини"
.IX Subsection "Побудова віртуальної машини"
.Vb 1
\& virt\-builder fedora\-25
.Ve
.PP
збере образ Fedora 25 для тієї самої архітектури, що і virt-builder (отже
виконання команди у системі архітектури i686 призведе до спроби збирання
образу i686, якщо це можливо). Образ матиме типові налаштування (мінімальний
розмір, без облікових записів користувачів, випадковий пароль root, влише
базовий мінімальний набір встановлених програм тощо).
.PP
Потреби у запуску цієї програми від імені root \fIнемає\fR.
.PP
Першого разу доведеться отримати шаблон мережею, а наступні операції може
бути кешовано (див. \*(L"КЕШУВАННЯ\*(R").
.PP
Назву файла результатів буде визначено на основі назви шаблона, отже для
наведеного вище прикладу буде \fIfedora\-25.img\fR.  Змінити назву файла
результатів можна за допомогою параметра \fI\-o\fR:
.PP
.Vb 1
\& virt\-builder fedora\-25 \-o mydisk.img
.Ve
.PP
Ви також можете скористатися параметром \fI\-o\fR для запису на наявні пристрої
або логічні томи.
.PP
.Vb 1
\& virt\-builder fedora\-25 \-\-format qcow2
.Ve
.PP
Те саме, що і вище, але виведені дані буде записано у форматі qcow2 до
\&\fIfedora\-25.qcow2\fR.
.PP
.Vb 1
\& virt\-builder fedora\-25 \-\-size 20G
.Ve
.PP
Як і вище, але обсяг виведених даних дорівнюватиме 20 ГБ. Розмір гостьової
операційної системи буде змінено так, наче її скопійовано до виведених даних
(автоматично, за допомогою \fBvirt\-resize\fR\|(1)).
.PP
.Vb 1
\& virt\-builder fedora\-25 \-\-arch i686
.Ve
.PP
Те саме, що і вище, але з використанням шаблона i686, якщо він доступний.
.SS "Встановлення пароля root"
.IX Subsection "Встановлення пароля root"
.Vb 1
\& virt\-builder fedora\-25 \-\-root\-password file:/tmp/rootpw
.Ve
.PP
Створити образ Fedora 25. Пароль користувача root буде запозичено з файла
\&\fI/tmp/rootpw\fR.
.PP
Зауважте, що якщо ви \fIне встановите\fR \fI\-\-root\-password\fR, гостьовій системі
буде надано \fIвипадковий\fR пароль адміністратора root, який буде виведено до
стандартного виведення.
.PP
Крім того, ви можете створювати облікові записи
користувачів. Див. \*(L"КОРИСТУВАЧІ І ПАРОЛІ\*(R" нижче.
.SS "Встановити назву вузла"
.IX Subsection "Встановити назву вузла"
.Vb 1
\& virt\-builder fedora\-25 \-\-hostname virt.example.com
.Ve
.PP
Встановити назву вузла \f(CW\*(C`virt.example.com\*(C'\fR.
.SS "Встановлення програмного забезпечення"
.IX Subsection "Встановлення програмного забезпечення"
Встановлення пакунків зі звичайного (гостьового) сховища (наприклад, за
допомогою dnf або apt):
.PP
.Vb 1
\& virt\-builder fedora\-25 \-\-install "inkscape,@Xfce Desktop"
.Ve
.PP
(У Fedora \f(CW\*(C`@\*(C'\fR використовується для встановлення груп пакунків. У Debian вам
доведеться встановлювати відповідний метапакунок.)
.PP
Для оновлення встановлених пакунків до останньої версії виконайте такі дії:
.PP
.Vb 1
\& virt\-builder debian\-7 \-\-update
.Ve
.PP
Для гостьових систем, де використовується SELinux, зокрема Fedora і Red Hat
Enterprise Linux, може знадобитися зміна міток SELinux після встановлення
або оновлення пакунків (див. \*(L"\s-1SELINUX\*(R"\s0 нижче):
.PP
.Vb 1
\& virt\-builder fedora\-25 \-\-update \-\-selinux\-relabel
.Ve
.SS "Налаштовування встановленої системи"
.IX Subsection "Налаштовування встановленої системи"
Передбачено багато параметрів, за допомогою яких ви можете налаштувати
встановлення. Це зокрема параметр \fI\-\-run\fR/\fI\-\-run\-command\fR, за допомогою
якого можна виконати скрипт оболонки або команду під час створення образу
диска і додати або змінити файли, які буде включено до образу диска. За
допомогою параметра \fI\-\-firstboot\fR/\fI\-\-firstboot\-command\fR можна додати
скрипти або команди, які буде виконано під час першого завантаження
гостьової системи. За допомогою параметра \fI\-\-edit\fR можна редагувати файли,
а параметра \fI\-\-upload\fR — вивантажувати файли до образу.
.PP
Приклад:
.PP
.Vb 3
\& cat <<\*(AqEOF\*(Aq > /tmp/dnf\-update.sh
\& dnf \-y \-\-best update
\& EOF
\& 
\& virt\-builder fedora\-25 \-\-firstboot /tmp/dnf\-update.sh
.Ve
.PP
або просто:
.PP
.Vb 1
\& virt\-builder fedora\-25 \-\-firstboot\-command \*(Aqdnf \-y \-\-best update\*(Aq
.Ve
.PP
у результаті команду \fBdnf\fR\|(8) \f(CW\*(C`update\*(C'\fR буде один раз виконано під час
першого завантаження гостьової системи.
.PP
або
.PP
.Vb 3
\& virt\-builder fedora\-25 \e
\&   \-\-edit \*(Aq/etc/dnf/dnf.conf:
\&             s/gpgcheck=1/gpgcheck=0/\*(Aq
.Ve
.PP
буде змінено \fI/etc/dnf/dnf.conf\fR у образі диска (під час створення образу
диска, задовго до завантаження).
.PP
Ви можете поєднувати ці параметри і додавати декілька параметрів усіх типів.
.SH "ПАРАМЕТРИ"
.IX Header "ПАРАМЕТРИ"
.IP "\fB\-\-help\fR" 4
.IX Item "--help"
Показати довідкове повідомлення.
.IP "\fB\-\-arch\fR АРХІТЕКТУРА" 4
.IX Item "--arch АРХІТЕКТУРА"
Використовувати для образу\-результату вказану архітектуру. Це означає, що
мають бути початкові коди шаблона для вказаної архітектури.
.Sp
Див. також \*(L"АРХІТЕКТУРА\*(R".
.IP "\fB\-\-attach\fR ФАЙЛ_ISO" 4
.IX Item "--attach ФАЙЛ_ISO"
Під час етапу налаштовування вказаний диск долучається до базової системи
libguestfs. Цей диск використовується для отримання даних додаткових сховищ
програмного забезпечення або інших даних для створення нетипової системи.
.Sp
Ймовірно, вам варто додати мітки для долучених дисків (або скористатися
назвою тому \s-1ISO\s0), щоб надалі монтувати диски за міткою у ваших скриптах
запуску:
.Sp
.Vb 2
\& mkdir /tmp/mount
\& mount LABEL=EXTRA /tmp/mount
.Ve
.Sp
Параметр \fI\-\-attach\fR можна вказати декілька разів, а форматом може бути
будь\-який формат образу (не лише \s-1ISO\s0).
.Sp
Див. також \fI\-\-run\fR, \*(L"Встановлення пакунків зі стороннього сховища під час
збирання\*(R", \fBgenisoimage\fR\|(1), \fBvirt\-make\-fs\fR\|(1).
.IP "\fB\-\-attach\-format\fR ФОРМАТ" 4
.IX Item "--attach-format ФОРМАТ"
Вказати формат диска для наступного параметра \fI\-\-attach\fR. Значенням
аргументу \f(CW\*(C`ФОРМАТ\*(C'\fR зазвичай є \f(CW\*(C`raw\*(C'\fR або \f(CW\*(C`qcow2\*(C'\fR.  Для образів \s-1ISO\s0
скористайтеся варіантом \f(CW\*(C`raw\*(C'\fR.
.IP "\fB\-\-cache\fR КАТАЛОГ" 4
.IX Item "--cache КАТАЛОГ"
.PD 0
.IP "\fB\-\-no\-cache\fR" 4
.IX Item "--no-cache"
.PD
\&\fI\-\-cache\fR КАТАЛОГ встановлює каталог зберігання і пошуку файлів кешованих
шаблонів. Якщо значення не встановлено, типовим значенням буде
\&\fI\f(CI$XDG_CACHE_HOME\fI/virt\-builder/\fR або \fI\f(CI$HOME\fI/.cache/virt\-builder/\fR.
.Sp
\&\fI\-\-no\-cache\fR вимикає кешування шаблонів.
.IP "\fB\-\-cache\-all\-templates\fR" 4
.IX Item "--cache-all-templates"
Отримати усі шаблони до кешу і завершити роботу. Див. \*(L"КЕШУВАННЯ\*(R".
.Sp
Зауважте, що кешуються не усі дані. Можна вивантажити додаткові
шаблони. Крім того, не кешуються пакунки (параметри \fI\-\-install\fR,
\&\fI\-\-update\fR).
.IP "\fB\-\-check\-signature\fR" 4
.IX Item "--check-signature"
.PD 0
.IP "\fB\-\-no\-check\-signature\fR" 4
.IX Item "--no-check-signature"
.PD
Перевіряти чи не перевіряти цифровий підпис шаблону операційної
системи. Типово, програма перевірях підпис і завершує роботу, якщо підпис не
збігається із еталонним. Обійти цю перевірку можна за допомогою параметра
\&\fI\-\-no\-check\-signature\fR.
.Sp
Див. також \fI\-\-fingerprint\fR.
.IP "\fB\-\-colors\fR" 4
.IX Item "--colors"
.PD 0
.IP "\fB\-\-colours\fR" 4
.IX Item "--colours"
.PD
Використовувати послідовності символів \s-1ANSI\s0 для розфарбовування
повідомлень. Ці послідовності типово використовуються, якщо дані виводяться
на термінал tty.  Якщо дані, виведені програмою, спрямовуються до файла,
послідовності визначення кольорів \s-1ANSI\s0 буде вимкнено, якщо ви не додасте до
команди цей параметр.
.IP "\fB\-\-curl\fR \s-1CURL\s0" 4
.IX Item "--curl CURL"
Вказати альтернативний виконуваний файл \fBcurl\fR\|(1). Ви також можете
скористатися цим параметром для додавання параметрів curl, наприклад, щоб
вимкнути перевірку сертифікатів https:
.Sp
.Vb 1
\& virt\-builder \-\-curl "curl \-\-insecure" [...]
.Ve
.IP "\fB\-\-delete\-cache\fR" 4
.IX Item "--delete-cache"
Вилучити кеш шаблонів. Див. \*(L"КЕШУВАННЯ\*(R".
.IP "\fB\-\-no\-delete\-on\-failure\fR" 4
.IX Item "--no-delete-on-failure"
Не вилучати файл виведених даних, якщо під час збирання станеться
помилка. Даними з цього файла можна скористатися для діагностування причин
помилки. Див. \*(L"ДІАГНОСТИЧНІ ЗБІРКИ\*(R", щоб дізнатися більше про діагностику
образів.
.Sp
Типовою є поведінка, коли файл результатів буде вилучено, якщо станеться
помилка у virt-builder (або, наприклад, помилка у одному зі скриптів, які
запускає ця програма).
.IP "\fB\-\-fingerprint\fR '\s-1AAAA BBBB ...\s0'" 4
.IX Item "--fingerprint 'AAAA BBBB ...'"
Перевірка того, що покажчик та шаблони підписано ключем із вказаним
відбитком (Відбитком, зазвичай, є доволі довгий рядок, що складається з 10
груп 4 шістнадцяткових цифр).
.Sp
Ви можете скористатися цим параметром декілька разів. Якщо у вас декілька
адрес початкового коду, у вас або не буде відбитка, або буде один відбиток
або буде декілька відбитків. Якщо відбитків декілька, вам слід вказати для
кожного адресу початкового коду.
.IP "\fB\-\-format\fR qcow2" 4
.IX Item "--format qcow2"
.PD 0
.IP "\fB\-\-format\fR raw" 4
.IX Item "--format raw"
.PD
Для звичайних процедур збирання визначає формат виведення даних. Типовим
значенням є \fIraw\fR.
.Sp
З \fI\-\-get\-kernel\fR визначає формат вхідних даних.
.Sp
Для створення файла qcow2 у застарілому стилі (для сумісності з \s-1RHEL 6\s0 або
дуже старим qemu < 1.1) після виконання програми virt-builder
скористайтеся такою командою:
.Sp
.Vb 1
\& qemu\-img amend \-f qcow2 \-o compat=0.10 output.qcow2
.Ve
.IP "\fB\-\-get\-kernel\fR ОБРАЗ" 4
.IX Item "--get-kernel ОБРАЗ"
За допомогою цього параметра можна видобути ядро і initramfs з раніше
зібраного образу диска із назвою \f(CW\*(C`ОБРАЗ\*(C'\fR (фактично, це працює для
будь\-якого образу диска віртуальної машини, не лише для образів, які зібрано
за допомогою virt-builder).
.Sp
Зауважте, що цей метод є \fBзастарілим\fR: для виконання цього завдання є
окрема програма, \fBvirt\-get\-kernel\fR\|(1), у якій передбачено більше варіантів
видобування файлів.
.Sp
Ядро і initramfs буде записано до поточного каталогу, якщо ви не вкажете
додатково назву каталогу результатів за допомогою параметра \fI\-\-output\fR
\&\f(CW\*(C`каталог результатівr\*(C'\fR.
.Sp
Формат образу диска буде визначено автоматично, якщо ви не вкажете його за
допомогою параметра \fI\-\-format\fR.
.Sp
Якщо у гостьовій системі декілька ядер, буде вибрано ядро із найбільшим
номером. Щоб видобути із образу диска ядро з певним номером версії,
скористайтеся \fBguestfish\fR\|(1). Щоб видобути із гостьової системи увесь вміст
каталогу \fI/boot\fR, скористайтеся \fBvirt\-copy\-out\fR\|(1).
.IP "\fB\-\-gpg\fR \s-1GPG\s0" 4
.IX Item "--gpg GPG"
Вказати альтернативний виконуваний файл \fBgpg\fR\|(1) (\s-1GNU\s0 Privacy
Guard). Типово, virt-builder шукає \f(CW\*(C`gpg2\*(C'\fR або \f(CW\*(C`gpg\*(C'\fR у каталогах, вказаних
за допомогою змінної \f(CW$PATH\fR.
.Sp
Ви можете скористатися цим параметром для додавання параметрів до основної
програми gpg, наприклад, для визначення альтернативного домашнього каталогу:
.Sp
.Vb 1
\& virt\-builder \-\-gpg "gpg \-\-homedir /tmp" [...]
.Ve
.IP "\fB\-l\fR [версія\-ОС]" 4
.IX Item "-l [версія-ОС]"
.PD 0
.IP "\fB\-\-list\fR [версія\-ОС]" 4
.IX Item "--list [версія-ОС]"
.IP "\fB\-\-list\fR \fB\-\-list\-format\fR формат [версія ОС]" 4
.IX Item "--list --list-format формат [версія ОС]"
.IP "\fB\-\-list\fR \fB\-\-long\fR [версія ОС]" 4
.IX Item "--list --long [версія ОС]"
.PD
Вивести усі доступні шаблони, якщо не вказано гостьової системи, або вивести
шаблони лише для вказаної гостьової системи.
.Sp
Ви можете вибрати формат виведення за допомогою параметра \fI\-\-list\-format\fR
для шаблонів списку:
.RS 4
.IP "\fBshort\fR" 4
.IX Item "short"
Типовий формат: виводиться лише ідентифікатор шаблона і, поряд з ним, його
короткий опис.
.IP "\fBlong\fR" 4
.IX Item "long"
Виводить тестовий список із даними щодо доступних джерел і список даних щодо
доступних шаблонів після нього.
.IP "\fBjson\fR" 4
.IX Item "json"
Вивести об’єкт \s-1JSON\s0 із подробицями щодо доступних джерел та подробиці щодо
доступних шаблонів.
.Sp
Ключ \f(CW\*(C`version\*(C'\fR у основному об'єкті визначає «версію сумісності», його
значення слід збільшувати кожного разу, коли результат використання \s-1JSON\s0
ставатиме несумісним із попередніми версіями (наприклад, через зміну
струкутри або прибирання основних ключів).
.RE
.RS 4
.Sp
\&\fI\-\-long\fR — скорочення для формату \f(CW\*(C`long\*(C'\fR.
.Sp
Див також: \fI\-\-source\fR, \fI\-\-notes\fR, \*(L"ДЖЕРЕЛА ШАБЛОНІВ\*(R".
.RE
.IP "\fB\-\-machine\-readable\fR" 4
.IX Item "--machine-readable"
За допомогою цього параметра можна зробити виведені дані придатнішими для
обробки комп'ютером, якщо для цієї обробки використовуються інші
програми. Див. \*(L"ПРИДАТНЕ ДО ЧИТАННЯ КОМП'ЮТЕРОМ ВИВЕДЕННЯ\*(R" нижче.
.IP "\fB\-m\fR МБ" 4
.IX Item "-m МБ"
.PD 0
.IP "\fB\-\-memsize\fR МБ" 4
.IX Item "--memsize МБ"
.PD
Зміна обсягу пам'яті, наданого скриптам \fI\-\-run\fR. Збільште це значення, якщо
виявиться, що для використання скриптів \fI\-\-run\fR або параметра \fI\-\-install\fR
не вистачає пам'яті.
.Sp
Типові значення можна визначити за допомогою такої команди:
.Sp
.Vb 1
\& guestfish get\-memsize
.Ve
.IP "\fB\-\-network\fR" 4
.IX Item "--network"
.PD 0
.IP "\fB\-\-no\-network\fR" 4
.IX Item "--no-network"
.PD
Увімкнути чи вимкнути доступ до мережі для гостьової системи під час
встановлення.
.Sp
Типово увімкнено. Скористайтеся параметром \fI\-\-no\-network\fR, щоб вимкнути
доступ.
.Sp
У мережі працюватимуть лише вихідні з'єднання, а також буде декілька інших
незначних обмежень. Див. \*(L"МЕРЕЖА\*(R" in \fBvirt\-rescue\fR\|(1).
.Sp
Якщо ви скористаєтеся параметром \fI\-\-no\-network\fR, тоді інші параметри,
зокрема \fI\-\-install\fR, не працюватимуть.
.Sp
Це не вплине на доступність мережі для гостьової системи після її
завантаження, оскільки така доступність керується вашим гіпервізором або
хмарним середовищем і не має нічого спільного з virt-builder.
.Sp
Загалом кажучи, вам \fIне варто\fR використовувати \fI\-\-no\-network\fR. Але ось
декілька випадків, коли у вас може виникнути потреба у використанні цього
параметра:
.RS 4
.IP "1." 4
У модулі обробки libguestfs, яким ви користуєтеся, не передбачено підтримки
мережі.  (Див. \*(L"МОДУЛЬ\*(R" in \fBguestfs\fR\|(3)).
.IP "2." 4
Усе програмне забезпечення, яке ви маєте намір встановити, походить з
долученого образу \s-1ISO,\s0 отже потреби у мережі немає.
.IP "3." 4
Ви не хочете, щоб ненадійний код із гостьової системи намагався отримати
доступ до мережевого з'єднання вашої основної системи під час роботи
virt-builder. Таке, зокрема, може трапитися, якщо ви не довіряєте джерелу
шаблонів операційних систем.  (Див. \*(L"БЕЗПЕКА\*(R" нижче).
.IP "4." 4
Ви не хочете користуватися мережею основної системи (наприклад, через
захищеність або обмеженість середовища у ній).
.RE
.RS 4
.RE
.IP "\fB\-\-no\-sync\fR" 4
.IX Item "--no-sync"
Не синхронізувати файл виведення під час завершення роботи.
.Sp
Virt-builder виконує синхронізацію \f(CW\*(C`fsync\*(C'\fR файла результатів або образу
диска, якщо такий існує.
.Sp
Причина полягає у тому, що типовим режимом кешування у qemu та \s-1KVM\s0 є \f(CW\*(C`none\*(C'\fR
або \f(CW\*(C`directsync\*(C'\fR, і у обох цих режимах не використовується кеш сторінок
основної системи. Тому ці режими не працюватимуть належним чином, якщо ви
негайно запустите гостьову систему після запуску virt-builder — гостьова
система просто не побачить файл результатів повністю . (Зауважте, що вам не
варто користуватися обома цими режимами кешування — вони непрацездатні на
базовому рівзні з цієї та інших причин.)
.Sp
Якщо ви не використовуєте ці помилкові режими кешування, ви можете
скористатися параметром \fI\-\-no\-sync\fR, щоб усунути непотрібну синхронізаці і
значно пришвидшити роботу програми.
.IP "\fB\-\-notes\fR версія\-ОС" 4
.IX Item "--notes версія-ОС"
Показує список нотаток, пов’язаних із гостьовою системою, потім завершує
роботу (встановлення не виконується).
.IP "\fB\-o\fR назва_файла" 4
.IX Item "-o назва_файла"
.PD 0
.IP "\fB\-\-output\fR назва_файла" 4
.IX Item "--output назва_файла"
.PD
Записати виведені дані до файла \fIназва_файла\fR. Якщо цей параметр не буде
вказано, назву файла для виведення даних буде створено на основі рядка
\&\f(CW\*(C`версія\-ос\*(C'\fR із додаванням суфікса \f(CW\*(C`.img\*(C'\fR (для формату без обробки) або
\&\f(CW\*(C`.qcow2\*(C'\fR (для формату qcow2).
.Sp
Зауважте, що назвою файла виведення результатів може бути пристрій, розділ
або логічний том.
.Sp
Якщо використовується з \fI\-\-get\-kernel\fR, цей параметр задає каталог
виведення даних.
.IP "\fB\-\-print\-cache\fR" 4
.IX Item "--print-cache"
Вивести інформацію щодо кешу шаблонів. Див. \*(L"КЕШУВАННЯ\*(R".
.IP "\fB\-q\fR" 4
.IX Item "-q"
.PD 0
.IP "\fB\-\-quiet\fR" 4
.IX Item "--quiet"
.PD
Не виводити звичайних повідомлень щодо поступу.
.IP "\fB\-\-size\fR РОЗМІР" 4
.IX Item "--size РОЗМІР"
Вибір розміру диска\-результату, де розмір можна вказати за допомогою типових
записів, зокрема \f(CW\*(C`32G\*(C'\fR (32 гігабайти) тощо.
.Sp
Virt-builder змінить розміри файлових систем у образі диска автоматично.
.Sp
Якщо розмір не задано, можлива реалізація двох сценаріїв. Якщо дані
виводяться до файла, його розмір буде таким самим, як у шаблона. Якщо дані
виводяться на пристрій, розділ тощо, буде використано розмір відповідного
пристрою.
.Sp
Щоб вказати розмір у байтах, додайте до числа малу літеру \fIb\fR, наприклад
\&\f(CW\*(C`\-\-size 10737418240b\*(C'\fR.
.IP "\fB\-\-smp\fR N" 4
.IX Item "--smp N"
Увімкнути N ≥ 2 віртуальних процесорів для використання у скриптах
\&\fI\-\-run\fR.
.IP "\fB\-\-source\fR АДРЕСА" 4
.IX Item "--source АДРЕСА"
Встановити адресу початкових даних для пошуку покажчиків.
.Sp
Цей паарметр можна вказати декілька разів, щоб визначити декілька джерел.
.Sp
Див. також \*(L"ДЖЕРЕЛА ШАБЛОНІВ\*(R" нижче.
.Sp
Зауважте, що не варто вказувати для \fI\-\-source\fR джерела, яким ви не
довіряєте (якщо їх не підписано кимось, кому ви довіряєте). Див. також
параметр \fI\-\-no\-network\fR.
.IP "\fB\-\-no\-warn\-if\-partition\fR" 4
.IX Item "--no-warn-if-partition"
Не видавати попередження, якщо пристроєм виведення даних є розділ. Це
попередження надає змогу уникнути типової помилки користувача під час
записування на флеш\-накопичувач \s-1USB\s0 або зовнішній диск — запису на розділ,
коли слід виконувати перезапис усього пристрою (\fI\-\-output /dev/sdX\fR), а
не розділу на ньому (\fI\-\-output /dev/sdX1\fR). Скористайтеся цим
параметром, щоб \fIпридушити\fR відповідне попередження.
.IP "\fB\-v\fR" 4
.IX Item "-v"
.PD 0
.IP "\fB\-\-verbose\fR" 4
.IX Item "--verbose"
.PD
Увімкнути діагностичні повідомлення і/або режим докладних повідомлень.
.Sp
Коли повідомлятимете про вади, скористайтеся цим параметром і долучіть усі
виведені дані до звіту щодо вади.
.IP "\fB\-V\fR" 4
.IX Item "-V"
.PD 0
.IP "\fB\-\-version\fR" 4
.IX Item "--version"
.PD
Показати дані щодо версії і завершити роботу.
.IP "\fB\-x\fR" 4
.IX Item "-x"
Увімкнути трасування викликів програмного інтерфейсу libguestfs.
.SS "Параметри налаштовування"
.IX Subsection "Параметри налаштовування"
.IP "\fB\-\-append\-line\fR ФАЙЛ:РЯДОК" 4
.IX Item "--append-line ФАЙЛ:РЯДОК"
Дописати один рядок тексту до файла \f(CW\*(C`ФАЙЛ\*(C'\fR. Якщо файл ще не завершується
порожнім рядком, такий рядок буде додано перед дописаним. Крім того,
автоматично буде дописано символ нового рядка наприкінці рядка \f(CW\*(C`РЯДОК\*(C'\fR.
.Sp
Наприклад, (припускаємо, що у командній оболонці використовуються звичайні
лапки) така команда:
.Sp
.Vb 1
\& \-\-append\-line \*(Aq/etc/hosts:10.0.0.1 foo\*(Aq
.Ve
.Sp
додасть \f(CW\*(C`10.0.0.1 foo⏎\*(C'\fR або \f(CW\*(C`⏎10.0.0.1 foo⏎\*(C'\fR до файла; останній запис буде
додано, лише якщо наявний файл ще не закінчується символом нового рядка.
.Sp
\&\f(CW\*(C`⏎\*(C'\fR позначає символ нового рядка, конкретне значення якого визначається за
наявним вмістом файла, отже, команда обробляє файли однаково правильно для
варіантів із завершеннями рядка у форматах  Unix і Windows. Це працює і для
порожніх і ще не створених файлів.
.Sp
Щоб додати декілька рядків, скористайтеся тим самим параметром декілька
разів:
.Sp
.Vb 2
\& \-\-append\-line \*(Aq/etc/hosts:10.0.0.1 foo\*(Aq
\& \-\-append\-line \*(Aq/etc/hosts:10.0.0.2 bar\*(Aq
.Ve
.Sp
Щоб додати порожній рядок перед дописаним рядком, скористайтеся такою
конструкцією:
.Sp
.Vb 2
\& \-\-append\-line \*(Aq/etc/hosts:\*(Aq
\& \-\-append\-line \*(Aq/etc/hosts:10.0.0.1 foo\*(Aq
.Ve
.IP "\fB\-\-chmod\fR ПРАВА_ДОСТУПУ:ФАЙЛ" 4
.IX Item "--chmod ПРАВА_ДОСТУПУ:ФАЙЛ"
Змінити права доступу до файла \f(CW\*(C`ФАЙЛ\*(C'\fR на \f(CW\*(C`ПРАВА_ДОСТУПУ\*(C'\fR.
.Sp
\&\fIЗауваження\fR: типово \f(CW\*(C`ПРАВА_ДОСТУПУ\*(C'\fR записуються у десятковому форматі,
якщо ви не додасте початковий \f(CW0\fR , щоб вказати вісімкове число, тобто
скористаєтеся \f(CW0700\fR, а не \f(CW700\fR.
.IP "\fB\-\-commands\-from\-file\fR НАЗВА_ФАЙЛА" 4
.IX Item "--commands-from-file НАЗВА_ФАЙЛА"
Прочитати команди налаштовування з файла, по одній (разом із аргументами) на
рядок.
.Sp
Кожен рядок містить команду налаштовування та її аргументи, наприклад:
.Sp
.Vb 3
\& delete /якийсь/файл
\& install якийсь_пакунок
\& password якийсь\-користувач:password:його\-новий\-пароль
.Ve
.Sp
Порожні рядки ігноруються, а рядки, що починаються з \f(CW\*(C`#\*(C'\fR, є коментарями і
також ігноруються. Крім того, аргументи можна розділити на декілька рядків
додаванням \f(CW\*(C`\e\*(C'\fR (символу продовження) наприкінці рядка. Приклад:
.Sp
.Vb 2
\& edit /якийсь/файл:\e
\&   s/^OPT=.*/OPT=ok/
.Ve
.Sp
Команди обробляються у тому самому порядку, у якому їх вказано у файлі, так,
наче їх вказано як \fI\-\-delete /якийсь/файл\fR у рядку команди.
.IP "\fB\-\-copy\fR ДЖЕРЕЛО:ПРИЗНАЧЕННЯ" 4
.IX Item "--copy ДЖЕРЕЛО:ПРИЗНАЧЕННЯ"
Копіювати файли або каталоги рекурсивно у межах гостьової системи.
.Sp
Не можна використовувати символи\-замінники.
.IP "\fB\-\-copy\-in\fR ЛОКАЛЬНИЙ_ШЛЯХ:ВІДДАЛЕНИЙ_КАТАЛОГ" 4
.IX Item "--copy-in ЛОКАЛЬНИЙ_ШЛЯХ:ВІДДАЛЕНИЙ_КАТАЛОГ"
Скопіювати локальні файли або каталоги рекурсивно до образу диска,
розташувавши його у каталозі \f(CW\*(C`ВІДДАЛЕНИЙ_КАТАЛОГ\*(C'\fR (який має існувати).
.Sp
Не можна використовувати символи\-замінники.
.IP "\fB\-\-delete\fR ШЛЯХ" 4
.IX Item "--delete ШЛЯХ"
Вилучити файл з гостьової системи. Або вилучити каталог (і увесь його вміст,
рекурсивно).
.Sp
Ви можете скористатися символами\-замінниками у вказаному шляху. Не забудьте
екранувати символи\-замінники у командній оболонці основної системи, якщо це
потрібно. Приклад:
.Sp
.Vb 1
\& virt\-customize \-\-delete \*(Aq/var/log/*.log\*(Aq.
.Ve
.Sp
Див. також \fI\-\-upload\fR, \fI\-\-scrub\fR.
.IP "\fB\-\-edit\fR ФАЙЛ:ВИРАЗ" 4
.IX Item "--edit ФАЙЛ:ВИРАЗ"
Редагувати \f(CW\*(C`ФАЙЛ\*(C'\fR з використанням виразу Perl \f(CW\*(C`ВИРАЗ\*(C'\fR.
.Sp
Слід подбати про належне розставлення лапок у виразі, щоб запобігти його
зміні у командній оболонці.
.Sp
Зауважте, що цим параметром можна буде скористатися, лише якщо встановлено
Perl 5.
.Sp
Див. \*(L"NON-INTERACTIVE \s-1EDITING\*(R"\s0 in \fBvirt\-edit\fR\|(1).
.IP "\fB\-\-firstboot\fR СКРИПТ" 4
.IX Item "--firstboot СКРИПТ"
Встановити \f(CW\*(C`СКРИПТ\*(C'\fR у гостьовій системі і запустити його під час першого
завантаження гостьової системи (від імені root, у останній частині процесу
завантаження).
.Sp
До скрипту, після встановлення до гостьової системи, буде автоматично
застосовано команду chmod +x.
.Sp
Альтернативна версія \fI\-\-firstboot\-command\fR є такою самою, але зручно
включає команду у однорядковому скрипті.
.Sp
Можна вказати декілька параметрів \fI\-\-firstboot\fR. Їх буде виконано у тому
самому порядку, у якому їх вказано у рядку команди.
.Sp
Будь ласка, зверніться до розділу \*(L"СКРИПТИ ПЕРШОГО
ЗАВАНТАЖЕННЯ\*(R", щоб ознайомитися із відомостями щодо скриптів першого
завантаження і проблемами у їх використанні.
.Sp
Див. також \fI\-\-run\fR.
.IP "\fB\-\-firstboot\-command\fR 'КОМАНДА+ПАРАМЕТРИ'" 4
.IX Item "--firstboot-command 'КОМАНДА+ПАРАМЕТРИ'"
Виконати команду (разом із аргументами) у гостьовій системі під час першого
завантаження гостьової системи (від імені root, у останній частині процесу
завантаження).
.Sp
Можна вказати декілька параметрів \fI\-\-firstboot\fR. Їх буде виконано у тому
самому порядку, у якому їх вказано у рядку команди.
.Sp
Будь ласка, зверніться до розділу \*(L"СКРИПТИ ПЕРШОГО
ЗАВАНТАЖЕННЯ\*(R", щоб ознайомитися із відомостями щодо скриптів першого
завантаження і проблемами у їх використанні.
.Sp
Див. також \fI\-\-run\fR.
.IP "\fB\-\-firstboot\-install\fR ПАКУНОК,ПАКУНОК.." 4
.IX Item "--firstboot-install ПАКУНОК,ПАКУНОК.."
Встановити іменовані пакунки (список значень, відокремлених комами). Ці
пакунки буде встановлено під час першого завантаження гостьової системи за
допомогою програми для керування пакунків гостьової системи (наприклад, apt,
yum тощо) і з'єднання із мережею гостьової системи.
.Sp
Огляд різних способів встановлення пакунків наведено у розділі
\&\*(L"ВСТАНОВЛЕННЯ ПАКУНКІВ\*(R".
.IP "\fB\-\-hostname\fR НАЗВА_ВУЗЛА" 4
.IX Item "--hostname НАЗВА_ВУЗЛА"
Встановити як назву вузла гостьової системи значення \f(CW\*(C`НАЗВА_ВУЗЛА\*(C'\fR. Якщо
потрібно, можете скористатися форматом із крапкою,
«назва_вузла.назва_домену» (\s-1FQDN\s0).
.IP "\fB\-\-install\fR ПАКУНОК,ПАКУНОК.." 4
.IX Item "--install ПАКУНОК,ПАКУНОК.."
Встановити іменовані пакунки (список значень, відокремлених комами). Ці
пакунки буде встановлено під час збирання образу за допомогою програми для
керування пакунків гостьової системи (наприклад, apt, yum тощо) і з'єднання
із мережею основної системи.
.Sp
Огляд різних способів встановлення пакунків наведено у розділі
\&\*(L"ВСТАНОВЛЕННЯ ПАКУНКІВ\*(R".
.Sp
Див. також \fI\-\-update\fR, \fI\-\-uninstall\fR.
.IP "\fB\-\-link\fR ПРИЗНАЧЕННЯ:ПОСИЛАННЯ[:ПОСИЛАННЯ..]" 4
.IX Item "--link ПРИЗНАЧЕННЯ:ПОСИЛАННЯ[:ПОСИЛАННЯ..]"
Створити символічне посилання або декілька посилань у гостьовій системі так,
щоб вони з \f(CW\*(C`ПОСИЛАННЯ\*(C'\fR вказували на \f(CW\*(C`ПРИЗНАЧЕННЯ\*(C'\fR.
.IP "\fB\-\-mkdir\fR КАТАЛОГ" 4
.IX Item "--mkdir КАТАЛОГ"
Створити каталог у гостьовій системі.
.Sp
Використовується \f(CW\*(C`mkdir \-p\*(C'\fR, отже буде створено усі проміжні
каталоги. Також команда працює, якщо каталог вже існує.
.IP "\fB\-\-move\fR ДЖЕРЕЛО:ПРИЗНАЧЕННЯ" 4
.IX Item "--move ДЖЕРЕЛО:ПРИЗНАЧЕННЯ"
Пересунути файли або каталоги у межах гостьової системи.
.Sp
Не можна використовувати символи\-замінники.
.IP "\fB\-\-no\-logfile\fR" 4
.IX Item "--no-logfile"
Витерти \f(CW\*(C`builder.log\*(C'\fR (файл журналу із командами збирання) з образу після
завершення збирання. Якщо ви не хочете явним чином показувати, як було
зібрано образ, скористайтеся цим параметром.
.Sp
Див. також \*(L"\s-1LOG FILE\*(R"\s0.
.IP "\fB\-\-password\fR КОРИСТУВАЧ:ВАРІАНТ" 4
.IX Item "--password КОРИСТУВАЧ:ВАРІАНТ"
Встановити пароль для користувача \f(CW\*(C`КОРИСТУВАЧ\*(C'\fR. (Зауважте, що за допомогою
цього параметра \fIне можна\fR створювати облікові записи користувачів.)
.Sp
Формат поля \f(CW\*(C`ВАРІАНТ\*(C'\fR та способи налаштовування облікових записів
користувачів описано у розділі \*(L"КОРИСТУВАЧІ І ПАРОЛІ\*(R".
.IP "\fB\-\-password\-crypto\fR md5|sha256|sha512" 4
.IX Item "--password-crypto md5|sha256|sha512"
Якщо змінюється чи встановлюється пароль для гостьової системи, за допомогою
цього параметра можна встановити шифрування для цього пароля у значення
\&\f(CW\*(C`md5\*(C'\fR, \f(CW\*(C`sha256\*(C'\fR або \f(CW\*(C`sha512\*(C'\fR.
.Sp
Для використання значень \f(CW\*(C`sha256\*(C'\fR та \f(CW\*(C`sha512\*(C'\fR має бути встановлено glibc
≥ 2.7 (перевірте у \fBcrypt\fR\|(3) всередині гостьової системи).
.Sp
\&\f(CW\*(C`md5\*(C'\fR працюватиме з відносно давніми гостьовими системами Linux
(наприкладRHEL 3), але є незахищеним щодо новітніх способів атак.
.Sp
Типовим способом шифрування є \f(CW\*(C`sha512\*(C'\fR. Він використовується, якщо
libguestfs вдасться виявити у гостьовій системі підтримку \s-1SHA\-512.\s0 Якщо
такої підтримки не буде виявлено, використовуватиметься \f(CW\*(C`md5\*(C'\fR. За допомогою
цього параметра ви можете перевизначити автоматично визначений libguestfs
спосіб шифрування.
.Sp
Зауважте, що це не змінить типового шифрування, яке використовується
гостьовою системою, коли ви створюєте у ній нові облікові записи
користувачів. Якщо ви хочете змінити це шифрування, вам слід скористатися
параметром \fI\-\-edit\fR для внесення змін до \f(CW\*(C`/etc/sysconfig/authconfig\*(C'\fR
(Fedora, \s-1RHEL\s0) або \f(CW\*(C`/etc/pam.d/common\-password\*(C'\fR (Debian, Ubuntu).
.IP "\fB\-\-root\-password\fR ВАРІАНТ" 4
.IX Item "--root-password ВАРІАНТ"
Встановити пароль користувача root.
.Sp
Формат поля \f(CW\*(C`ВАРІАНТ\*(C'\fR та способи налаштовування облікових записів
користувачів описано у розділі \*(L"КОРИСТУВАЧІ І ПАРОЛІ\*(R".
.Sp
Зауваження: якщо у virt-builder ви \fIне встановите\fR \fI\-\-root\-password\fR, для
гостьової системи буде використано \fIвипадковий\fR пароль root.
.IP "\fB\-\-run\fR СКРИПТ" 4
.IX Item "--run СКРИПТ"
Виконати скрипт оболонки (або будь\-яку програму), яка називається \f(CW\*(C`СКРИПТ\*(C'\fR
у образі диска. Скрипт буде запущено у віртуалізованому режимі у малій
допоміжній системі, у пісочниці гостьової файлової системи.
.Sp
Для скрипта буде автоматично використано команду chmod +x.
.Sp
Якщо у libguestfs передбачено підтримку цього, буде доступним обмежене
мережеве з'єднання, але лише для вихідних з'єднань. Ви також можете долучати
диски з даними (наприклад, файли \s-1ISO\s0), як ще один спосіб надання даних
(наприклад, пакунків із програмним забезпеченням) для скрипту без потреби у
з'єднанні із мережею (\fI\-\-attach\fR). Також ви можете вивантажувати файли з
даними (\fI\-\-upload\fR).
.Sp
Можна вказати декілька параметрів \fI\-\-run\fR. Їх буде виконано у тому самому
порядку, у якому їх вказано у рядку команди.
.Sp
Див. також \fI\-\-firstboot\fR, \fI\-\-attach\fR, \fI\-\-upload\fR.
.IP "\fB\-\-run\-command\fR 'КОМАНДА+ПАРАМЕТРИ'" 4
.IX Item "--run-command 'КОМАНДА+ПАРАМЕТРИ'"
Виконати команду із аргументами у образі диска. Команду буде виконано у
віртуалізованому режимі у малій допоміжній системі, у пісочниці гостьової
файлової системи.
.Sp
Якщо у libguestfs передбачено підтримку цього, буде доступним обмежене
мережеве з'єднання, але лише для вихідних з'єднань. Ви також можете долучати
диски з даними (наприклад, файли \s-1ISO\s0), як ще один спосіб надання даних
(наприклад, пакунків із програмним забезпеченням) для скрипту без потреби у
з'єднанні із мережею (\fI\-\-attach\fR). Також ви можете вивантажувати файли з
даними (\fI\-\-upload\fR).
.Sp
Можна вказати декілька параметрів \fI\-\-run\-command\fR. Їх буде виконано у тому
самому порядку, у якому їх вказано у рядку команди.
.Sp
Див. також \fI\-\-firstboot\fR, \fI\-\-attach\fR, \fI\-\-upload\fR.
.IP "\fB\-\-scrub\fR ФАЙЛ" 4
.IX Item "--scrub ФАЙЛ"
Витерти файл з гостьової системи. Подібне до \fI\-\-delete\fR, окрім того, що:
.RS 4
.IP "\(bu" 4
Витирає дані так, що їх не можна буде відновити з гостьової системи.
.IP "\(bu" 4
Не може вилучати каталоги, лише звичайні файли.
.RE
.RS 4
.RE
.IP "\fB\-\-selinux\-relabel\fR" 4
.IX Item "--selinux-relabel"
Повторно встановити мітки для файлів у гостьовій системі так, щоб вони були
правильними з точки зору SELinux.
.Sp
Якщо буде використано цей параметр, програма спробує змінити мітки файлів
негайно, але якщо цього зробити не вдасться, вона змінить часову мітку файла
\&\fI/.autorelabel\fR на образі, щоб дію зі зміни міток було заплановано на
наступне завантаження образу.
.Sp
Вам слід використовувати цей параметр лише для гостьових систем із
підтримкою SELinux.
.IP "\fB\-\-sm\-attach\fR ВАРІАНТ" 4
.IX Item "--sm-attach ВАРІАНТ"
Долучити систему до буфера передплати за допомогою \f(CW\*(C`subscription\-manager\*(C'\fR.
.Sp
Формат поля \f(CW\*(C`ВАРІАНТ\*(C'\fR описано у розділі
\&\*(L"SUBSCRIPTION-MANAGER\*(R".
.IP "\fB\-\-sm\-credentials\fR ВАРІАНТ" 4
.IX Item "--sm-credentials ВАРІАНТ"
Встановити реєстраційні дані для \f(CW\*(C`subscription\-manager\*(C'\fR.
.Sp
Формат поля \f(CW\*(C`ВАРІАНТ\*(C'\fR описано у розділі
\&\*(L"SUBSCRIPTION-MANAGER\*(R".
.IP "\fB\-\-sm\-register\fR" 4
.IX Item "--sm-register"
Зареєструвати гостьову систему за допомогою \f(CW\*(C`subscription\-manager\*(C'\fR.
.Sp
Потребує встановлення реєстраційних даних за допомогою \fI\-\-sm\-credentials\fR.
.IP "\fB\-\-sm\-remove\fR" 4
.IX Item "--sm-remove"
Вилучити усі передплати з гостьової системи за допомогою
\&\f(CW\*(C`subscription\-manager\*(C'\fR.
.IP "\fB\-\-sm\-unregister\fR" 4
.IX Item "--sm-unregister"
Зняти гостьову систему з реєстрації за допомогою \f(CW\*(C`subscription\-manager\*(C'\fR.
.IP "\fB\-\-ssh\-inject\fR КОРИСТУВАЧ[:ВАРІАНТ]" 4
.IX Item "--ssh-inject КОРИСТУВАЧ[:ВАРІАНТ]"
Вставити ключ ssh так, щоб вказаний \f(CW\*(C`КОРИСТУВАЧ\*(C'\fR зміг увійти до системи з
використанням ssh без потреби у визначенні пароля. Запис користувача
\&\f(CW\*(C`КОРИСТУВАЧ\*(C'\fR має вже існувати у гостьовій системі.
.Sp
Формат поля \f(CW\*(C`ВАРІАНТ\*(C'\fR описано у розділі \*(L"КЛЮЧІ \s-1SSH\*(R"\s0.
.Sp
Ви можете додати декілька параметрів \fI\-\-ssh\-inject\fR для різних
користувачів, а також для додавання декількох ключів для кожного з
користувачів.
.IP "\fB\-\-timezone\fR ЧАСОВИЙ_ПОЯС" 4
.IX Item "--timezone ЧАСОВИЙ_ПОЯС"
Встановити типовий часовий пояс гостьової системи у значення
\&\f(CW\*(C`ЧАСОВИЙ_ПОЯС\*(C'\fR. Скористайтеся рядком місця у форматі \f(CW\*(C`Europe/London\*(C'\fR
.IP "\fB\-\-touch\fR ФАЙЛ" 4
.IX Item "--touch ФАЙЛ"
Ця команда виконує подібну до \fBtouch\fR\|(1) дію над файлом \f(CW\*(C`ФАЙЛ\*(C'\fR.
.IP "\fB\-\-truncate\fR ФАЙЛ" 4
.IX Item "--truncate ФАЙЛ"
Ця команда обрізає файл \f(CW\*(C`ФАЙЛ\*(C'\fR до нульової довжини. Для її успішного
виконання файл має існувати.
.IP "\fB\-\-truncate\-recursive\fR ШЛЯХ" 4
.IX Item "--truncate-recursive ШЛЯХ"
Ця команда рекурсивно обрізає усі файли у каталозі \f(CW\*(C`ШЛЯХ\*(C'\fR до нульової
довжини.
.IP "\fB\-\-uninstall\fR ПАКУНОК,ПАКУНОК.." 4
.IX Item "--uninstall ПАКУНОК,ПАКУНОК.."
Вилучити іменовані пакунки (список значень, відокремлених комами). Ці
пакунки буде вилучено під час збирання образу за допомогою програми для
керування пакунків гостьової системи (наприклад, apt, yum тощо). З метою
виконання запиту також може бути вилучено пакунки, залежні від вилучених
пакунків.
.Sp
Див. також \fI\-\-install\fR, \fI\-\-update\fR.
.IP "\fB\-\-update\fR" 4
.IX Item "--update"
Виконує еквівалент \f(CW\*(C`yum update\*(C'\fR, \f(CW\*(C`apt\-get upgrade\*(C'\fR або якоїсь іншої
команди, яка потрібна для оновлення пакунків, які вже встановлено у шаблоні,
до найсвіжіших версій.
.Sp
Див. також \fI\-\-install\fR, \fI\-\-uninstall\fR.
.IP "\fB\-\-upload\fR ФАЙЛ:ПРИЗНАЧЕННЯ" 4
.IX Item "--upload ФАЙЛ:ПРИЗНАЧЕННЯ"
Вивантажити локальний файл \f(CW\*(C`ФАЙЛ\*(C'\fR до призначення \f(CW\*(C`ПРИЗНАЧЕННЯ\*(C'\fR на образі
диска. Буде збережено власника і права доступу, отже вам слід вказати такі
значення для цих параметрів, які мають бути на остаточному образі диска.
.Sp
Значенням параметра \f(CW\*(C`ПРИЗНАЧЕННЯ\*(C'\fR може бути назва остаточного файла. Цим
можна скористатися для перейменовування файла під час вивантаження.
.Sp
Якщо значенням параметра \f(CW\*(C`ПРИЗНАЧЕННЯ\*(C'\fR є назва каталогу (який вже має
існувати у гостьовій системі), файл буде вивантажено до вказаного каталогу,
назву файла з локальної файлової системи буде збережено.
.Sp
Див. також \fI\-\-mkdir\fR, \fI\-\-delete\fR, \fI\-\-scrub\fR.
.IP "\fB\-\-write\fR ФАЙЛ:ДАНІ" 4
.IX Item "--write ФАЙЛ:ДАНІ"
Записати \f(CW\*(C`ДАНІ\*(C'\fR до файла \f(CW\*(C`ФАЙЛ\*(C'\fR.
.SH "ДОВІДНИК"
.IX Header "ДОВІДНИК"
.SS "ВСТАНОВЛЕННЯ ПАКУНКІВ"
.IX Subsection "ВСТАНОВЛЕННЯ ПАКУНКІВ"
Існує декілька підходів до встановлення пакунків або програм у гостьовій
системі, використання кожного з яких має власні переваги і недоліки.
.PP
\fIВстановлення пакунків під час збирання\fR
.IX Subsection "Встановлення пакунків під час збирання"
.PP
Якщо гостьова операційна система є подібною до основної операційної системи
(наприклад, обидві є операційними системами Linux), і у libguestfs
передбачено підтримку з'єднань мережею, ви можете скористатися параметром
\&\fI\-\-install\fR для встановлення пакунків у такий спосіб:
.PP
.Vb 1
\& virt\-builder fedora\-25 \-\-install inkscape
.Ve
.PP
Тут використано засіб керування пакунками гостьової системи і з'єднання із
мережею основної системи.
.PP
\fIОновлення пакунків під час збирання\fR
.IX Subsection "Оновлення пакунків під час збирання"
.PP
Щоб оновити встановлений набір пакунків у шаблоні під час збирання, віддайте
таку команду:
.PP
.Vb 1
\& virt\-builder fedora\-25 \-\-update
.Ve
.PP
У більшості шаблонів, які постачаються разом із virt-builder, передбачено
дуже вузький набір пакунків (відомий як «JEOS» або «Just Enough Operating
System» («Достатньо для того, щоб бути операційною системою»), які є
актуальними на час створення шаблону, але можу виявитися застарілими на час,
коливи ви встановлюватимете операційну систему з шаблону. За допомогою цього
параметра можна оновити пакунки з шаблону.
.PP
\fIВстановлення пакунків під час першого завантаження\fR
.IX Subsection "Встановлення пакунків під час першого завантаження"
.PP
Іншим варіантом є встановлення пакунків під час першого завантаження
гостьової системи:
.PP
.Vb 1
\& virt\-builder fedora\-25 \-\-firstboot\-install inkscape
.Ve
.PP
Тут використано засіб керування пакунками гостьової системи і з'єднання із
мережею гостьової системи.
.PP
Недоліком використання цього підходу є те, що гостьова система
завантажуватиметься вперше набагато довше, а також те, що ви не зможете
нічого зробити, якщо під час встановлення пакунків станеться помилка
(наприклад, через проблеми із мережею гостьова система не зможе встановити
зв'язок зі сховищем пакунків).
.PP
\fIВстановлення пакунків зі стороннього сховища під час збирання\fR
.IX Subsection "Встановлення пакунків зі стороннього сховища під час збирання"
.PP
Якщо програмного забезпечення, яке ви хочете встановити, немає у основному
сховищі пакунків гостьової системи, ви можете додати стороннє
сховище. Зазвичай, таке сховище є файлом образу \s-1ISO\s0 (образом компакт\-диска),
у якому містяться дані додаткових пакунків.
.PP
Ви можете створити образ диска за допомогою \fBgenisoimage\fR\|(1) або
\&\fBvirt\-make\-fs\fR\|(1). Для genisoimage скористайтеся такою командою:
.PP
.Vb 1
\& genisoimage \-o extra\-packages.iso \-R \-J \-V EXTRA cdcontents/
.Ve
.PP
Створіть скрипт, який монтує \s-1ISO\s0 і налаштовує сховище. Для dnf створіть
/tmp/install.sh з таким вмістом:
.PP
.Vb 2
\& mkdir /tmp/mount
\& mount LABEL=EXTRA /tmp/mount
\& 
\& cat <<\*(AqEOF\*(Aq > /etc/yum.repos.d/extra.repo
\& [extra]
\& name=extra
\& baseurl=file:///tmp/mount
\& enabled=1
\& EOF
\& 
\& dnf \-y install famousdatabase
.Ve
.PP
Для apt створіть файл /tmp/install.sh із таким вмістом:
.PP
.Vb 2
\& mkdir /tmp/mount
\& mount LABEL=EXTRA /tmp/mount
\& 
\& apt\-cdrom \-d=/tmp/mount add
\& apt\-get \-y install famousdatabase
.Ve
.PP
Скористайтеся параметром \fI\-\-attach\fR для долучення компакт\-диска або образу
диска та параметром \fI\-\-run\fR для запуску скрипта:
.PP
.Vb 3
\& virt\-builder fedora\-25 \e
\&   \-\-attach extra\-packages.iso \e
\&   \-\-run /tmp/install.sh
.Ve
.SS "КОРИСТУВАЧІ І ПАРОЛІ"
.IX Subsection "КОРИСТУВАЧІ І ПАРОЛІ"
Параметр \fI\-\-root\-password\fR використовується для зміни пароля адміністратора
(root) (якщо ви не скористаєтеся цим параметром, буде використано випадковий
пароль). Цьому параметру можна передати \f(CW\*(C`ВАРІАНТ\*(C'\fR пароля у одному з таких
форматів:
.IP "\fB\-\-root\-password\fR file:НАЗВА_ФАЙЛА" 4
.IX Item "--root-password file:НАЗВА_ФАЙЛА"
Прочитати пароль адміністратора з файла \f(CW\*(C`НАЗВА_ФАЙЛА\*(C'\fR. Паролем
вважатиметься вміст усього першого рядка цього файла. Усі інші рядки файла
буде проігноровано. Файл має бути створено із режимом доступу 0600, щоб його
не могли читати сторонні користувачі.
.IP "\fB\-\-root\-password\fR password:ПАРОЛЬ" 4
.IX Item "--root-password password:ПАРОЛЬ"
Встановити для пароля root буквальне значення рядка \f(CW\*(C`ПАРОЛЬ\*(C'\fR.
.Sp
\&\fBЗауваження: цей спосіб не є безпечним\fR, оскільки будь\-який користувач
комп'ютера зможе побачити пароль явним чином за допомогою команди \fBps\fR\|(1).
.IP "\fB\-\-root\-password\fR random" 4
.IX Item "--root-password random"
Вибрати випадковий пароль, який буде виведено до stdout. Випадковість пароля
наближено відповідатиме 120\-бітовій.
.Sp
Типове значення.
.IP "\fB\-\-root\-password\fR disabled" 4
.IX Item "--root-password disabled"
Пароль для облікового запису root вимкнено. Це так, ніби у полі пароля
використано \f(CW\*(C`*\*(C'\fR.
.IP "\fB\-\-root\-password\fR locked:file:НАЗВА_ФАЙЛА" 4
.IX Item "--root-password locked:file:НАЗВА_ФАЙЛА"
.PD 0
.IP "\fB\-\-root\-password\fR locked:password:ПАРОЛЬ" 4
.IX Item "--root-password locked:password:ПАРОЛЬ"
.IP "\fB\-\-root\-password\fR locked:random" 4
.IX Item "--root-password locked:random"
.PD
Обліковий запис root заблоковано, але для нього визначено пароль. Якщо
обліковий запис буде вперше розблоковано (за допомогою \f(CW\*(C`passwd \-u\*(C'\fR), для
входу до нього буде використано вказаний пароль.
.IP "\fB\-\-root\-password\fR locked" 4
.IX Item "--root-password locked"
.PD 0
.IP "\fB\-\-root\-password\fR locked:disabled" 4
.IX Item "--root-password locked:disabled"
.PD
Обліковий запис root \fIі\fR пароль вимкнено.
.PP
\fIСтворення облікових записів користувачів\fR
.IX Subsection "Створення облікових записів користувачів"
.PP
Для створення облікових записів користувачів скористайтеся командою
\&\fBuseradd\fR\|(8) з параметром \-\-firstboot\-command, ось так:
.PP
.Vb 2
\& virt\-builder \-\-firstboot\-command \e
\&    \*(Aquseradd \-m \-p "" rjones ; chage \-d 0 rjones\*(Aq
.Ve
.PP
Вказана вище команда створить обліковий запис \f(CW\*(C`rjones\*(C'\fR без пароля і
примусить користувача встановити пароль під час першого входу ддо
системи. Існують і інші способи керування паролями, див. \fBuseradd\fR\|(8), щоб
дізнатися більше.
.SS "РОЗКЛАДКА КЛАВІАТУРИ"
.IX Subsection "РОЗКЛАДКА КЛАВІАТУРИ"
Оскільки існує багато різних способів встановити розкладку клавіатури у
дистрибутивах Linux, у virt-builder усе ще немає простого параметра
командного рядка для виконання цієї дії. У цьому розділі наведено настанови
щодо встановлення розкладки для деяких типових дистрибутивів Linux.
.PP
\fIВизначення розкладки клавіатури за допомогою systemd\fR
.IX Subsection "Визначення розкладки клавіатури за допомогою systemd"
.PP
У дистрибутивах, де використовується \f(CW\*(C`localectl\*(C'\fR зі складу systemd,
скористайтеся такою командою:
.PP
.Vb 2
\& virt\-builder fedora\-25 \e
\&   \-\-firstboot\-command \*(Aqlocalectl set\-keymap uk\*(Aq
.Ve
.PP
Докладніший опис можна знайти за посиланнями \fBlocalectl\fR\|(1) та
https://www.happyassassin.net/2013/11/23/keyboard\-layouts\-in\-fedora\-20\-and\-previously/.
.PP
\fIВизначення розкладки клавіатури за допомогою \fI/etc/sysconfig/keyboard\fI\fR
.IX Subsection "Визначення розкладки клавіатури за допомогою /etc/sysconfig/keyboard"
.PP
Для \s-1RHEL\s0 ≤ 6, Fedora ≤ 18 та подібних систем можна вивантажити із
змінити файл налаштувань клавіатури за допомогою параметрів \fI\-\-upload\fR,
\&\fI\-\-write\fR або \fI\-\-edit\fR. Приклад:
.PP
.Vb 2
\& virt\-builder centos\-6 \e
\&   \-\-edit \*(Aq/etc/sysconfig/keyboard: s/^KEYTABLE=.*/KEYTABLE="uk"/\*(Aq
.Ve
.PP
Документацію щодо формату даних цього файла можна знайти на багатьох
сторінках інтернету.
.PP
\fIВизначення розкладки клавіатури у дистрибутивах на основі Debian\fR
.IX Subsection "Визначення розкладки клавіатури у дистрибутивах на основі Debian"
.PP
У заснованих на Debian дистрибутивах мети можна досягти за допомогою файла
\&\fI/etc/default/keyboard\fR. Вивантажити або внести зміни до цього файла можна
за допомогою параметрів \fI\-\-upload\fR, \fI\-\-write\fR та \fI\-\-edit\fR. Приклад:
.PP
.Vb 2
\& virt\-builder debian\-8 \e
\&   \-\-edit \*(Aq/etc/default/keyboard: s/^XKBLAYOUT=.*/XKBLAYOUT="gb"/\*(Aq
.Ve
.PP
Див. https://wiki.debian.org/Keyboard.
.SS "МОВА"
.IX Subsection "МОВА"
У більшості дистрибутивів Linux передбачено можливість зміни локалі, отже ви
можете бачити повідомлення гостьової системи нестандартною мовою, наприклад
українською.
.PP
Втім, єдиного параметра, який контролює локаль, немає, оскільки для
реалізації підтримки мови може знадобитися встановлення додаткових пакунків,
зокрема шрифтів для консолі і графічної оболонки, способів введення символів
запису мови з клавіатури. Назви потрібних для цього пакунків та їхні
налаштування залежать від дистрибутиву, отже, virt-builder просто не може
про них знати.
.PP
У цьому розділі наведено приклади для типових дистрибутивів Linux.
.PP
\fIВстановлення японської локалі у Fedora 25\fR
.IX Subsection "Встановлення японської локалі у Fedora 25"
.PP
.Vb 10
\& virt\-builder fedora\-25 \e
\&   \-\-size 20G \e
\&   \-\-update \e
\&   \-\-install @japanese\-support \e
\&   \-\-install @xfce \e
\&   \-\-install xorg\-x11\-server\-Xorg,xorg\-x11\-drivers,rsyslog \e
\&   \-\-link /usr/lib/systemd/system/graphical.target:/etc/systemd/system/default.target \e
\&   \-\-firstboot\-command \*(Aqlocalectl set\-locale LANG=ja_JP.utf8\*(Aq \e
\&   \-\-firstboot\-command \*(Aqlocalectl set\-keymap jp\*(Aq \e
\&   \-\-firstboot\-command \*(Aqsystemctl isolate graphical.target\*(Aq
.Ve
.PP
\fIВстановлення японської мови для Debian 8 (Jessie)\fR
.IX Subsection "Встановлення японської мови для Debian 8 (Jessie)"
.PP
Зауважте, що, хоча вказана команда вмикає японську і у текстовій консолі,
навряд чи у консолі ви побачите належним чином показані ієрогліфи. Втім,
японські ієрогліфи має бути показано у графічних програмах і терміналах.
.PP
.Vb 6
\& pkgs=locales,xfce4,\e
\& ibus,ibus\-anthy,\e
\& fonts\-ipafont\-gothic,fonts\-ipafont\-mincho,\e
\& fonts\-takao\-mincho,\e
\& xfonts\-intl\-japanese,xfonts\-intl\-japanese\-big,\e
\& iceweasel\-l10n\-ja,manpages\-ja
\& 
\& virt\-builder debian\-8 \e
\&   \-\-size 20G \e
\&   \-\-install $pkgs \e
\&   \-\-edit \*(Aq/etc/locale.gen: s,^#\es*ja,ja,\*(Aq \e
\&   \-\-write \*(Aq/etc/default/locale:LANG="ja_JP.UTF\-8"\*(Aq \e
\&   \-\-run\-command "locale\-gen"
.Ve
.SS "ФАЙЛ ЖУРНАЛУ"
.IX Subsection "ФАЙЛ ЖУРНАЛУ"
Скрипти та засоби встановлення пакунків, які працюватимуть під час збирання
(\fI\-\-run\fR, \fI\-\-run\-command\fR, \fI\-\-install\fR, \fI\-\-update\fR, але \fIне\fR
firstboot), записуватимуть повідомлення до одного з таких файлів:
.IP "\fI/tmp/builder.log\fR" 4
.IX Item "/tmp/builder.log"
У Linux, \s-1BSD\s0 та інших гостьових системах, відмінних від Windows.
.IP "\fIC:\eTemp\ebuilder.log\fR" 4
.IX Item "C:Tempbuilder.log"
У гостьових системах Windows, \s-1DOS.\s0
.IP "\fI/builder.log\fR" 4
.IX Item "/builder.log"
Якщо немає \fI/tmp\fR або \fIC:\eTemp\fR.
.PP
Якщо ви не хочете, щоб до остаточного образу було записано файл журналу,
скористайтеся параметром рядка команди \fI\-\-no\-logfile\fR.
.SS "КЛЮЧІ \s-1SSH\s0"
.IX Subsection "КЛЮЧІ SSH"
Параметр \fI\-\-ssh\-inject\fR використовується для вставляння ключів ssh для
користувачів у гостьовій системі, щоб вони могли входити до системи без
зазначення пароля.
.PP
Частина \f(CW\*(C`ВАРІАНТ\*(C'\fR параметра є необов'язковою; у нашому випадку
\&\fI\-\-ssh\-inject\fR \f(CW\*(C`КОРИСТУВАЧ\*(C'\fR означає, що ми шукаємо \fI~/.ssh\fR у каталозі
\&\fIпоточного\fR користувача для визначення типового файла відкритого
ідентифікатора. Саме знайдений ключ і буде вивантажено до гостьової
системи. «Типовий відкритий ідентифікатор» є файлом \fIdefault_ID_file\fR, який
описано у підручнику з \fBssh\-copy\-id\fR\|(1).
.PP
Якщо вказано, \f(CW\*(C`ВАРІАНТ\*(C'\fR можна зазначити у одному з таких форматів:
.IP "\fB\-\-ssh\-inject\fR КОРИСТУВАЧ:file:НАЗВА_ФАЙЛА" 4
.IX Item "--ssh-inject КОРИСТУВАЧ:file:НАЗВА_ФАЙЛА"
Прочитати ключ ssh з файла \fIНАЗВА ФАЙЛА\fR. Файлом зазвичай є файл \fI.pub\fR.
.IP "\fB\-\-ssh\-inject\fR КОРИСТУВАЧ:string:РЯДОК_КЛЮЧА" 4
.IX Item "--ssh-inject КОРИСТУВАЧ:string:РЯДОК_КЛЮЧА"
Використати вказаний \f(CW\*(C`РЯДОК_КЛЮЧА\*(C'\fR. Зазвичай, \f(CW\*(C`РЯДОК_КЛЮЧА\*(C'\fR — рядок
відкритого ключа у форматі \fIssh-rsa \s-1AAAA....\s0 user@localhost\fR.
.PP
Який би з варіантів не було вибрано, буде створено каталог \fI~USER/.ssh\fR і
файл \fI~USER/.ssh/authorized_keys\fR, якщо вони досі не існували.
.SS "СКРИПТИ ПЕРШОГО ЗАВАНТАЖЕННЯ"
.IX Subsection "СКРИПТИ ПЕРШОГО ЗАВАНТАЖЕННЯ"
За допомогою параметрів \fI\-\-firstboot\fR та \fI\-\-firstboot\-command\fR ви можете
визначити команди, які буде виконано під час першого завантаження гостьової
системи. Для цього у гостьовій системі встановлюється скрипт ініціалізації,
який виконує завдання із запуску усіх доданих скриптів і виконання усіх
доданих команд.
.PP
Підтримувані операційні системи:
.IP "Linux" 4
.IX Item "Linux"
Передбачено підтримку таких систем ініціалізації: systemd, System-V init
(також відома як sysvinit) та Upstart (з використанням скриптів System-V).
.Sp
Зауважте, що, зазвичай, скрипти ініціалізації виконуються від імені
адміністратора (root), але у набагато обмеженішошму середовищі ніж те, яке
доступне зі звичайної оболонки. Наприклад, значення змінної середовища
\&\f(CW$HOME\fR може бути не встановленим або порожнім.
.Sp
Дані, виведені скриптами першого запуску, у гостьовій системі
зберігатимуться у \fI~root/virt\-sysprep\-firstboot.log\fR.
.IP "Windows" 4
.IX Item "Windows"
Для запуску скриптів першого завантаження встановлюється \fIrhsrvany.exe\fR,
початковий код якого можна знайти у https://github.com/rwmjones/rhsrvany,
або \fIpvvxsvc.exe\fR, який є частиною \s-1SUSE VMDP.\s0 Наявність цих файлів є
обов'язковою. Якщо файлів не буде знайдено, скрипти першого завантаження
виконати не вдасться.
.Sp
\&\fIrhsrvany.exe\fR або \fIpvvxsvc.exe\fR буде просто скопійовано з місця, на яке
вказує змінна середовища \f(CW\*(C`VIRT_TOOLS_DATA_DIR\*(C'\fR; якщо значення змінної
середовища не встановлено, буде використано типове місце, визначене під час
компіляції (щось схоже на \fI/usr/share/virt\-tools\fR).
.Sp
Дані, виведені скриптами першого завантаження, можна знайти у гостьовій
системі за адресою \fIC:\eProgram Files\eGuestfs\eFirstboot\elog.txt\fR.
.SS "SUBSCRIPTION-MANAGER"
.IX Subsection "SUBSCRIPTION-MANAGER"
Передбачено можливість автоматизації реєстрації та долучення до системи
передплат за допомогою \f(CW\*(C`subscription\-manager\*(C'\fR. Потреба у подібному
налаштовуванні типово виникає у системах Red Hat Enterprise
Linux. Передбачено декілька параметрів, які спрощують процедуру, усувають
потребу у введенні команд вручну та не роблять загальнодоступними паролі,
вказані у рядку команди.
.PP
\&\fI\-\-sm\-register\fR запускає процедуру реєстрації і потребує зазначення
\&\fI\-\-sm\-credentials\fR. Слід використовувати для параметра \f(CW\*(C`ВАРІАНТ\*(C'\fR
\&\fI\-\-sm\-credentials\fR один з таких форматів:
.IP "\fB\-\-sm\-credentials\fR КОРИСТУВАЧ:file:НАЗВА_ФАЙЛА" 4
.IX Item "--sm-credentials КОРИСТУВАЧ:file:НАЗВА_ФАЙЛА"
Прочитати пароль для вказаного користувача \f(CW\*(C`КОРИСТУВАЧ\*(C'\fR з файла
\&\fIНАЗВА_ФАЙЛА\fR.
.IP "\fB\-\-sm\-credentials\fR КОРИСТУВАЧ:password:ПАРОЛЬ" 4
.IX Item "--sm-credentials КОРИСТУВАЧ:password:ПАРОЛЬ"
Використати рядок \f(CW\*(C`ПАРОЛЬ\*(C'\fR для вказаного користувача \f(CW\*(C`КОРИСТУВАЧ\*(C'\fR.
.PP
\&\fI\-\-sm\-attach\fR долучає систему до передплачених послуг; формат варіантів
команди може бути одним з таких:
.IP "\fB\-\-sm\-attach\fR auto" 4
.IX Item "--sm-attach auto"
\&\f(CW\*(C`subscription\-manager\*(C'\fR долучається до найвідповідніших передплат для
системи.
.IP "\fB\-\-sm\-attach\fR file:НАЗВА_ФАЙЛА" 4
.IX Item "--sm-attach file:НАЗВА_ФАЙЛА"
Прочитати ідентифікатор буфера з файла \fIНАЗВА_ФАЙЛА\fR.
.IP "\fB\-\-sm\-attach\fR pool:БУФЕР" 4
.IX Item "--sm-attach pool:БУФЕР"
Використовувати рядок \f(CW\*(C`БУФЕР\*(C'\fR як ідентифікатор буфера.
.PP
\&\fI\-\-sm\-remove\fR вилучає усі передплати з гостьової системи, а
\&\fI\-\-sm\-unregister\fR повністю знімає систему з реєстрації.
.SS "ПРОЦЕДУРА ВСТАНОВЛЕННЯ"
.IX Subsection "ПРОЦЕДУРА ВСТАНОВЛЕННЯ"
Після виклику virt-builder встановлення виконується таким чином:
.IP "\(bu" 4
Отримується образ шаблону.
.Sp
Якщо образ шаблону вже є у кеші, використовується кешована
версія. (Див. \*(L"КЕШУВАННЯ\*(R").
.IP "\(bu" 4
Перевіряється підпис шаблону.
.IP "\(bu" 4
Шаблон розпаковується до файла tmp.
.IP "\(bu" 4
Розмір образ шаблону змінюється так, щоб від дорівнював розміру системи
призначення, за допомогою \fBvirt\-resize\fR\|(1).
.IP "\(bu" 4
Долучаються додаткові диски (\fI\-\-attach\fR).
.IP "\(bu" 4
Створюється нова база псевдовипадкових чисел для гостьової системи.
.IP "\(bu" 4
Виконується налаштовування гостьової системи у порядку, який задається
рядком команди.
.IP "\(bu" 4
Виконується зміна міток SELinux виконано (\fI\-\-selinux\-relabel\fR).
.SS "ІМПОРТУВАННЯ ОБРАЗУ ДИСКА"
.IX Subsection "ІМПОРТУВАННЯ ОБРАЗУ ДИСКА"
\fIІмпортування до libvirt\fR
.IX Subsection "Імпортування до libvirt"
.PP
Імпортування образу диска до libvirt за допомогою параметра
\&\fBvirt\-install\fR\|(1) \fI\-\-import\fR.
.PP
.Vb 3
\& virt\-install \-\-import \e
\&   \-\-name guest \-\-ram 2048 \e
\&   \-\-disk path=disk.img,format=raw \-\-os\-variant fedora25
.Ve
.PP
Нотатки:
.IP "1." 4
Вам \fIслід\fR вказати правильний формат. Форматом є \f(CW\*(C`raw\*(C'\fR, якщо вами не було
використано параметр virt-builder \fI\-\-format\fR.
.IP "2." 4
Наполегливо рекомендуємо скористатися \fI\-\-os\-variant\fR, оскільки він надає
змогу підібрати оптимальний набір пристроїв, які слід увімкнути у системі,
щоб гостьова система працювала найефективніше. Щоб отримати список усіх
варіантів, скористайтеся такою командою:
.Sp
.Vb 1
\& osinfo\-query ОС
.Ve
.Sp
Вказана вище програма є частиною пакунка libosinfo.
.IP "3." 4
Запускати virt-install можна від імені адміністратора (root) або від імені
простого користувача. Між цими способами є незначені відміннсоті, оскільки
libvirt керує різними наборами віртуальних машин для кожного
користувача. Зокрема, virt-manager показує віртуальні машини, власником яких
є root, а «Коробки» з \s-1GNOME\s0 показують лише віртуальні машини поточного
користувача. Інші ж програми можуть також мати свої особливості показу.
.PP
\fIІмпортування до OpenStack\fR
.IX Subsection "Імпортування до OpenStack"
.PP
Імпортувати образ до Glance (сховища образів OpenStack) можна такими
командами:
.PP
.Vb 3
\& glance image\-create \-\-name fedora\-25\-image \-\-file fedora\-25.img \e
\&   \-\-disk\-format raw \-\-container\-format bare \e
\&   \-\-is\-public True
.Ve
.PP
Параметр \fI\-\-file\fR визначає створений за допомогою virt-builder образ
диска. Його значення має узгоджуватися із значення параметра \fI\-\-output\fR
virt-builder. Значення параметра \fI\-\-disk\-format\fR має узгоджуватися зі
значенням параметра \fI\-\-format\fR virt-builder (або бути рівним \f(CW\*(C`raw\*(C'\fR, якщо
ви не вказували цього параметра). Значенням параметра \fI\-\-container\-format\fR
завжди має бути \f(CW\*(C`bare\*(C'\fR, оскільки virt-builder ніколи не вкладає образ до
контейнерів.
.PP
Ви можете скористатися командою \f(CW\*(C`glance image\-show \f(CIfedora\-25\-image\f(CW\*(C'\fR,
щоб переглянути властивості образу.
.PP
Для завантаження екземпляра вашого образу на обчислювальному вузлі Nova
віддайте таку команду:
.PP
.Vb 2
\& nova boot fedora\-25\-server \-\-image fedora\-25\-image \e
\&   \-\-flavor m1.medium
.Ve
.PP
Скористайтеся командою \f(CW\*(C`nova flavor\-list\*(C'\fR, щоб переглянути список
можливих варіантів машин. Скористайтеся командою \f(CW\*(C`nova list\*(C'\fR, щоб
переглянути список запущених екземплярів.
.PP
\fIБезпосереднє завантаження за допомогою qemu або \s-1KVM\s0\fR
.IX Subsection "Безпосереднє завантаження за допомогою qemu або KVM"
.PP
Командний рядок qemu не є ні надто стабільним, ні простим у користуванні,
тому, якщо це можливо, слід користуватися libvirt. Втім, для завантаження
віртуальної машини можна скористатися чимось подібним до вказаного нижче:
.PP
.Vb 5
\& qemu\-system\-x86_64 \e
\&   \-machine accel=kvm:tcg \e
\&   \-cpu host \e
\&   \-m 2048 \e
\&   \-drive file=disk.img,format=raw,if=virtio
.Ve
.PP
Як і з libvirt, дуже важливо вибрати правильний формат. Цим форматом буде
\&\f(CW\*(C`raw\*(C'\fR, якщо раніше не було використано параметр \fI\-\-format\fR.
.SS "КЕРУВАННЯ НАЛАШТУВАННЯМИ"
.IX Subsection "КЕРУВАННЯ НАЛАШТУВАННЯМИ"
\fIPuppet\fR
.IX Subsection "Puppet"
.PP
Щоб увімкнути агент Puppet у гостьовій системі, встановіть пакунок, вкажіть
налаштування на вашому Puppetmaster і забезпечте запуск агента під час
завантаження.
.PP
Типовою командою virt-builder буде:
.PP
.Vb 8
\& virt\-builder fedora\-25 \e
\&   \-\-hostname client.example.com \e
\&   \-\-update \e
\&   \-\-install puppet \e
\&   \-\-append\-line \*(Aq/etc/puppet/puppet.conf:[agent]\*(Aq \e
\&   \-\-append\-line \*(Aq/etc/puppet/puppet.conf:server = puppetmaster.example.com/\*(Aq \e
\&   \-\-run\-command \*(Aqsystemctl enable puppet\*(Aq \e
\&   \-\-selinux\-relabel
.Ve
.PP
Точний перелік настанов залежить від дистрибутива Linux. Докладніше про це
тут: https://docs.puppet.com/puppet/latest/install_pre.html
.SS "ДІАГНОСТИКА ЗБИРАННЯ"
.IX Subsection "ДІАГНОСТИКА ЗБИРАННЯ"
Якщо сам virt-builder не може виконати роботу, слід увімкнути діагностику
(\fI\-v\fR) і повідомити про ваду розробників (див. розділ \*(L"ВАДИ\*(R" нижче).
.PP
Якщо причиною неможливості виконання завдання virt-builder є який скрипт або
пакунок, який програма не може встановити, спробуйте скористатися параметром
\&\fI\-\-no\-delete\-on\-failure\fR, щоб зберегти файл результатів, і продовжіть
вивчення цього розділу підручника.
.PP
Якщо virt-builder успішно завершує роботу, але образ не працює, ось чим слід
скористатися:
.IP "Використання virt-rescue" 4
.IX Item "Використання virt-rescue"
Запустити \fBvirt\-rescue\fR\|(1) над образом диска:
.Sp
.Vb 1
\& virt\-rescue \-a disk.img
.Ve
.Sp
Ви потрапите до оболонки порятунку. Ви зможете змонтувати файлові системи з
образу диска до \fI/sysroot\fR і вивчити їх за допомогою звичних команд
Linux. Ви також можете скористатися chroot щодо гостьової системи і
перевстановити у ній завантажувач. На сторінці підручника з virt-rescue
наведено набагато більше інформації та прикладів.
.IP "Використання guestfish" 4
.IX Item "Використання guestfish"
Запустити \fBguestfish\fR\|(1) над образом диска:
.Sp
.Vb 1
\& guestfish \-a disk.img \-i
.Ve
.Sp
Скористайтеся командами guestfish, зокрема \f(CW\*(C`ll /каталог\*(C'\fR і \f(CW\*(C`cat /файл\*(C'\fR,
для перевірки каталогів та файлів.
.IP "Використання guestmount" 4
.IX Item "Використання guestmount"
Безпечно змонтувати образ диска у основній системі за допомогою \s-1FUSE\s0 і
\&\fBguestmount\fR\|(1):
.Sp
.Vb 3
\& mkdir /tmp/mp
\& guestmount \-a disk.img \-i /tmp/mp
\& cd /tmp/mp
.Ve
.Sp
Щоб демонтувати образ диска, виконайте такі дії:
.Sp
.Vb 1
\& fusermount \-u /tmp/mp
.Ve
.IP "Додати послідовну консоль" 4
.IX Item "Додати послідовну консоль"
Якщо гостьова система повисає під час завантаження, може допомогти додавання
послідовної консолі у гостьову систему і спрямовування повідомлень ядра до
послідовної консолі. Додавання послідовної консолі потребує вивчення
документації до вашого гіпервізора. Щоб спрямувати повідомлення ядра до
послідовної консолі, додайте таку частину до командного рядка ядра:
.Sp
.Vb 1
\& console=tty0 console=ttyS0,115200
.Ve
.SS "ДЖЕРЕЛА ШАБЛОНІВ"
.IX Subsection "ДЖЕРЕЛА ШАБЛОНІВ"
virt-builder читає доступні джерела із файлів налаштування, файлів із
суфіксом назви \fI.conf\fR, які зберігаються у одному з таких місць:
.IP "\(bu" 4
\&\f(CW$XDG_CONFIG_HOME\fR/virt\-builder/reposd/ (\f(CW$XDG_CONFIG_HOME\fR дорівнює
\&\fI\f(CI$HOME\fI/.config\fR, якщо не встановлено).
.IP "\(bu" 4
\&\f(CW$XDG_CONFIG_DIRS\fR/virt\-builder/repos.d/ (де \f(CW$XDG_CONFIG_DIRS\fR означає
будь\-які каталоги у відповідній змінній середовища або просто \fI/etc/xdg\fR,
якщо значення змінної середовища не визначено)
.PP
Кожен з файлів \fI.conf\fR у вказаних каталогах зберігає дані у простому
текстовому форматі, ось так:
.PP
.Vb 3
\& [libguestfs.org]
\& uri=http://libguestfs.org/download/builder/index.asc
\& gpgkey=file:///etc/xdg/virt\-builder/repos.d/libguestfs.gpg
.Ve
.PP
Частина у квадратних дужках є ідентифікатором сховища, який використовується
як унікальний ідентифікатор.
.PP
Можуть з’явитися такі поля:
.ie n .IP """uri=АДРЕСА""" 4
.el .IP "\f(CWuri=АДРЕСА\fR" 4
.IX Item "uri=АДРЕСА"
Адреса файла покажчика, на який посилається це сховище.
.Sp
Це поле слід заповнити.
.ie n .IP """gpgkey=АДРЕСА""" 4
.el .IP "\f(CWgpgkey=АДРЕСА\fR" 4
.IX Item "gpgkey=АДРЕСА"
Це необов'язкове поле відповідає адресі (хоча прийнятними є лише адреси
\&\fIfile://\fR) ключа, який використано для підписування файла покажчика. Якщо
поля немає, файл покажчика, на який посилається \fIuri=..\fR, не підписано.
.ie n .IP """proxy=РЕЖИМ""" 4
.el .IP "\f(CWproxy=РЕЖИМ\fR" 4
.IX Item "proxy=РЕЖИМ"
Це необов'язкове поле вказує на режим проксі, яким слід скористатися для
отримання файла покажчика цього сховища. Можливі значення:
.RS 4
.IP "\fBno\fR, \fBoff\fR" 4
.IX Item "no, off"
Не використовувати проксі взагалі, незважаючи на  налаштування системи.
.IP "\fBsystem\fR" 4
.IX Item "system"
Використаний проксі\-сервер є системним.
.IP "\fIусе інше\fR" 4
.IX Item "усе інше"
Задає справжні налаштування проксі, якими слід скористатися, незважаючи на
налаштування системи.
.RE
.RS 4
.Sp
Якщо значення не вказано, буде використано параметри проксі\-сервера системи
(тобто все буде так, наче вказано \fBsystem\fR).
.RE
.ie n .IP """format=ФОРМАТ""" 4
.el .IP "\f(CWformat=ФОРМАТ\fR" 4
.IX Item "format=ФОРМАТ"
Це необов'язкове поле задає формат сховища. Можливі такі значення:
.RS 4
.IP "\fBnative\fR" 4
.IX Item "native"
Природний формат сховища \f(CW\*(C`virt\-builder\*(C'\fR. Див. також розділ \*(L"Створення і
підписування файла покажчика\*(R" нижче.
.IP "\fBsimplestreams\fR" 4
.IX Item "simplestreams"
Адреса, яка визначає кореневий каталог ієрархії метаданих Simple Streams
версії 1.0.
.Sp
Докладніший опис Simple Streams наведено тут:
https://launchpad.net/simplestreams.
.RE
.RS 4
.Sp
Якщо не вказано, типовим значенням буде \f(CW\*(C`native\*(C'\fR.
.RE
.PP
Якщо ви часто користуватиметеся virt-builder, варто створити власне сховище
шаблонів.
.PP
\fIСховище libguestfs.org\fR
.IX Subsection "Сховище libguestfs.org"
.PP
Від початку, virt-builder отримує файл
http://libguestfs.org/download/builder/index.asc, який є покажчиком усіх
доступних шаблонів, і деяку інформацію щодо кожного з них, яку додано до
цифрового підпису. За допомогою команди \f(CW\*(C`virt\-builder \-\-list\*(C'\fR можна
ознайомитися із усіма даними щодо цього файла покажчика.
.PP
Шаблони, які зберігаються на libguestfs.org, було створено за допомогою
скриптів командної оболонки, файлів kickstart та файлів, які можна знайти у
ієрархії коду libguestfs, у каталозі \f(CW\*(C`builder/templates\*(C'\fR.
.PP
\fIНалаштовування доступу до сховища\fR
.IX Subsection "Налаштовування доступу до сховища"
.PP
Ви можете створити власний сайт із файлом покажчика (index) і деякими
шаблонами, а потім вказати virt-builder на цей сайт за допомогою вмісту
файла \fI.conf\fR.
.PP
Зауважте, що якщо ваш покажчик підписано, вам слід належним чином заповнити
поле \fIgpgkey=..\fR у вашому файлі \fI.conf\fR, а також додати файл ключа \s-1GPG.\s0
.PP
.Vb 3
\& virt\-builder \-\-source https://example.com/builder/index.asc \e
\&    \-\-fingerprint \*(AqAAAA BBBB ...\*(Aq \e
\&    \-\-list
.Ve
.PP
Ви можете розмістити сайт будь\-якмоу мережевому сервері або сервері \s-1FTP\s0 чи у
локальній або мережевій файловій системі.
.PP
\fIВстановлення ключа \s-1GPG\s0\fR
.IX Subsection "Встановлення ключа GPG"
.PP
Якщо у вас ще немає ключа GnuPG, вам слід налаштувати такий. (Строго кажучи,
це не є обов'язковою умовою, але якщо ваш файл покажчика і файл шаблона не
буде підписано, користувачам virt-builder доведеться додавати параметр
\&\fI\-\-no\-check\-signature\fR до команди кожного разу, коли їм потрібно буде
скористатися virt-builder.)
.PP
Інструкцію зі створення ключа можна знайти у підручнику з \s-1GPG:\s0
http://www.gnupg.org/gph/en/manual.html.
.PP
Експортувати ваш відкрити ключ \s-1GPG:\s0
.PP
.Vb 1
\& gpg \-\-export \-a "you@example.com" > pubkey
.Ve
.PP
\fIСтворення шаблонів\fR
.IX Subsection "Створення шаблонів"
.PP
Існує багато способів створення шаблонів. Наприклад, ви можете клонувати
наявні гостьові системи (див. \fBvirt\-sysprep\fR\|(1)) або встановити гостьову
систему вручну (\fBvirt\-install\fR\|(1)). Щоб ознайомитися із способами створення
шаблонів для virt-builder, вивчіть скрипти у \f(CW\*(C`builder/templates\*(C'\fR
.PP
У virt-builder передбачено підтримку усіх форматів образів (наприклад, raw,
qcow2 тощо) як шаблонів, у звичайному форматі та у форматі, стисненому
\&\s-1XZ.\s0 Таким чином, як шаблонами можна скористатися наявними образами
(наприклад, образами, очищеними за допомогою \fBvirt\-sysprep\fR\|(1)).
.PP
Для досягнення найкращих результатів під час стискання шаблонів
скористайтеся такими параметрами програми xz (пояснення щодо цих параметрів
можна знайти на сторінці довідки до \fBnbdkit\-xz\-plugin\fR\|(1)):
.PP
.Vb 1
\& xz \-\-best \-\-block\-size=16777216 disk
.Ve
.PP
\fIСтворення і підписування файла покажчика\fR
.IX Subsection "Створення і підписування файла покажчика"
.PP
Файл покажчика записується у простому текстовому форматі (тут показано без
цифрового підпису):
.PP
.Vb 10
\& [fedora\-18]
\& name=Fedora® 18
\& osinfo=fedora18
\& arch=x86_64
\& file=fedora\-18.xz
\& checksum[sha512]=...
\& format=raw
\& size=6442450944
\& compressed_size=148947524
\& expand=/dev/sda3
\& 
\& [fedora\-19]
\& name=Fedora® 19
\& osinfo=fedora19
\& arch=x86_64
\& file=fedora\-19.xz
\& checksum[sha512]=...
\& revision=3
\& format=raw
\& size=4294967296
\& compressed_size=172190964
\& expand=/dev/sda3
.Ve
.PP
Частина у квадратних дужках є \f(CW\*(C`версією\-ОС\*(C'\fR, тим самим рядком, який
використано у рядку команди virt-builder, використаному для збирання цієї
операційної системи.
.PP
The index file creation and signature can be eased with the
\&\fBvirt\-builder\-repository\fR\|(1) tool.
.PP
Після приготування файла \f(CW\*(C`index\*(C'\fR у належному форматі підпишіть його такою
командою:
.PP
.Vb 1
\& gpg \-\-clearsign \-\-armor index
.Ve
.PP
У результаті виконання цієї команди буде створено остаточний файл із назвою
\&\fIindex.asc\fR, який можна вивантажити на сервер (і додати у запис адреси
\&\fIuri=..\fR). Як ми вже зауважували вище, підписування файла покажчика є
необов'язковим, але рекомендованим.
.PP
Можуть з’явитися такі поля:
.ie n .IP """name=НАЗВА""" 4
.el .IP "\f(CWname=НАЗВА\fR" 4
.IX Item "name=НАЗВА"
Зручна для користувача назва цього шаблона. Назву буде показано у виведених
даних команди з параметром \fI\-\-list\fR, більше ніде програма її не
використовує.
.ie n .IP """osinfo=ІДЕНТИФІКАТОР""" 4
.el .IP "\f(CWosinfo=ІДЕНТИФІКАТОР\fR" 4
.IX Item "osinfo=ІДЕНТИФІКАТОР"
Це додаткове поле пов'язує операційну систему із відповідним ідентифікатором
libosinfo.  Virt-builder (ще) не використовує ці дані.
.ie n .IP """arch=АРХІТЕКТУРА""" 4
.el .IP "\f(CWarch=АРХІТЕКТУРА\fR" 4
.IX Item "arch=АРХІТЕКТУРА"
Архітектура операційної системи, яку встановлено у цьому шаблоні. Це поле є
обов'язковим.
.ie n .IP """file=ШЛЯХ""" 4
.el .IP "\f(CWfile=ШЛЯХ\fR" 4
.IX Item "file=ШЛЯХ"
Шлях (відносно покажчика) стисненого xz шаблона.
.Sp
Зауважте, що тут \fBне\fR можна використовувати абсолютні шляхи або адреси
файлів. Причиною є те, що у virt-builder використовується правило «одного
походження» для шаблонів, тому вони не можуть походити з інших серверів.
.ie n .IP """sig=ШЛЯХ""" 4
.el .IP "\f(CWsig=ШЛЯХ\fR" 4
.IX Item "sig=ШЛЯХ"
\&\fBЦей параметр вважається застарілим\fR. Використовуйте замість нього поле
контрольної суми (checksum).
.Sp
Шлях (відносно покажчика) від'єднаного підпису \s-1GPG\s0 файла xz.
.Sp
Зауважте, що тут \fBне\fR можна використовувати абсолютні шляхи або адреси
файлів. Причиною є те, що у virt-builder використовується правило «одного
походження» для шаблонів, тому вони не можуть походити з інших серверів.
.Sp
Файл можна створити такою командою:
.Sp
.Vb 1
\& gpg \-\-detach\-sign \-\-armor \-o disk.xz.sig disk.xz
.Ve
.ie n .IP """checksum[sha512]=7b882fe9b82eb0fef...""" 4
.el .IP "\f(CWchecksum[sha512]=7b882fe9b82eb0fef...\fR" 4
.IX Item "checksum[sha512]=7b882fe9b82eb0fef..."
Контрольну суму \s-1SHA\-512\s0 файла, вказаного у виразі \fIfile=..\fR, буде
перевірено після завершення отримання даних. Для визначення підпису
скористайтеся такою командою:
.Sp
.Vb 1
\& sha512sum disk.xz
.Ve
.Sp
Зауважте, що якщо ви користуєтеся цим параметром, вам не потрібно
підписувати файл, тобто використовувати параметр \f(CW\*(C`sig\*(C'\fR. Цей параметр має
вищий пріоритет за параметра \f(CW\*(C`sig\*(C'\fR.
.ie n .IP """checksum=7b882fe9b82eb0fef...""" 4
.el .IP "\f(CWchecksum=7b882fe9b82eb0fef...\fR" 4
.IX Item "checksum=7b882fe9b82eb0fef..."
\&\f(CW\*(C`checksum\*(C'\fR є скороченою формою запису \f(CW\*(C`checksum[sha512]\*(C'\fR.
.Sp
Якщо вам доводиться працювати з virt-builder = 1.24.0, слід користуватися
\&\f(CW\*(C`checksum\*(C'\fR, оскільки ця версію видаватиме повідомлення про помилку обробки,
якщо у ключі поля використано квадратні дужки і цифри. Цю помилку виправлено
у версіях virt-builder ≥ 1.24.1.
.ie n .IP """revision=N""" 4
.el .IP "\f(CWrevision=N\fR" 4
.IX Item "revision=N"
Модифікація (revision) — ціле число, яке використовується для керування
кешем шаблонів. Збільшення номера модифікації призводить до того, що клієнти
отримують шаблон, навіть якщо у них є копія у кеші.
.Sp
Номер модифікації є необов’язковим. Якщо його не вказано, типовим значенням
вважається \f(CW1\fR.
.ie n .IP """format=raw""" 4
.el .IP "\f(CWformat=raw\fR" 4
.IX Item "format=raw"
.PD 0
.ie n .IP """format=qcow2""" 4
.el .IP "\f(CWformat=qcow2\fR" 4
.IX Item "format=qcow2"
.PD
Визначає формат образу диска; якщо дані стиснено, слід вказати формат до
стискання. Якщо формат не вказано, його буде визначено автоматично, але все
ж варто явним чином вказати бажаний формат.
.Sp
Зауважте, що це формат початкових даних, який відрізняється від параметра
\&\fI\-\-format\fR (бажаний формат результату). Virt-builder виконує перетворення
«на льоту» з початкового формату до бажаного формату результату.
.ie n .IP """size=NNN""" 4
.el .IP "\f(CWsize=NNN\fR" 4
.IX Item "size=NNN"
Віртуальний розмір образу у байтах. Це розмір нестисненого образу. Якщо
використано формат, відмінний від raw, зокрема qcow2, це значення означає
розмір віртуального диска, а не розмір файла qcow2.
.Sp
Це поле слід заповнити.
.Sp
Virt-builder також використовує це значення як мінімальний розмір, запит
щодо якого можуть надсилати користувачів за допомогою параметра \fI\-\-size\fR,
або типовий розмір, якщо не вказано параметр \fI\-\-size\fR.
.ie n .IP """compressed_size=NNN""" 4
.el .IP "\f(CWcompressed_size=NNN\fR" 4
.IX Item "compressed_size=NNN"
Справжній розмір образу диска у байтах, тобто розмір, який було вказано у
\&\fIfile=..\fR. Це значення використовується лише для інформування (якщо
використовуються формати \f(CW\*(C`long\*(C'\fR і \f(CW\*(C`json\*(C'\fR у параметрі \fI\-\-list\fR).
.ie n .IP """expand=/dev/sdaX""" 4
.el .IP "\f(CWexpand=/dev/sdaX\fR" 4
.IX Item "expand=/dev/sdaX"
При розпаковуванні образу до його остаточного розміру, наказати
\&\fBvirt\-resize\fR\|(1) розпакувати дані до іменованого розділу у образі гостьової
системи для заповнення усього доступного місця. Це працює подібно до
параметра \fI\-\-expand\fR virt-resize.
.Sp
Тут вам зазвичай слід вказати назву пристрою у кореневій файловій системі
гостьової операційної системи.
.Sp
Цим елементом варто скористатися, але це не обов'язково. Якщо поле
пропущено, virt-resize створить додатковий розділ наприкінці диска для
заповнення порожнього місця, що набагато менш зручно.
.ie n .IP """lvexpand=/пристрій/група_томів/логічний_том""" 4
.el .IP "\f(CWlvexpand=/пристрій/група_томів/логічний_том\fR" 4
.IX Item "lvexpand=/пристрій/група_томів/логічний_том"
При розпаковуванні образу до його остаточного розміру, наказати
\&\fBvirt\-resize\fR\|(1) розпакувати дані до іменованого логічного тому у образі
гостьової системи для заповнення усього доступного місця. Це працює подібно
до параметра \fI\-\-lv\-expand\fR virt-resize.
.Sp
Якщо у гостьовій системі використовується \s-1LVM2,\s0 тут слід вказати логічний
том кореневої файлової системи гостьової операційної системи. Якщо у
гостьовій операційній системі не використовується \s-1LVM2\s0 або її коренева
файлова система не зберігається на логічному томі, не використовуйте цей
параметр.
.ie n .IP """notes=НОТАТКИ""" 4
.el .IP "\f(CWnotes=НОТАТКИ\fR" 4
.IX Item "notes=НОТАТКИ"
Будь\-які нотатки, які стосуються цього образу, особливо нотатки із описом
пакунків образу, способу створення образу та даних щодо ліцензування.
.Sp
Ці дані буде виведено у режимах \fI\-\-notes\fR і \fI\-\-list\fR \fI\-\-long\fR.
.Sp
Ви можете створювати багаторядкові нотатки додаванням принаймні одного
пробілу на початку кожного рядка (навіть порожнього):
.Sp
.Vb 5
\& notes=Цей образ було створено за допомогою
\&  такого скрипту kickstart:
\&                                <\-\- один пробіл на початку рядка
\&  part /boot \-\-fstype ext3
\&  ...
.Ve
.ie n .IP """hidden=true""" 4
.el .IP "\f(CWhidden=true\fR" 4
.IX Item "hidden=true"
Використання прапорця hidden усуває шаблон зі списку, який буде показано у
відповідь на використання параметра \fI\-\-list\fR (лишаючи образ придатним до
встановлення). Цей прапорець використовується для тестових образів.
.ie n .IP """aliases=ПСЕВДОНІМ1 ПСЕВДОНІМ2 ...""" 4
.el .IP "\f(CWaliases=ПСЕВДОНІМ1 ПСЕВДОНІМ2 ...\fR" 4
.IX Item "aliases=ПСЕВДОНІМ1 ПСЕВДОНІМ2 ..."
Це необов'язкове поле визначає список альтернативних назв, відокремлених
пробілами, для образу. Альтернативною назвою, наприклад, можна скористатися
так, щоб вона завжди вказувала на найсвіжішу версію певного образу, лишаючи
інші, старіші версії доступними у покажчику, замість оновлення того самого
образу (див. поле \f(CW\*(C`revision\*(C'\fR).
.PP
\fIЗапуск virt-builder для декількох джерел одночасно\fR
.IX Subsection "Запуск virt-builder для декількох джерел одночасно"
.PP
У virt-builder передбачено можливість використання декількох
джерел. Рекомендованим способом є розгортання файлів \fI.conf\fR, які вказують
на файли покажчика. Іншим способом є визначення джерел за допомогою
декількох параметрів \fI\-\-source\fR і/або \fI\-\-fingerprint\fR:
.PP
.Vb 3
\& virt\-builder \e
\&   \-\-source http://example.com/s1/index.asc \e
\&   \-\-source http://example.com/s2/index.asc
.Ve
.PP
Ви можете надати N відбитків або 1 відбиток. Якщо буде надано N відбитків, N
= кількості джерел, а між джерелом і відбитком є однозначна відповідність:
.PP
.Vb 3
\& virt\-builder \e
\&   \-\-source http://example.com/s1/index.asc \-\-fingerprint \*(Aq0123 ...\*(Aq \e
\&   \-\-source http://example.com/s2/index.asc \-\-fingerprint \*(Aq9876 ...\*(Aq
.Ve
.PP
Якщо вами буде надано один відбиток, його буде використано для усіх джерел.
.PP
Вам \f(CW\*(C`слід\*(C'\fR надати принаймні 1 відбиток.
.PP
\fIЛіцензування шаблонів\fR
.IX Subsection "Ліцензування шаблонів"
.PP
Вам слід зважати на ліцензування образів, які ви розповсюджуєте. Для
гостьових систем із відкритим кодом слід надавати посилання на початковий
код у полі \f(CW\*(C`notes\*(C'\fR і виконувати інші вимоги (наприклад, вимоги щодо
торгівельних знаків).
.PP
\fIФормальна специфікація файла покажчика\fR
.IX Subsection "Формальна специфікація файла покажчика"
.PP
Формат файла покажчика має формальну специфікацію, що визначається сканером
flex і обробником bison, що використовуються для обробки файла. Її можна
знайти у таких файлах у ієрархію коду libguestfs:
.PP
.Vb 2
\& builder/index\-scan.l
\& builder/index\-parse.y
.Ve
.PP
Для перевірки коректності файла покажчика використовується програма із
назвою \fBvirt\-index\-validate\fR\|(1).
.PP
Зауважте, що обробник і інструмент може працювати як із підписаним, так і з
непідписаним файлом покажчика (тобто з \fIindex\fR або з\fIindex.asc\fR).
.PP
Кодуванням покажчика завжди є \s-1UTF\-8.\s0
.SS "КЕШУВАННЯ"
.IX Subsection "КЕШУВАННЯ"
\fIКешування шаблонів\fR
.IX Subsection "Кешування шаблонів"
.PP
Оскільки шаблоні зазвичай є дуже великими, отримані шаблони зберігають у
кеші домашнього каталогу користувача.
.PP
Кеш розміщується у \fI\f(CI$XDG_CACHE_HOME\fI/virt\-builder/\fR або
\&\fI\f(CI$HOME\fI/.cache/virt\-builder\fR.
.PP
Ви можете отримати дані щодо каталогу кешу, зокрема дані щодо того, які
гостьові системи кешуються, за допомогою такої команди:
.PP
.Vb 1
\& virt\-builder \-\-print\-cache
.Ve
.PP
Кеш можна вилучити з метою економії місця на диску такою командою:
.PP
.Vb 1
\& virt\-builder \-\-delete\-cache
.Ve
.PP
Ви можете отримати усі (поточні) шаблони до локального кешу командою:
.PP
.Vb 1
\& virt\-builder \-\-cache\-all\-templates
.Ve
.PP
Щоб вимкнути кешування шаблонів, скористайтеся параметром \fI\-\-no\-cache\fR.
.PP
Кешуванню підлягають лише шаблони. Для покажчика та цифрових підписів
кешування не використовується.
.PP
\fIКешування пакунків\fR
.IX Subsection "Кешування пакунків"
.PP
Virt-builder використовує для отримання файлів \fBcurl\fR\|(1), а також
використовує поточні параметри \f(CW\*(C`http_proxy\*(C'\fR (та інші) під час встановлення
пакунків (\fI\-\-install\fR, \fI\-\-update\fR).
.PP
Тому ви можете встановити ці змінні середовища з метою максимізації обсягу
локального кешування. Див. \*(L"ЗМІННІ СЕРЕДОВИЩА\*(R" та \fBcurl\fR\|(1).
.PP
\fIЛокальні дзеркала\fR
.IX Subsection "Локальні дзеркала"
.PP
Щоб збільшити швидкість і надійність встановлення пакунків, ви можете
налаштувати локальне дзеркало для дистрибутива призначення і вказати на
нього засобу керування пакунками гостьової системи.
.PP
Використання локального дзеркала з Fedora
.IX Subsection "Використання локального дзеркала з Fedora"
.PP
Для встановлення гостьової системи Fedora за допомогою локального дзеркала:
.PP
.Vb 11
\& virt\-builder fedora\-25 \e
\&   \-\-edit \*(Aq/etc/yum.repos.d/fedora.repo:
\&       s{.*baseurl=.*}{baseurl=http://example.com/mirror/};
\&       s{.*metalink=.*}{};
\&   \*(Aq \e
\&   \-\-edit \*(Aq/etc/yum.repos.d/fedora\-updates.repo:
\&       s{.*baseurl=.*}{baseurl=http://example.com/mirror\-updates/};
\&       s{.*metalink=.*}{};
\&   \*(Aq \e
\&   \-\-run\-command \*(Aqdnf \-y update\*(Aq \e
\&   \-\-install \*(Aqпакунок1,пакунок2,...\*(Aq
.Ve
.PP
Використання локального дзеркала з Debian
.IX Subsection "Використання локального дзеркала з Debian"
.PP
Припускаємо, що ви використовуєте \f(CW\*(C`apt\-proxy\*(C'\fR для віддзеркалення сховища,
тоді вам слід створити новий файл \fIsources.list\fR для визначення вашого
проксі\-сервера (див. https://help.ubuntu.com/community/AptProxy), а потім
віддайте таку команду:
.PP
.Vb 4
\& virt\-builder debian\-8 \e
\&   \-\-upload sources.list:/etc/apt/sources.list \e
\&   \-\-run\-command \*(Aqapt\-get \-y update\*(Aq \e
\&   \-\-install \*(Aqпакунок1,пакунок2,...\*(Aq
.Ve
.SS "ЦИФРОВІ ПІДПИСИ"
.IX Subsection "ЦИФРОВІ ПІДПИСИ"
Virt-builder використовує \s-1GNU\s0 Privacy Guard (GnuPG або gpg) для забезпечення
невтручання до покажчика і шаблонів.
.PP
Джерело вказує на файл покажчика, який можна підписати.
.PP
Virt-builder отримує покажчик і перевіряє, чи є підпис коректним і чи
збігається відбиток підписника із вкзаним відбитком (тобто відбитком,
вкзааним за допомогою \fIgpgkey=..\fR у \fI.conf\fR або за допомогою
\&\fI\-\-fingerprint\fR, саме у цьому порядку).
.PP
Для перевірки відповідності щодо вбудованого відкритого ключа або відбитка,
відкритий ключ слід імпортувати до локального сховища ключів gpg користувача
(саме так працює gpg).
.PP
Під час отримання шаблона його підпис буде перевірено у той самий спосіб.
.PP
Хоча підписи і не є обов'язковими, якщо ви їх не використаєте, користувачам
virt-builder доведеться використовувати параметр \fI\-\-no\-check\-signature\fR у
рядку команди. За допомогою підпису можна запобігти заміні зловмисником
підписаного файла покажчика непідписаним файлом. При цьому virt-builder без
перевірки підпису не повідомлятиме про підміну. Щоб там не сталося,
наполегливо рекомендуємо вам створювати підписаний покажчик і шаблони.
.SS "АРХІТЕКТУРА"
.IX Subsection "АРХІТЕКТУРА"
Virt-builder може збирати образ гостьової системи для будь\-якої архітектури,
незалежно від архітектури основної системи. Наприклад, можна зібрати образ
гостьової системи архітектури x86\-64 на основній системі архітектури \s-1ARM.\s0
.PP
Втым, деякы з параметрів не працюватимуть, особливо параметри, які
потребують виконання команд у гостьовій системі під час процесу збирання:
\&\fI\-\-install\fR, \fI\-\-update\fR, \fI\-\-run\fR, \fI\-\-run\-command\fR. Вам варто замінити ці
команди на їхні еквіваленти у firstboot.
.PP
Основна система архітектури x86\-64, збираючи гостьові системи 32\-бітової
архітектури i686, має працювати без використання будь\-яких додаткових кроків
налаштовування.
.SS "БЕЗПЕКА"
.IX Subsection "БЕЗПЕКА"
Virt-builder не потребує запуску від імені користувача root (фактично,
програму не слід запускати від імені root) і не використовує setuid, \f(CW\*(C`sudo\*(C'\fR
або будь\-яких інших подібних механізмів.
.PP
\&\fI\-\-install\fR, \fI\-\-update\fR, \fI\-\-run\fR і \fI\-\-run\-command\fR реалізовано за
допомогою базової системи (невеличкої віртуальної машини), тому ці команди
не працюватимуть у основній системі. Якщо ви користуєтеся модулем libvirt
libguestfs і у системі увімкнено SELinux , віртуальну машину буде додатково
огорнуто у контейнер SELinux (sVirt).
.PP
Втім, ці параметри отримуватимуть доступ до мережі основної системи і,
оскільки шаблон може містити шахрайський код, цей код може намагатися
отримати доступ до ресурсів мережі основної системи, які мають бути
недоступними для нього. Для запобігання небажаному доступу ви можете
скористатися параметром \fI\-\-no\-network\fR.
.PP
Команди першого завантаження виконуються у контексті гостьової системи, тому
слід брати до уваги параметри захисту у вашому гіпервізорі або
обчислювальній хмарі.
.PP
Virt-builder додає випадкову базу псевдовипадкових чисел до кожної гостьової
системи, яку зібрано за його допомогою. Це допомагає забезпеченню справжньої
випадковості номерів послідовності \s-1TCP, UUID,\s0 ключів вузла ssh тощо під час
завантаження гостьової системи.
.PP
Вам слід перевіряти цифрові підписи і не ігнорувати повідомлення про помилки
під час таких перевірок.
.SS "КЛОНИ"
.IX Subsection "КЛОНИ"
Якщо вам потрібто створити багато гостьових систем одного типу, виникає
спокуса запустити virt-builder один раз, а потім просто скопіювати
файл\-результат. Втім, так \fBне\fR слід робити. Вам слід запустити virt-builder
окремо для кожної нової гостьової системи, яку ви хочете створити.
.PP
Так слід робити тому, що кожен клон повинен мати (принаймні) окрему базу для
псевдовипадкових чисел, а також, ймовірно, інші унікальні властивості
(зокрема \s-1UUID\s0 файлових систем) у майбутніх версіях virt-builder.
.PP
Ще однією річчю, яку вам \fIне\fR слід робити, є клонування завантаженого
образу диска. Причиною цього є те, що деякі гостьові системи створюють
унікальні ідентифікатори машини, ключі \s-1SSH\s0 вузла та інші дані під час
першого завантаження, а дублювання таких ідентифікаторів у клонах є вкрай
небажаним.
.PP
Див. також \fBvirt\-sysprep\fR\|(1).
.SS "ШВИДКОДІЯ"
.IX Subsection "ШВИДКОДІЯ"
Найважливішим аспектом пришвидшення роботи програми є кешування. Шаблон
завантажується до кешу, коли його вперше використовують, або якщо було
використано параметр команди \fI\-\-cache\-all\-templates\fR. Докладніше про це у
розділі \*(L"КЕШУВАННЯ\*(R" вище.
.PP
Пакунки, потрібні для виконання завдань із параметрами \fI\-\-install\fR та
\&\fI\-\-update\fR, отримуються за допомогою з'єднання з мережею основної
системи. Встановлення значень змінних середовища \f(CW\*(C`http_proxy\*(C'\fR,
\&\f(CW\*(C`https_proxy\*(C'\fR та \f(CW\*(C`ftp_proxy\*(C'\fR таким чином, щоб вони вказували на локальний
кеш, може забезпечити режим, за якого ці пакунки отримуватимуться із
інтернету лише один раз. Ви також можете спробувати скористатися локальним
сховищем пакунків, хоча налаштовування такого сховища може бути складною
справою, специфічною для того дистрибутива Linux, який ви намагаєтеся
встановити.
.PP
\fIКористування \fI\-\-no\-sync\fI\fR
.IX Subsection "Користування --no-sync"
.PP
Скористайтеся \fI\-\-no\-sync\fR.  Втім, ознайомтеся із можливими проблемами,
описаними у розділі \*(L"ПАРАМЕТРИ\*(R" вище, оскільки це може призвести до
пошкодження даних на диску, якщо використовувати неправильно.
.PP
\fIПропускання virt-resize\fR
.IX Subsection "Пропускання virt-resize"
.PP
За певних умов virt-builder може пропускати крок virt-resize. Це значно
пришвидшує роботу virt-builder. Умови пропускання є такими:
.IP "\(bu" 4
дані слід виводити до звичайного файла (не на блоковий пристрій), \fBі\fR
.IP "\(bu" 4
користувачем \fBне\fR використано параметр \fI\-\-size\fR, \fBі\fR
.IP "\(bu" 4
формат виведення є тим самим, що і формат шаблона (зазвичай raw).
.PP
\fIpxzcat\fR
.IX Subsection "pxzcat"
.PP
Virt-builder використовує внутрішню реалізацію pxzcat (паралельного xzcat),
якщо під час збирання програми було знайдено liblzma. Якщо liblzma не було
знайдено під час збирання, використовуватиметься звичайни \f(CW\*(C`xzcat\*(C'\fR, який
працює у один потік.
.PP
\fIUser-Mode Linux\fR
.IX Subsection "User-Mode Linux"
.PP
Ви можете використовувати virt-builder у поєднанні з модулем User-Mode Linux
(\s-1UML\s0). У такому режимі програма може працювати швидше, якщо virt-builder
запущено у віртуальній машині (наприклад у хмарі).
.PP
Щоб увімкнути модуль \s-1UML,\s0 ознайомтеся із настановами у розділі
\&\*(L"USER-MODE \s-1LINUX BACKEND\*(R"\s0 in \fBguestfs\fR\|(3).
.PP
У поточній версії вам слід користуватися параметром \fI\-\-no\-network\fR. Це буде
виправлено у майбутній версії.
.PP
Підтримки формату виведення результатів qcow2 у \s-1UML\s0 не передбачено. Ви
можете створювати гостьові системи лише у форматі raw.
.SS "\s-1SELINUX\s0"
.IX Subsection "SELINUX"
Гостьові системи, у яких використовується SELinux (зокрема Fedora і Red Hat
Enterprise Linux) потребують коректної мітки SELinux для кожного файла.
.PP
Virt-builder не може знайти про спосіб, у який новим файлам надаються
мітки. Тому існує дві можливі стратегії, використання яких забезпечує
встановлення належних міток:
.IP "Користування \fI\-\-selinux\-relabel\fR" 4
.IX Item "Користування --selinux-relabel"
Запуск \fBsetfiles\fR\|(8) безпосередньо перед завершенням збирання образу
гостьової системи для встановлення належних міток SELinux на образі диска.
.Sp
Це рекомендований метод.
.IP "\fI\-\-touch\fR \fI/.autorelabel\fR" 4
.IX Item "--touch /.autorelabel"
Наявність у гостьовій системі файла із назвою \fI/.autorelabel\fR або можливе
його створення.
.Sp
У гостьових системах, де використовується SELinux, це спричинає запуск
\&\fBrestorecon\fR\|(8) під час першого завантаження. Гостьові системи самостійно
перезавантажуються під час першого використання — це нормальна і нешкідлива
поведінка.
.PP
Будь ласка, зауважте, що якщо у вашій гостьовій системі використовується
SELinux, і ви виконуєте над цією системою дії, які можуть призвести до
створення файлів або внесення змін до наявних файлів, варто скористатися
\&\fI\-\-selinux\-relabel\fR. Так можна забезпечити встановлення належних міток
SELinux для цих файлів.
.SH "ПРИДАТНЕ ДО ЧИТАННЯ КОМП'ЮТЕРОМ ВИВЕДЕННЯ"
.IX Header "ПРИДАТНЕ ДО ЧИТАННЯ КОМП'ЮТЕРОМ ВИВЕДЕННЯ"
Для виведення даних у зручному для машинної обробки форматі можна
скористатися параметром \fI\-\-machine\-readable\fR. Додавання цього параметра
робить зручним використання virt-builder з інших програм, графічних
інтерфейсів тощо.
.PP
Скористайтеся цим параметром окремо, щоб опитати систему щодо можливостей
виконуваного файла virt-builder.  Типово виведені дані виглядатимуть якось
так:
.PP
.Vb 7
\& $ virt\-builder \-\-machine\-readable
\& virt\-builder
\& arch
\& config\-file
\& customize
\& json\-list
\& pxzcat
.Ve
.PP
Виводиться список можливостей, по одній на рядок, і програма завершує роботу
зі станом 0.
.SH "ЗМІННІ СЕРЕДОВИЩА"
.IX Header "ЗМІННІ СЕРЕДОВИЩА"
Опис інших змінних середовища, які стосуються усіх програм libguestfs,
наведено у розділі \*(L"ЗМІННІ СЕРЕДОВИЩА\*(R" in \fBguestfs\fR\|(3).
.ie n .IP """http_proxy""" 4
.el .IP "\f(CWhttp_proxy\fR" 4
.IX Item "http_proxy"
.PD 0
.ie n .IP """https_proxy""" 4
.el .IP "\f(CWhttps_proxy\fR" 4
.IX Item "https_proxy"
.ie n .IP """no_proxy""" 4
.el .IP "\f(CWno_proxy\fR" 4
.IX Item "no_proxy"
.PD
Встановити проксі\-сервер для отримання даних. Ці змінні середовища (та інші)
насправді обробляються \fBcurl\fR\|(1), а не virt-builder.
.ie n .IP """HOME""" 4
.el .IP "\f(CWHOME\fR" 4
.IX Item "HOME"
Використовується для визначення місця кешу шаблонів та місця джерел
користувача. Див. \*(L"КЕШУВАННЯ\*(R" і \*(L"ДЖЕРЕЛА ШАБЛОНІВ\*(R".
.ie n .IP """VIRT_TOOLS_DATA_DIR""" 4
.el .IP "\f(CWVIRT_TOOLS_DATA_DIR\fR" 4
.IX Item "VIRT_TOOLS_DATA_DIR"
Ця змінна визначає каталог, у якому містяться файли даних, які
використовуються для встановлення Windows з першим завантаженням.
.Sp
Зазвичай, потреби у встановленні власного значення немає. Якщо значення не
встановлено, буде використано вбудоване типове значення (щось схоже на
\&\fI/usr/share/virt\-tools\fR).
.Sp
Цей каталог може містити такі файли:
.RS 4
.IP "\fIrhsrvany.exe\fR" 4
.IX Item "rhsrvany.exe"
Це виконуваний файл для Windows RHSrvAny, який використовується для
встановлення скрипту «firstboot» у гостьові системи Windows. Він
знадобиться, якщо ви маєте намір використовувати параметри \fI\-\-firstboot\fR і
\&\fI\-\-firstboot\-command\fR для гостьових операційних систем Windows.
.Sp
Див. також \f(CW\*(C`https://github.com/rwmjones/rhsrvany\*(C'\fR
.IP "\fIpvvxsvc.exe\fR" 4
.IX Item "pvvxsvc.exe"
Це виконуваний файл Windows, що постачається разом із \s-1VMDP SUSE,\s0
використовується для встановлення скрипту «firstboot» у гостьові системи
Windows. Він знадобиться, якщо ви маєте намір використовувати параметри
\&\fI\-\-firstboot\fR і \fI\-\-firstboot\-command\fR для гостьових операційних систем
Windows.
.RE
.RS 4
.RE
.ie n .IP """XDG_CACHE_HOME""" 4
.el .IP "\f(CWXDG_CACHE_HOME\fR" 4
.IX Item "XDG_CACHE_HOME"
Використовується для визначення місця кешу шаблонів. Див. \*(L"КЕШУВАННЯ\*(R".
.ie n .IP """XDG_CONFIG_HOME""" 4
.el .IP "\f(CWXDG_CONFIG_HOME\fR" 4
.IX Item "XDG_CONFIG_HOME"
Використовується для визначення місця джерел користувача. Див. \*(L"ДЖЕРЕЛА
ШАБЛОНІВ\*(R".
.ie n .IP """XDG_CONFIG_DIRS""" 4
.el .IP "\f(CWXDG_CONFIG_DIRS\fR" 4
.IX Item "XDG_CONFIG_DIRS"
Використовується для визначення місця джерел системи. Див. \*(L"ДЖЕРЕЛА
ШАБЛОНІВ\*(R".
.SH "СТАН ВИХОДУ"
.IX Header "СТАН ВИХОДУ"
Ця програма повертає значення 0 у разі успішного завершення і ненульове
значення, якщо сталася помилка.
.SH "ТАКОЖ ПЕРЕГЛЯНЬТЕ"
.IX Header "ТАКОЖ ПЕРЕГЛЯНЬТЕ"
\&\fBguestfs\fR\|(3), \fBguestfish\fR\|(1), \fBguestmount\fR\|(1),
\&\fBvirt\-builder\-repository\fR\|(1), \fBvirt\-copy\-out\fR\|(1), \fBvirt\-customize\fR\|(1),
\&\fBvirt\-get\-kernel\fR\|(1), \fBvirt\-install\fR\|(1), \fBvirt\-rescue\fR\|(1),
\&\fBvirt\-resize\fR\|(1), \fBvirt\-sysprep\fR\|(1), \fBoz\-install\fR\|(1), \fBgpg\fR\|(1),
\&\fBgpg2\fR\|(1), \fBcurl\fR\|(1), \fBvirt\-make\-fs\fR\|(1), \fBgenisoimage\fR\|(1),
http://libguestfs.org/.
.SH "АВТОР"
.IX Header "АВТОР"
Richard W.M. Jones http://people.redhat.com/~rjones/
.SH "АВТОРСЬКІ ПРАВА"
.IX Header "АВТОРСЬКІ ПРАВА"
© Red Hat Inc., 2013
.SH "LICENSE"
.IX Header "LICENSE"
This program is free software; you can redistribute it and/or modify it
under the terms of the \s-1GNU\s0 General Public License as published by the
Free Software Foundation; either version 2 of the License, or (at your
option) any later version.
.PP
This program is distributed in the hope that it will be useful, but
\&\s-1WITHOUT ANY WARRANTY\s0; without even the implied warranty of
\&\s-1MERCHANTABILITY\s0 or \s-1FITNESS FOR A PARTICULAR PURPOSE.\s0  See the \s-1GNU\s0
General Public License for more details.
.PP
You should have received a copy of the \s-1GNU\s0 General Public License along
with this program; if not, write to the Free Software Foundation, Inc.,
51 Franklin Street, Fifth Floor, Boston, \s-1MA 02110\-1301 USA.\s0
.SH "BUGS"
.IX Header "BUGS"
To get a list of bugs against libguestfs, use this link:
https://bugzilla.redhat.com/buglist.cgi?component=libguestfs&product=Virtualization+Tools
.PP
To report a new bug against libguestfs, use this link:
https://bugzilla.redhat.com/enter_bug.cgi?component=libguestfs&product=Virtualization+Tools
.PP
When reporting a bug, please supply:
.IP "\(bu" 4
The version of libguestfs.
.IP "\(bu" 4
Where you got libguestfs (eg. which Linux distro, compiled from source, etc)
.IP "\(bu" 4
Describe the bug accurately and give a way to reproduce it.
.IP "\(bu" 4
Run \fBlibguestfs\-test\-tool\fR\|(1) and paste the \fBcomplete, unedited\fR
output into the bug report.
