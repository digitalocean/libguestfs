
=head1 НАЗВА

virt-cat — показ файлів у віртуальній машині

=head1 КОРОТКИЙ ОПИС

 virt-cat [--параметри] -d назва_домену файл [файл...]

 virt-cat [--параметри] -a диск.img [-a диск.img ...] файл [файл...]

Застарілий стиль:

 virt-cat назва_домену файл

 virt-cat диск.img файл

=head1 ОПИС

C<virt-cat> — інструмент командного рядка для показу вмісту C<файла>, який
зберігається у вказаній віртуальній машині (або образі диска).

Ви можете вказати декілька назв файлів. Вміст таких файлів буде
об’єднано. Назви файлів слід вказувати повністю (разом зі шляхом), починаючи
з кореневого каталогу (тобто назва має починатися з «/»).

C<virt-cat> можна скористатися для пришвидшення перегляду файла. Для
редагування даних слід користуватися C<virt-edit>. Для виконання складніших
дій можна скористатися програмою L<guestfish(1)> (див. L</ВИКОРИСТАННЯ
GUESTFISH> нижче).

=head1 ПРИКЛАДИ

Показати вміст файл F</etc/fstab> у віртуальній машині libvirt з назвою
C<mydomain>:

 virt-cat -d mydomain /etc/fstab

Пошук нещодавно встановлених пакунків:

 virt-cat -d mydomain /var/log/yum.log | tail

Визначення користувачів, які працюють у віртуальній машині:

 virt-cat -d mydomain /var/run/utmp > /tmp/utmp
 who /tmp/utmp

або тих, які у ній працювали:

 virt-cat -d mydomain /var/log/wtmp > /tmp/wtmp
 last -f /tmp/wtmp

=head1 ПАРАМЕТРИ

=over 4

=item B<--help>

Показати коротку довідку.

=item B<-a> файл

=item B<--add> файл

Додати I<файл>, який має бути образом диска з віртуальної машини. Якщо у
віртуальній машині декілька блокових пристроїв, вам слід вказати їх усі за
допомогою окремих записів параметра I<-a>.

Формат образу диска визначається автоматично. Щоб перевизначити його і
примусово використати певний формат, скористайтеся параметром
I<--format=..>.

=item B<-a адреса>

=item B<--add адреса>

Додати віддалений диск. Див. L<guestfish(1)/ДОДАВАННЯ ВІДДАЛЕНОГО СХОВИЩА>.

=item B<-c> адреса

=item B<--connect> адреса

Якщо використовується libvirt, встановити з’єднання з вказаним I<URI>. Якщо
пропущено, з’єднання буде встановлено з типовим гіпервізором libvirt.

Якщо вказати блокові пристрої гостьових систем безпосередньо (I<-a>),
libvirt не буде використовуватися взагалі.

=item B<-d> гість

=item B<--domain> гість

Додати всі диски з вказаної гостьової системи libvirt. UUID доменів можна
використовувати замість назв.

=item B<--echo-keys>

Типово, якщо virt-cat попросить вас ввести ключ або пароль, програма не
відтворюватиме введені символи на екрані. Якщо ви не боїтеся
TEMPEST-нападів, або у вашій кімнаті нікого, окрім вас, немає, ви можете
скористатися цим прапорцем, щоб бачити, які саме символи ви вводите.

=item B<--format=raw|qcow2|..>

=item B<--format>

Типовим значенням для параметра I<-a> є автоматичне визначення формату
образу диска. Використання цього параметра примусово визначає значення
параметрів I<-a> формату диска у наступному рядку команди. Використання
параметра I<--format> без аргументу перемикає програму у режим автоматичного
визначення у наступних параметрах I<-a>.

Приклад:

 virt-cat --format=raw -a disk.img file

примусове встановлення формату без обробки (без автоматичного визначення)
для F<disk.img>.

 virt-cat --format=raw -a disk.img --format -a another.img file

примусове встановлення формату без обробки (без автоматичного визначення)
для F<diskimg> і повернення до автоматичного визначення для F<another.img>.

Якщо ви користуєтеся ненадійними образами гостьових систем у необробленому
форматі, вам слід скористатися цим параметром для визначення формату
диска. Таким чином можна уникнути можливих проблем з захистом для
сформованих зловмисниками гостьових систем (CVE-2010-3851).

=item B<--key> SELECTOR

Specify a key for LUKS, to automatically open a LUKS device when using the
inspection.  C<SELECTOR> can be in one of the following formats:

=over 4

=item B<--key> C<DEVICE>:key:KEY_STRING

Use the specified C<KEY_STRING> as passphrase.

=item B<--key> C<DEVICE>:file:FILENAME

Read the passphrase from F<FILENAME>.

=back

=item B<--keys-from-stdin>

Прочитати параметри ключа або пароля із джерела стандартного
введення. Типово програма намагається читати паролі від користувача
відкриттям F</dev/tty>.

=item B<-m> пристрій[:точка_монтування[:параметри[:тип_файлової_системи]]]

=item B<--mount> пристрій[:точка_монтування[:параметри[:тип_файлової_системи]]]

Змонтувати названий розділ або логічний том до вказаної точки монтування.

Якщо точку монтування не вказано, типовим значенням є F</>.

Визначення точки монтування вимикає інспектування гостьової системи і
призводить до монтування її кореневої системи та усіх її точок
монтування. Тому вам слід забезпечити монтування усіх точок монтування,
потрібних для роботи із файлами, назви яких вказано як аргументи.

Якщо ви не знаєте, які саме файлові системи містяться у образі диска, ви
можете або запустити guestfish без цього параметра і ознайомитися зі списком
доступних розділів, файлових систем та логічних томів (див. команди
L</list-partitions>, L</list-filesystems> і L</lvs>), або скористатися
програмою L<virt-filesystems(1)>.

Третьою (і нечасто використовуваною) частиною параметра монтування є список
параметрів монтування, які використовуються для того, щоб змонтувати
підлеглу файлову систему. Якщо такий список не буде задано, параметрами
монтування вважатиметься або порожній рядок, або C<ro> (другий варіант
використовується, якщо використано прапорець I<--ro>). Заданням параметрів
монтування ви перевизначаєте типовий варіант. Ймовірно, єдиним випадком,
коли вам може знадобитися це, є випадок вмикання списків керування доступом
(ACL) і/або розширених атрибутів, якщо у файловій системі передбачено їхню
підтримку:

 -m /dev/sda1:/:acl,user_xattr

Використання цього прапорця є еквівалентним до використання команди
C<mount-options>.

Четвертою частиною параметра є назва драйвера файлової системи, якою слід
скористатися, зокрема C<ext3> або C<ntfs>. У визначенні цієї частини
параметра рідко виникає потреба, але вона може бути корисною, якщо для
файлової системи можна скористатися декількома драйверами (приклад: C<ext2>
і C<ext3>), або libguestfs визначає файлову систему помилково.

=item B<-v>

=item B<--verbose>

Увімкнути докладний показ повідомлень з метою діагностики.

=item B<-V>

=item B<--version>

Показати дані щодо версії і завершити роботу.

=item B<-x>

Увімкнути трасування викликів програмного інтерфейсу libguestfs.

=back

=head1 ПАРАМЕТРИ КОМАНДНОГО РЯДКА У ФОРМАТІ ПОПЕРЕДНІХ ВЕРСІЙ

У попередніх версіях virt-cat можна було використовувати або

 virt-cat диск.img [диск.img ...] файл

або

 virt-cat назва_гостьової_системи файл

тоді як у цій версії вам слід скористатися I<-a> або I<-d>, відповідно, щоб
уникнути помилок у випадках, коли назва образу диска може збігатися із
назвою гостьової системи.

З міркувань зворотної сумісності передбачено підтримку запису параметрів у
застарілому форматі.

=head1 ФАЙЛИ ЖУРНАЛІВ

Щоб отримати список файлів журналів у гостьових системах, скористайтеся
відповідним інструментом — L<virt-log(1)>. Ця програма може обробляти
журнали у двійкових форматах, зокрема журнал systemd.

Для стеження за вмістом (хвостом) файлів журналу скористайтеся
L<virt-tail(1)>.

=head1 ШЛЯХИ У WINDOWS

У C<virt-cat> передбачено обмежені можливості щодо обробки літерних дисків
та шляхів у Windows (наприклад F<E:\foo\bar.txt>).

Тоді і лише тоді, коли у гостьовій системі працює Windows:

=over 4

=item *

Літери дисків, наприклад C<C:>, замінюються на адреси відповідних файлових
систем на основі даних з регістру Windows.

=item *

Усі символи зворотної похилої риски (C<\>) у шляху замінюються символами
звичайної похилої риски так, щоб libguestfs змогла обробити адресу.

=item *

Шлях до файла, вміст якого має бути показано, визначається без врахування
регістру символів у його записі.

=back

Відомі певні недоліки програми:

=over 4

=item *

Перехід за деякими символічними посиланнями NTFS може здійснюватися з
помилками.

=item *

Точки з'єднання NTFS, які виходять за межі однією файлової системи
використовувати не можна.

=back

=head1 ВИКОРИСТАННЯ GUESTFISH

L<guestfish(1)> є потужнішим інструментом нижчого рівня, яким можна
скористатися, якщо C<virt-cat> не працює.

Використання C<virt-cat> є приблизним еквівалентом такого:

 guestfish --ro -i -d назва_домену download файл -

де C<назва_домену> — назва гостьової системи libvirt, а C<файл> — шлях до
файла повністю. Зауважте, що кінцеве C<-> означає «вивести дані до
стандартного виведення».

У вказаній вище команді використано можливість інспектування гостьових
систем засобами libguestfs, отже, вона не працюватиме у гостьових системах,
які libguestfs не може інспектувати, або у довільних образах дисків, які не
містять гостьових систем. Щоб отримати дані файла безпосередньо з образу
диска, скористайтеся такою командою:

 guestfish --ro -a диск.img -m /dev/sda1 download файл -

де F<диск.img> — образ диска, F</dev/sda1> — файлова система у образі диска,
а C<файл> — шлях до файла повністю.

=head1 СТАН ВИХОДУ

Ця програма повертає значення 0 у разі успішного завершення і ненульове
значення, якщо сталася помилка.

=head1 ТАКОЖ ПЕРЕГЛЯНЬТЕ

L<guestfs(3)>, L<guestfish(1)>, L<virt-copy-out(1)>, L<virt-edit(1)>,
L<virt-log(1)>, L<virt-tail(1)>, L<virt-tar-out(1)>,
L<http://libguestfs.org/>.

=head1 АВТОР

Richard W.M. Jones L<http://people.redhat.com/~rjones/>

=head1 АВТОРСЬКІ ПРАВА

© Red Hat Inc., 2010–2012

