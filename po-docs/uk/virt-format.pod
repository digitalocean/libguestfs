
=head1 НАЗВА

virt-format — витирання і створення порожнього диска

=head1 КОРОТКИЙ ОПИС

 virt-format [--параметри] -a диск.img [-a диск.img ...]

=head1 ОПИС

Virt-format отримує назву наявного файла на диску (або розділу, логічного
тому основної системи), B<витирає з нього усі дані> і форматує його як
порожній диск. Якщо потрібно, програма може створити таблиці розділів,
порожні файлові системи, логічні томи тощо.

Для створення диска, що містить дані, краще скористатися
L<virt-make-fs(1)>. Якщо ви створюєте порожній диск для використання у
L<guestfish(1)>, вам слід скористатися для цього параметром I<-N> guestfish.

Зазвичай, програмою слід користуватися десь так:

 virt-format -a диск.qcow

або так:

 virt-format -a /dev/VG/LV

F<disk.qcow> або F</dev/VG/LV> має вже існувати. B<У результаті виконання
команд усі дані на вказаних дисках буде витерто>. Ці команди створять єдиний
порожній розділ, який займатиме увесь диск, без файлових систем на ньому.

Додатковими параметрами команди можна скористатися для керування створенням
розділів, файлових систем тощо. Найрозповсюдженішим є використання таких
параметрів:

=over 4

=item B<--filesystem=[ext3|ntfs|vfat|...]>

Створити на розділі порожню файлову систему (C<ext3>, C<ntfs> тощо).

=item B<--lvm[=/dev/VG/LV]>

Створити логічний том Linux LVM2 на диску. Якщо використовується разом із
I<--filesystem>, на логічному томі створюється файлова система.

=back

Щоб дізнатися більше про ці та інші параметри, ознайомтеся із розділом
L</ПАРАМЕТРИ> нижче.

Зазвичай, формат диска визначається автоматично, але ви також можете вказати
його за допомогою параметра I<--format>. У випадках, коли ви вважаєте
ненадійним наявний вміст диска, радимо скористатися цим параметром для
знищення можливого коду зловмисників.

=head1 ПАРАМЕТРИ

=over 4

=item B<--help>

Показати коротку довідку.

=item B<-a> файл

=item B<--add> файл

Додати I<файл>, який має бути образом диска, розділом основної системи,
логічним томом, зовнішнім диском USB тощо.

Формат образу диска визначається автоматично. Щоб перевизначити його і
примусово використати певний формат, скористайтеся параметром
I<--format=..>.

B<Всі поточні дані на диску буде витерто.>

=item B<-a> адреса

=item B<--add> адреса

Додати віддалений диск. Див. L<guestfish(1)/ДОДАВАННЯ ВІДДАЛЕНОГО СХОВИЩА>.

=item B<--filesystem=ext3|ntfs|vfat|...>

Створити порожню файлову систему вказаного типу. У libguestfs передбачено
підтримку багатьох файлових систем.

=item B<--filesystem=none>

Не створювати файлової системи. Типова поведінка.

=item B<--format=raw|qcow2|..>

=item B<--format>

Типовим значенням для параметра I<-a> є автоматичне визначення формату
образу диска. Використання цього параметра примусово визначає значення
параметрів I<-a> формату диска у наступному рядку команди. Використання
параметра I<--format> без аргументу перемикає програму у режим автоматичного
визначення у наступних параметрах I<-a>.

Приклад:

 virt-format --format=raw -a диск.img

примусове встановлення формату без обробки (без автоматичного визначення)
для F<disk.img>.

 virt-format --format=raw -a диск.img --format -a ще_один_диск.img

примусове встановлення формату без обробки (без автоматичного визначення)
для F<diskimg> і повернення до автоматичного визначення для F<another.img>.

Якщо ви користуєтеся ненадійними образами гостьових систем у необробленому
форматі, вам слід скористатися цим параметром для визначення формату
диска. Таким чином можна уникнути можливих проблем з захистом для
сформованих зловмисниками гостьових систем (CVE-2010-3851).

=item B<--label=>МІТКА

Встановити мітку файлової системи.

=item B<--lvm=/dev/I<VG>/I<LV>>

Створити логічний том LVM2 Linux із назвою F</dev/I<VG>/I<LV>>. Ви можете
змінити назву групи томів і логічного тому.

=item B<--lvm>

Створити логічний том Linux LVM2 на із типовою назвою (F</dev/VG/LV>).

=item B<--lvm=none>

Не створювати логічного тому. Типове поведінка.

=item B<--partition>

Створити розділ MBR або GPT для усього диска. MBR буде вибрано, якщо розмір
диска E<lt> 2 ТБ, GPT — якщо E<ge> 2 ТБ.

Типове значення.

=item B<--partition=gpt>

Створити розділ GPT.

=item B<--partition=mbr>

Створити розділ MBR.

=item B<--partition=none>

Не створювати таблиці розділів. Зауважте, що такі диски можуть бути
невидимими для Windows.

=item B<-v>

=item B<--verbose>

Увімкнути докладний показ повідомлень з метою діагностики.

=item B<-V>

=item B<--version>

Показати дані щодо версії і завершити роботу.

=item B<--wipe>

У поточній версії virt-format не витирає дані з диска (оскільки ця дія є
надто тривалою). Тому, якщо на диску є дані, їх буде лише приховано і
частково перезаписано virt-format. Ймовірно, такі дані можна відновити за
допомогою інструментів для редагування дисків.

Якщо ви скористаєтеся цим параметром, virt-format перезапише нулями увесь
диск, щоб попередньо записані дані не можна було відновити.

=item B<-x>

Увімкнути трасування викликів програмного інтерфейсу libguestfs.

=back

=head1 СТАН ВИХОДУ

Ця програма повертає C<0>, якщо роботу виконано успішно, і C<1>, якщо
сталися помилки.

=head1 ТАКОЖ ПЕРЕГЛЯНЬТЕ

L<guestfs(3)>, L<guestfish(1)>, L<virt-filesystems(1)>, L<virt-make-fs(1)>,
L<virt-rescue(1)>, L<virt-resize(1)>, L<http://libguestfs.org/>.

=head1 АВТОР

Richard W.M. Jones L<http://people.redhat.com/~rjones/>

=head1 АВТОРСЬКІ ПРАВА

© Red Hat Inc., 2012

