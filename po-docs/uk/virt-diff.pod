
=head1 НАЗВА

virt-diff -- показ відмінностей між файлами у двох віртуальних машинах

=head1 КОРОТКИЙ ОПИС

 virt-diff [--параметри] -d домен1 -D домен2

 virt-diff [--параметри] -a диск1.img [-a ...] -A диск2.img [-A ...]

=head1 ОПИС

C<virt-diff> показує список відмінностей між файлами у двох віртуальних
машинах або на двох образах дисків. Звичайним випадком застосування є показ
змін у віртуальній машині після певного проміжку роботи: можна зробити
знімок, запустити віртуальну машину, а потім скористатися цією програмою для
перегляду змін, які відрізняють новий стан віртуальної машини і старий її
знімок.

Ця програма виявить відмінності у назвах файлів, розмірах файлів,
контрольних сумах, розширених атрибутах, вмісті файлів та інших даних з
віртуальної машини або образу диска. Втім, вона B<не> шукатиме відмінності у
завантажувачі, невикористаному місці між розділами або всередині файлових
систем, «прихованих» секторах тощо. Іншими словами, це не інструмент
вивчення питань безпеки або ретельного дослідження.

Щоб вказати дві гостьові системи, вам слід скористатися параметром I<-a> або
I<-d> для першої гостьової системи і параметром I<-A> або I<-D> для
другої. Типовий варіант команди:

 virt-diff -a старий.img -A новий.img

або з використанням відомих libvirt назв:

 virt-diff -d oldguest -D newguest

=head1 ПАРАМЕТРИ

=over 4

=item B<--help>

Показати коротку довідку.

=item B<-a> файл

=item B<--add> файл

Додати I<файл>, який має бути образом диска з першої віртуальної
машини. Якщо у віртуальній машині декілька блокових пристроїв, вам слід
вказати їх усі за допомогою окремих записів параметра I<-a>.

Формат образу диска визначається автоматично. Щоб перевизначити його і
примусово використати певний формат, скористайтеся параметром
I<--format=..>.

=item B<-a> адреса

=item B<--add> адреса

Додати віддалений диск. Див. L<guestfish(1)/ДОДАВАННЯ ВІДДАЛЕНОГО СХОВИЩА>.

=item B<--all>

Те саме, що I<--extra-stats> I<--times> I<--uids> I<--xattrs>.

=item B<--atime>

Типово, зміни у часі доступу до файла ігноруватимуться, оскільки вони,
зазвичай, не варті уваги. Якщо буде використано цей параметр, програма
показуватиме і відмінності у значеннях часу доступу.

=item B<-A> файл

=item B<-A> адреса

Додати образ диска із іншої віртуальної машини.

=item B<--checksum>

=item B<--checksum=crc|md5|sha1|sha224|sha256|sha384|sha512>

Використовувати контрольну суму вмісту файла для визначення випадків зміни
вмісту файла.

Без аргументів, типово, буде використано I<md5>. За допомогою аргументу ви
можете вказати тип контрольної суми, яку буде використано. Якщо прапорець не
вказано, для визначення того, чи було змінено файл, буде використано часові
параметри та розмір файла.

=item B<-c> адреса

=item B<--connect> адреса

Якщо використовується libvirt, встановити з’єднання з вказаним I<URI>. Якщо
пропущено, з’єднання буде встановлено з типовим гіпервізором libvirt.

Якщо вказати блокові пристрої гостьових систем безпосередньо (I<-a>),
libvirt не буде використовуватися взагалі.

=item B<--csv>

Вивести результати до формату CSV (записів, відокремлених комами). Дані у
цьому форматі можна просто імпортувати до баз даних і електронних
таблиць. Втім, варто ознайомитися із розділом L</НОТАТКА ЩОДО ФОРМАТУ CSV>,
наведеним нижче.

=item B<--dir-links>

The default is to ignore changes in the number of links in directory
entries, since those are unlikely to be interesting.  Using this flag shows
changes to the nlink field of directories.

=item B<--dir-times>

Типово, програма ігнорує зміну часових параметрів для записів каталогів,
оскільки така зміна навряд чи є цікавою для користувача. За допомогою цього
прапорця ви можете наказати програмі показувати зміни у полях часових
параметрів каталогів.

=item B<-d> гість

=item B<--domain> гість

Додати всі диски з вказаної гостьової системи libvirt як першої гостьової
системи. UUID доменів можна використовувати замість назв.

=item B<-D> гість

Додати всі диски з вказаної гостьової системи libvirt як другої гостьової
системи. UUID доменів можна використовувати замість назв.

=item B<--echo-keys>

Типово, якщо virt-diff попросить вас ввести ключ або пароль, програма не
відтворюватиме введені символи на екрані. Якщо ви не боїтеся
TEMPEST-нападів, або у вашій кімнаті нікого, окрім вас, немає, ви можете
скористатися цим прапорцем, щоб бачити, які саме символи ви вводите.

=item B<--extra-stats>

Показати додаткові дані.

=item B<--format=raw|qcow2|..>

=item B<--format>

Типовим значенням для параметра I<-a>/I<-A> є автоматичне визначення формату
образу диска. Використання цього параметра примусово визначає значення
параметрів I<-a>/I<-A> формату диска у наступному рядку
команди. Використання параметра I<--format> без аргументу перемикає програму
у режим автоматичного визначення у наступних параметрах I<-a>/I<-A>.

Приклад:

 virt-diff --format=raw -a disk.img [...]

примусове встановлення формату без обробки (без автоматичного визначення)
для F<disk.img>.

 virt-diff --format=raw -a disk.img --format -a another.img [...]

примусове встановлення формату без обробки (без автоматичного визначення)
для F<diskimg> і повернення до автоматичного визначення для F<another.img>.

Якщо ви користуєтеся ненадійними образами гостьових систем у необробленому
форматі, вам слід скористатися цим параметром для визначення формату
диска. Таким чином можна уникнути можливих проблем з захистом для
сформованих зловмисниками гостьових систем (CVE-2010-3851).

=item B<-h>

=item B<--human-readable>

Показати розміри файлів у зручному для читання форматі.

=item B<--key> SELECTOR

Specify a key for LUKS, to automatically open a LUKS device when using the
inspection.  C<SELECTOR> can be in one of the following formats:

=over 4

=item B<--key> C<DEVICE>:key:KEY_STRING

Use the specified C<KEY_STRING> as passphrase.

=item B<--key> C<DEVICE>:file:FILENAME

Read the passphrase from F<FILENAME>.

=back

=item B<--keys-from-stdin>

Прочитати параметри ключа або пароля із джерела стандартного
введення. Типово програма намагається читати паролі від користувача
відкриттям F</dev/tty>.

=item B<--times>

Показати поля часу.

=item B<--time-days>

Показувати поля часу у форматі днів до поточного (від’ємні значення для днів
у майбутньому).

Зауважте, що C<0> у виведених даних означає «менше 1 одного дня до поточного
моменту» або «вік файла — від 0 до 86399 секунд».

=item B<--time-relative>

Показувати поля часу у форматі секунд до поточного моменту (від’ємні
значення для часу у майбутньому).

=item B<--time-t>

Показувати поля часу у форматі секунд з моменту початку епохи UNIX.

=item B<--uids>

Показати поля UID і GID.

=item B<-v>

=item B<--verbose>

Увімкнути докладний показ повідомлень з метою діагностики.

=item B<-V>

=item B<--version>

Показати дані щодо версії і завершити роботу.

=item B<-x>

Увімкнути трасування викликів програмного інтерфейсу libguestfs.

=item B<--xattrs>

Показати розширені атрибути.

=back

=head1 ЗАУВАЖЕННЯ ЩОДО ФОРМАТУ CSV

Формат значень, які відокремлено комами (CSV), є оманливо простим. Може
I<здатися>, що його просто обробляти, але насправді це зовсім не так.

Міф: достатньо розділити поля за комами. Реальність: поділ комами I<не>
працює у надійний спосіб. Ось приклад із двома стовпчиками:

 "foo,bar",baz

Міф: слід читати файл за рядками, один рядок за одну операцію
читання. Реальність: читання за рядками I<не> працює у надійний спосіб. Ось
приклад із одним рядком:

 "foo
 bar",baz

Для скриптів командної оболонки скористайтеся C<csvtool>
(L<https://github.com/Chris00/ocaml-csv> також є серед пакунків основних
дистрибутивів Linux).

Для інших мов програмування використовуйте бібліотеку для обробки даних CSV
(наприклад, C<Text::CSV> для Perl або вбудовану бібліотеку csv Python).

У більшості електронних таблиць та баз даних передбачено можливості
безпосереднього імпортування даних CSV.

=head1 СТАН ВИХОДУ

Ця програма повертає значення 0 у разі успішного завершення і ненульове
значення, якщо сталася помилка.

=head1 ТАКОЖ ПЕРЕГЛЯНЬТЕ

L<guestfs(3)>, L<guestfish(1)>, L<virt-cat(1)>, L<virt-copy-out(1)>,
L<virt-ls(1)>, L<virt-tar-out(1)>, L<http://libguestfs.org/>.

=head1 АВТОР

Richard W.M. Jones L<http://people.redhat.com/~rjones/>

=head1 АВТОРСЬКІ ПРАВА

Copyright (C) 2009-2019 Red Hat Inc.

