.\" Automatically generated by Podwrapper::Man 1.38.3 (Pod::Simple 3.35)
.\"
.\" Standard preamble:
.\" ========================================================================
.de Sp \" Vertical space (when we can't use .PP)
.if t .sp .5v
.if n .sp
..
.de Vb \" Begin verbatim text
.ft CW
.nf
.ne \\$1
..
.de Ve \" End verbatim text
.ft R
.fi
..
.\" Set up some character translations and predefined strings.  \*(-- will
.\" give an unbreakable dash, \*(PI will give pi, \*(L" will give a left
.\" double quote, and \*(R" will give a right double quote.  \*(C+ will
.\" give a nicer C++.  Capital omega is used to do unbreakable dashes and
.\" therefore won't be available.  \*(C` and \*(C' expand to `' in nroff,
.\" nothing in troff, for use with C<>.
.tr \(*W-
.ds C+ C\v'-.1v'\h'-1p'\s-2+\h'-1p'+\s0\v'.1v'\h'-1p'
.ie n \{\
.    ds -- \(*W-
.    ds PI pi
.    if (\n(.H=4u)&(1m=24u) .ds -- \(*W\h'-12u'\(*W\h'-12u'-\" diablo 10 pitch
.    if (\n(.H=4u)&(1m=20u) .ds -- \(*W\h'-12u'\(*W\h'-8u'-\"  diablo 12 pitch
.    ds L" ""
.    ds R" ""
.    ds C` ""
.    ds C' ""
'br\}
.el\{\
.    ds -- \|\(em\|
.    ds PI \(*p
.    ds L" ``
.    ds R" ''
.    ds C`
.    ds C'
'br\}
.\"
.\" Escape single quotes in literal strings from groff's Unicode transform.
.ie \n(.g .ds Aq \(aq
.el       .ds Aq '
.\"
.\" If the F register is >0, we'll generate index entries on stderr for
.\" titles (.TH), headers (.SH), subsections (.SS), items (.Ip), and index
.\" entries marked with X<> in POD.  Of course, you'll have to process the
.\" output yourself in some meaningful fashion.
.\"
.\" Avoid warning from groff about undefined register 'F'.
.de IX
..
.nr rF 0
.if \n(.g .if rF .nr rF 1
.if (\n(rF:(\n(.g==0)) \{\
.    if \nF \{\
.        de IX
.        tm Index:\\$1\t\\n%\t"\\$2"
..
.        if !\nF==2 \{\
.            nr % 0
.            nr F 2
.        \}
.    \}
.\}
.rr rF
.\" ========================================================================
.\"
.IX Title "virt-df 1"
.TH virt-df 1 "2018-06-29" "libguestfs-1.38.3" "Virtualization Support"
.\" For nroff, turn off justification.  Always turn off hyphenation; it makes
.\" way too many mistakes in technical documents.
.if n .ad l
.nh
.SH "НАЗВА"
.IX Header "НАЗВА"
virt-df — програма для показу даних щодо вільного місця на віртуальних
файлових системах
.SH "КОРОТКИЙ ОПИС"
.IX Header "КОРОТКИЙ ОПИС"
Всі гостьові системи:
.PP
.Vb 1
\& virt\-df [\-\-параметри]
.Ve
.PP
Окрема гостьова система:
.PP
.Vb 1
\& virt\-df [\-\-параметри] \-d назва_домену
\&
\& virt\-df [\-\-параметри] \-a диск.img [\-a диск.img ...]
.Ve
.PP
Старий стиль:
.PP
.Vb 1
\& virt\-df [\-\-параметри] назва_домену
\&
\& virt\-df [\-\-параметри] диск.img [диск.img ...]
.Ve
.SH "ОПИС"
.IX Header "ОПИС"
\&\f(CW\*(C`virt\-df\*(C'\fR — інструмент командного рядка для показу вільного місця у
файлових системах віртуальної машини. На відміну від інших інструментів, він
не показує розмір диску, який отримано для віртуальної машини, а може
зазирнути всередину образу диска і визначити, скільки саме місця насправді
використовується.
.PP
Якщо команду віддано без аргументів \fI\-a\fR або \fI\-d\fR, \f(CW\*(C`virt\-df\*(C'\fR отримає від
libvirt список активних і неактивних гостьових систем і виконає дію типу
\&\f(CW\*(C`df\*(C'\fR для кожного з них послідовно, а потім виведе результати.
.PP
Якщо вказано якийсь із аргументів, \fI\-a\fR або \fI\-d\fR, \f(CW\*(C`virt\-df\*(C'\fR виконає дію
типу \f(CW\*(C`df\*(C'\fR або над окремим вказаним за назвою доменом libvirt, або над
образами дисків, вказаних у форматі списку у командному рядку (усі вони
мають належати до однієї віртуальної машини).  \fBУ цьому режимі (з
аргументами), \f(CB\*(C`virt\-df\*(C'\fB працюватиме для однієї гостьової системи\fR. Якщо ви
хочете обробити декілька гостьових систем, вам слід викликати \f(CW\*(C`virt\-df\*(C'\fR
декілька разів.
.PP
Скористайтеся параметром \fI\-\-csv\fR, щоб отримати формат у вигляді даних, які
може бути просто оброблено у інших програмах. Інші параметри подібні  до
параметрів стандартної команди \fBdf\fR\|(1).
.SH "ПРИКЛАДИ"
.IX Header "ПРИКЛАДИ"
Показати використання диска для окремої гостьової системи libvirt, яка
називається \f(CW\*(C`F14x64\*(C'\fR. Зробити виведені дані зручними для читання:
.PP
.Vb 4
\& # virt\-df \-d F14x64 \-h
\& Filesystem                       Size     Used  Available  Use%
\& F14x64:/dev/sda1                 484M      66M       393M   14%
\& F14x64:/dev/vg_f13x64/lv_root    7.4G     3.4G       4.0G   46%
.Ve
.PP
Показати дані щодо використання диска у файлі образу диска з назвою
\&\fItest.img\fR:
.PP
.Vb 3
\& $ virt\-df \-a test1.img
\& Filesystem                  1K\-blocks     Used  Available  Use%
\& test1.img:/dev/sda1             99099     1551      92432    2%
.Ve
.PP
Якщо у одній гостьовій системі декілька дисків, скористайтеся параметром
\&\fI\-a\fR декілька разів. Для кожного з додаткових дисків буде показано символ
«плюс» (\f(CW\*(C`+\*(C'\fR). \fBЗауваження: не робіть цього для непов'язаних дисків
гостьових систем.\fR
.PP
.Vb 5
\& $ virt\-df \-a Win7x32TwoDisks\-a \-a Win7x32TwoDisks\-b 
\& Файлова система              1K\-блоків    Вик.   Доступно %Вик.
\& Win7x32TwoDisks\-a+:/dev/sda1    102396   24712      77684   25%
\& Win7x32TwoDisks\-a+:/dev/sda2  12478460 7403416    5075044   60%
\& Win7x32TwoDisks\-a+:/dev/sdb1    521212   55728     465484   11%
.Ve
.SH "ПАРАМЕТРИ"
.IX Header "ПАРАМЕТРИ"
.IP "\fB\-\-help\fR" 4
.IX Item "--help"
Показати коротку довідку.
.IP "\fB\-a\fR ФАЙЛ" 4
.IX Item "-a ФАЙЛ"
.PD 0
.IP "\fB\-\-add\fR ФАЙЛ" 4
.IX Item "--add ФАЙЛ"
.PD
Додати \fIФАЙЛ\fR, який має бути образом диска з віртуальної машини. Якщо у
віртуальній машині декілька блокових пристроїв, вам слід вказати їх усі за
допомогою окремих записів параметра \fI\-a\fR.
.Sp
Формат образу диска визначається автоматично. Щоб перевизначити його і
примусово використати певний формат, скористайтеся параметром
\&\fI\-\-format=..\fR.
.IP "\fB\-a\fR адреса" 4
.IX Item "-a адреса"
.PD 0
.IP "\fB\-\-add\fR адреса" 4
.IX Item "--add адреса"
.PD
Додати віддалений диск. Див. \*(L"ДОДАВАННЯ ВІДДАЛЕНОГО СХОВИЩА\*(R" in \fBguestfish\fR\|(1).
.IP "\fB\-c\fR адреса" 4
.IX Item "-c адреса"
.PD 0
.IP "\fB\-\-connect\fR адреса" 4
.IX Item "--connect адреса"
.PD
Якщо використовується libvirt, встановити з’єднання з вказаним \fI\s-1URI\s0\fR. Якщо
пропущено, з’єднання буде встановлено з типовим гіпервізором libvirt.
.Sp
Якщо вказати блокові пристрої гостьових систем безпосередньо (\fI\-a\fR),
libvirt не буде використовуватися взагалі.
.IP "\fB\-\-csv\fR" 4
.IX Item "--csv"
Вивести результати до формату \s-1CSV\s0 (записів, відокремлених комами). Дані у
цьому форматі можна просто імпортувати до баз даних і електронних
таблиць. Втім, варто ознайомитися із розділом \*(L"НОТАТКА ЩОДО ФОРМАТУ \s-1CSV\*(R"\s0,
наведеним нижче.
.IP "\fB\-d\fR гість" 4
.IX Item "-d гість"
.PD 0
.IP "\fB\-\-domain\fR гість" 4
.IX Item "--domain гість"
.PD
Додати всі диски з вказаної гостьової системи libvirt. \s-1UUID\s0 доменів можна
використовувати замість назв.
.IP "\fB\-\-format=raw|qcow2|..\fR" 4
.IX Item "--format=raw|qcow2|.."
.PD 0
.IP "\fB\-\-format\fR" 4
.IX Item "--format"
.PD
Типовим значенням для параметра \fI\-a\fR є автоматичне визначення формату
образу диска. Використання цього параметра примусово визначає значення
параметрів \fI\-a\fR формату диска у наступному рядку команди. Використання
параметра \fI\-\-format\fR без аргументу перемикає програму у режим автоматичного
визначення у наступних параметрах \fI\-a\fR.
.Sp
Приклад:
.Sp
.Vb 1
\& virt\-df \-\-format=raw \-a disk.img
.Ve
.Sp
примусове встановлення формату без обробки (без автоматичного визначення)
для \fIdisk.img\fR.
.Sp
.Vb 1
\& virt\-df \-\-format=raw \-a disk.img \-\-format \-a another.img
.Ve
.Sp
примусове встановлення формату без обробки (без автоматичного визначення)
для \fIdiskimg\fR і повернення до автоматичного визначення для \fIanother.img\fR.
.Sp
Якщо ви користуєтеся ненадійними образами гостьових систем у необробленому
форматі, вам слід скористатися цим параметром для визначення формату
диска. Таким чином можна уникнути можливих проблем з захистом для
сформованих зловмисниками гостьових систем (\s-1CVE\-2010\-3851\s0).
.IP "\fB\-h\fR" 4
.IX Item "-h"
.PD 0
.IP "\fB\-\-human\-readable\fR" 4
.IX Item "--human-readable"
.PD
Вивести дані щодо розмірів у зручному для читання форматі.
.Sp
Параметри \fI\-h\fR і \fI\-\-csv\fR не можна використовувати одночасно.
.IP "\fB\-i\fR" 4
.IX Item "-i"
.PD 0
.IP "\fB\-\-inodes\fR" 4
.IX Item "--inodes"
.PD
Вивести дані щодо inode замість даних щодо блоків.
.IP "\fB\-\-one\-per\-guest\fR" 4
.IX Item "--one-per-guest"
З версії libguestfs 1.22 ця поведінка є типовою. Використання цього
параметра не має жодних наслідків. Параметр збережено лише з міркувань
зворотної сумісності із давніми скриптами.
.IP "\fB\-P\fR кількість_потоків" 4
.IX Item "-P кількість_потоків"
З версії libguestfs 1.22 у virt-df передбачено обробку у декілька потоків і
паралельне вивчення гостьових систем. Типово кількість потоків виконання, що
використовуються, вибирається на основі доступного обсягу вільної пам’яті на
час запуску virt-df. Ви можете примусово наказати virt-df використовувати не
більше за \f(CW\*(C`кількість_потоків\*(C'\fR за допомогою параметра \fI\-P\fR.
.Sp
Зауважте, що \fI\-P 0\fR означає автоматичне визначення, а \fI\-P 1\fR означає
використання одного потоку виконання.
.IP "\fB\-\-uuid\fR" 4
.IX Item "--uuid"
Виводити \s-1UUID\s0 замість назв. Корисно для слідкування за гостьовою системою,
навіть після перенесення або перейменування, або якщо дві гостьові системи
мають однакові назви.
.Sp
Зауважте, що \s-1UUID\s0 матимуть лише ті домени, які ми отримуємо з libvirt. Для
образів дисків ми виводимо назви образів дисків, навіть якщо вказано цей
параметр.
.IP "\fB\-v\fR" 4
.IX Item "-v"
.PD 0
.IP "\fB\-\-verbose\fR" 4
.IX Item "--verbose"
.PD
Увімкнути докладний показ повідомлень з метою діагностики.
.IP "\fB\-V\fR" 4
.IX Item "-V"
.PD 0
.IP "\fB\-\-version\fR" 4
.IX Item "--version"
.PD
Показати дані щодо версії і завершити роботу.
.IP "\fB\-x\fR" 4
.IX Item "-x"
Увімкнути трасування викликів програмного інтерфейсу libguestfs.
.SH "ЧИСЛОВІ ДАНІ ЩОДО STATVFS"
.IX Header "ЧИСЛОВІ ДАНІ ЩОДО STATVFS"
\&\f(CW\*(C`virt\-df\*(C'\fR (і \fBdf\fR\|(1)) отримує інформацію, виконуючи системний виклик
\&\fBstatvfs\fR\|(3). Ви можете отримати ті самі дані безпосередньо або від
основної системи (за допомогою libguestfs), або з самої гостьової системи:
.IP "З основної системи" 4
.IX Item "З основної системи"
Віддайте таку команду:
.Sp
.Vb 1
\& guestfish \-\-ro \-d НАЗВА_ГОСТЬОВОЇ_СИСТЕМИ \-i statvfs /
.Ve
.Sp
(замініть \fI/\fR, щоб переглянути статистику для інших файлових систем).
.IP "З гостьової системи" 4
.IX Item "З гостьової системи"
Віддайте таку команду:
.Sp
.Vb 1
\& python \-c \*(Aqimport os; s = os.statvfs ("/"); print s\*(Aq
.Ve
.Sp
(замініть \fI/\fR, щоб переглянути статистику для інших файлових систем).
.SH "ЗАУВАЖЕННЯ ЩОДО ФОРМАТУ CSV"
.IX Header "ЗАУВАЖЕННЯ ЩОДО ФОРМАТУ CSV"
Формат значень, які відокремлено комами (\s-1CSV\s0), є оманливо простим. Може
\&\fIздатися\fR, що його просто обробляти, але насправді це зовсім не так.
.PP
Міф: достатньо розділити поля за комами. Реальність: поділ комами \fIне\fR
працює у надійний спосіб. Ось приклад із двома стовпчиками:
.PP
.Vb 1
\& "foo,bar",baz
.Ve
.PP
Міф: слід читати файл за рядками, один рядок за одну операцію
читання. Реальність: читання за рядками \fIне\fR працює у надійний спосіб. Ось
приклад із одним рядком:
.PP
.Vb 2
\& "foo
\& bar",baz
.Ve
.PP
Для скриптів командної оболонки скористайтеся \f(CW\*(C`csvtool\*(C'\fR
(https://github.com/Chris00/ocaml\-csv також є серед пакунків основних
дистрибутивів Linux).
.PP
Для інших мов програмування використовуйте бібліотеку для обробки даних \s-1CSV\s0
(наприклад, \f(CW\*(C`Text::CSV\*(C'\fR для Perl або вбудовану бібліотеку csv Python).
.PP
У більшості електронних таблиць та баз даних передбачено можливості
безпосереднього імпортування даних \s-1CSV.\s0
.SH "СТАН ВИХОДУ"
.IX Header "СТАН ВИХОДУ"
Ця програма повертає значення 0 у разі успішного завершення і ненульове
значення, якщо сталася помилка.
.SH "ТАКОЖ ПЕРЕГЛЯНЬТЕ"
.IX Header "ТАКОЖ ПЕРЕГЛЯНЬТЕ"
\&\fBdf\fR\|(1), \fBguestfs\fR\|(3), \fBguestfish\fR\|(1), \fBvirt\-filesystems\fR\|(1),
http://libguestfs.org/.
.SH "АВТОР"
.IX Header "АВТОР"
Richard W.M. Jones http://people.redhat.com/~rjones/
.SH "АВТОРСЬКІ ПРАВА"
.IX Header "АВТОРСЬКІ ПРАВА"
Copyright (C) 2009\-2018 Red Hat Inc.
.SH "LICENSE"
.IX Header "LICENSE"
.SH "BUGS"
.IX Header "BUGS"
To get a list of bugs against libguestfs, use this link:
https://bugzilla.redhat.com/buglist.cgi?component=libguestfs&product=Virtualization+Tools
.PP
To report a new bug against libguestfs, use this link:
https://bugzilla.redhat.com/enter_bug.cgi?component=libguestfs&product=Virtualization+Tools
.PP
When reporting a bug, please supply:
.IP "\(bu" 4
The version of libguestfs.
.IP "\(bu" 4
Where you got libguestfs (eg. which Linux distro, compiled from source, etc)
.IP "\(bu" 4
Describe the bug accurately and give a way to reproduce it.
.IP "\(bu" 4
Run \fBlibguestfs\-test\-tool\fR\|(1) and paste the \fBcomplete, unedited\fR
output into the bug report.
