From: Hilko Bengen <bengen@debian.org>
Date: Thu, 20 Oct 2011 01:09:11 +0200
Subject: out-of-tree build: fixed bindtests and inspector

---
 haskell/run-bindtests |    3 ++-
 inspector/Makefile.am |    2 +-
 java/run-bindtests    |    2 +-
 ocaml/run-bindtests   |    2 +-
 perl/run-bindtests    |    2 +-
 python/run-bindtests  |    5 +++--
 ruby/run-bindtests    |    2 +-
 7 files changed, 10 insertions(+), 8 deletions(-)

diff --git a/haskell/run-bindtests b/haskell/run-bindtests
index f9ea434..85b8048 100755
--- a/haskell/run-bindtests
+++ b/haskell/run-bindtests
@@ -19,4 +19,5 @@
 set -e
 
 ./Bindtests > bindtests.tmp
-diff -u ../bindtests bindtests.tmp
+diff -u ${srcdir}/../bindtests bindtests.tmp
+
diff --git a/inspector/Makefile.am b/inspector/Makefile.am
index 03e13d8..2389dbd 100644
--- a/inspector/Makefile.am
+++ b/inspector/Makefile.am
@@ -90,7 +90,7 @@ stamp-virt-inspector.pod: virt-inspector.pod
 if HAVE_XMLLINT
 
 TESTS = $(EXAMPLE_XML)
-TESTS_ENVIRONMENT = $(XMLLINT) --noout --relaxng virt-inspector.rng
+TESTS_ENVIRONMENT = $(XMLLINT) --noout --relaxng $(srcdir)/virt-inspector.rng
 
 endif
 
diff --git a/java/run-bindtests b/java/run-bindtests
index b80c4dc..7e6eb7f 100755
--- a/java/run-bindtests
+++ b/java/run-bindtests
@@ -19,4 +19,4 @@
 set -e
 
 $JAVA -Djava.library.path=.libs Bindtests > bindtests.tmp
-diff -u ../bindtests bindtests.tmp
+diff -u ${srcdir}/../bindtests bindtests.tmp
diff --git a/ocaml/run-bindtests b/ocaml/run-bindtests
index 5200fec..d9a3047 100755
--- a/ocaml/run-bindtests
+++ b/ocaml/run-bindtests
@@ -19,4 +19,4 @@
 set -e
 
 ./bindtests > bindtests.tmp
-diff -u ../bindtests bindtests.tmp
+diff -u ${srcdir}/../bindtests bindtests.tmp
diff --git a/perl/run-bindtests b/perl/run-bindtests
index d9d1ca3..f9cf231 100755
--- a/perl/run-bindtests
+++ b/perl/run-bindtests
@@ -20,4 +20,4 @@ set -e
 
 export PERL5LIB=$(pwd)/blib/lib:$(pwd)/blib/arch
 perl bindtests.pl > bindtests.tmp
-diff -u ../bindtests bindtests.tmp
+diff -u ${srcdir}/../bindtests bindtests.tmp
diff --git a/python/run-bindtests b/python/run-bindtests
index 17448c3..070c90c 100755
--- a/python/run-bindtests
+++ b/python/run-bindtests
@@ -18,5 +18,6 @@
 
 set -e
 
-python bindtests.py > bindtests.tmp
-diff -u ../bindtests bindtests.tmp
+python ${srcdir}/bindtests.py > bindtests.tmp
+diff -u ${srcdir}/../bindtests bindtests.tmp
+
diff --git a/ruby/run-bindtests b/ruby/run-bindtests
index 803d4c6..3bfa226 100755
--- a/ruby/run-bindtests
+++ b/ruby/run-bindtests
@@ -19,4 +19,4 @@
 set -e
 
 ruby -Ilib -Iext/guestfs bindtests.rb > bindtests.tmp
-diff -u ../bindtests bindtests.tmp
+diff -u ${srcdir}/../bindtests bindtests.tmp
-- 
