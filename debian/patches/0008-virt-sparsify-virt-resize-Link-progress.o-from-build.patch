From: Hilko Bengen <bengen@debian.org>
Date: Sat, 22 Oct 2011 01:05:05 +0200
Subject: virt-sparsify, virt-resize: Link progress.o from build tree.

---
 resize/Makefile.am   |    2 +-
 sparsify/Makefile.am |    4 ++--
 2 files changed, 3 insertions(+), 3 deletions(-)

diff --git a/resize/Makefile.am b/resize/Makefile.am
index 48240d1..ce9186f 100644
--- a/resize/Makefile.am
+++ b/resize/Makefile.am
@@ -39,7 +39,7 @@ SOURCES += \
 
 # Note this list must be in dependency order.
 OBJECTS = \
-	../fish/guestfish-progress.o \
+	$(top_builddir)/fish/guestfish-progress.o \
 	progress_c.o \
 	utils.cmx \
 	progress.cmx \
diff --git a/sparsify/Makefile.am b/sparsify/Makefile.am
index 8d1ddc4..b33e121 100644
--- a/sparsify/Makefile.am
+++ b/sparsify/Makefile.am
@@ -38,7 +38,7 @@ SOURCES += \
 
 # Note this list must be in dependency order.
 OBJECTS = \
-	../fish/guestfish-progress.o \
+	$(top_builddir)/fish/guestfish-progress.o \
 	progress_c.o \
 	utils.cmx \
 	progress.cmx \
@@ -49,7 +49,7 @@ bin_SCRIPTS = virt-sparsify
 # -I $(top_builddir)/src/.libs is a hack which forces corresponding -L
 # option to be passed to gcc, so we don't try linking against an
 # installed copy of libguestfs.
-OCAMLPACKAGES = -package unix -I $(top_builddir)/src/.libs -I ../ocaml
+OCAMLPACKAGES = -package unix -I $(top_builddir)/src/.libs -I $(top_builddir)/ocaml
 
 OCAMLCFLAGS = -g -warn-error CDEFLMPSUVYZX $(OCAMLPACKAGES)
 OCAMLOPTFLAGS = $(OCAMLCFLAGS)
-- 
