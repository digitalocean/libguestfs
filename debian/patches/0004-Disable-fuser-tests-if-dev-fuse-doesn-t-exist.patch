From: =?UTF-8?q?Guido=20G=C3=BCnther?= <agx@sigxcpu.org>
Date: Sun, 21 Feb 2010 19:29:30 +0100
Subject: [PATCH] Disable fuser tests if /dev/fuse doesn't exist

e.g. when running in a chroot.
---
 fuse/test-fuse.sh |    5 +++++
 1 files changed, 5 insertions(+), 0 deletions(-)

diff --git a/fuse/test-fuse.sh b/fuse/test-fuse.sh
index 2b4d0d7..b0b4a1e 100755
--- a/fuse/test-fuse.sh
+++ b/fuse/test-fuse.sh
@@ -45,6 +45,11 @@ if [ ! -x "$guestfish" -o ! -x "$guestmount" ]; then
     exit 1
 fi
 
+if [ ! -c /dev/fuser ]; then
+    echo "/dev/fuse does not exist skipping tests."
+    exit 0
+fi
+
 # Ensure everything is cleaned up on exit.
 rm -f "$image"
 mkdir -p "$mp"
-- 
